var eR=Object.defineProperty;var hT=g=>{throw TypeError(g)};var iR=(g,t,e)=>t in g?eR(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var it=(g,t,e)=>iR(g,typeof t!="symbol"?t+"":t,e),aA=(g,t,e)=>t.has(g)||hT("Cannot "+e);var l=(g,t,e)=>(aA(g,t,"read from private field"),e?e.call(g):t.get(g)),w=(g,t,e)=>t.has(g)?hT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),A=(g,t,e,a)=>(aA(g,t,"write to private field"),a?a.call(g,e):t.set(g,e),e),E=(g,t,e)=>(aA(g,t,"access private method"),e);var si=(g,t,e,a)=>({set _(s){A(g,t,s,e)},get _(){return l(g,t,a)}});import{r as nR,a as aR,g as r_,u as sR,b as rR,c as et,L as Lf,H as lR,R as oR,d as mb,e as cR}from"./vendor-Dw0uztGS.js";import{s as Fu,t as uR,i as gb,c as dT,m as fT,a as mT,z as hR,b as dR,h as fR}from"./d3-BIpq0z_F.js";import{G as l_}from"./genai-D1HyeO__.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var sA={exports:{}},Cf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function mR(){if(gT)return Cf;gT=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(a,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:g,type:a,key:u,ref:s!==void 0?s:null,props:o}}return Cf.Fragment=t,Cf.jsx=e,Cf.jsxs=e,Cf}var pT;function gR(){return pT||(pT=1,sA.exports=mR()),sA.exports}var D=gR(),rA={exports:{}},Mf={},lA={exports:{}},oA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function pR(){return bT||(bT=1,(function(g){function t(B,P){var W=B.length;B.push(P);t:for(;0<W;){var at=W-1>>>1,pt=B[at];if(0<s(pt,P))B[at]=P,B[W]=pt,W=at;else break t}}function e(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var P=B[0],W=B.pop();if(W!==P){B[0]=W;t:for(var at=0,pt=B.length,At=pt>>>1;at<At;){var ot=2*(at+1)-1,lt=B[ot],xt=ot+1,zt=B[xt];if(0>s(lt,W))xt<pt&&0>s(zt,lt)?(B[at]=zt,B[xt]=W,at=xt):(B[at]=lt,B[ot]=W,at=ot);else if(xt<pt&&0>s(zt,W))B[at]=zt,B[xt]=W,at=xt;else break t}}return P}function s(B,P){var W=B.sortIndex-P.sortIndex;return W!==0?W:B.id-P.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();g.unstable_now=function(){return u.now()-h}}var d=[],m=[],b=1,y=null,v=3,x=!1,_=!1,T=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(B){for(var P=e(m);P!==null;){if(P.callback===null)a(m);else if(P.startTime<=B)a(m),P.sortIndex=P.expirationTime,t(d,P);else break;P=e(m)}}function z(B){if(T=!1,O(B),!_)if(e(d)!==null)_=!0,j||(j=!0,nt());else{var P=e(m);P!==null&&gt(z,P.startTime-B)}}var j=!1,H=-1,U=5,X=-1;function J(){return R?!0:!(g.unstable_now()-X<U)}function tt(){if(R=!1,j){var B=g.unstable_now();X=B;var P=!0;try{t:{_=!1,T&&(T=!1,k(H),H=-1),x=!0;var W=v;try{e:{for(O(B),y=e(d);y!==null&&!(y.expirationTime>B&&J());){var at=y.callback;if(typeof at=="function"){y.callback=null,v=y.priorityLevel;var pt=at(y.expirationTime<=B);if(B=g.unstable_now(),typeof pt=="function"){y.callback=pt,O(B),P=!0;break e}y===e(d)&&a(d),O(B)}else a(d);y=e(d)}if(y!==null)P=!0;else{var At=e(m);At!==null&&gt(z,At.startTime-B),P=!1}}break t}finally{y=null,v=W,x=!1}P=void 0}}finally{P?nt():j=!1}}}var nt;if(typeof N=="function")nt=function(){N(tt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,st=bt.port2;bt.port1.onmessage=tt,nt=function(){st.postMessage(null)}}else nt=function(){M(tt,0)};function gt(B,P){H=M(function(){B(g.unstable_now())},P)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(B){B.callback=null},g.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<B?Math.floor(1e3/B):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_next=function(B){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var W=v;v=P;try{return B()}finally{v=W}},g.unstable_requestPaint=function(){R=!0},g.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=v;v=B;try{return P()}finally{v=W}},g.unstable_scheduleCallback=function(B,P,W){var at=g.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?at+W:at):W=at,B){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=W+pt,B={id:b++,callback:P,priorityLevel:B,startTime:W,expirationTime:pt,sortIndex:-1},W>at?(B.sortIndex=W,t(m,B),e(d)===null&&B===e(m)&&(T?(k(H),H=-1):T=!0,gt(z,W-at))):(B.sortIndex=pt,t(d,B),_||x||(_=!0,j||(j=!0,nt()))),B},g.unstable_shouldYield=J,g.unstable_wrapCallback=function(B){var P=v;return function(){var W=v;v=P;try{return B.apply(this,arguments)}finally{v=W}}}})(oA)),oA}var yT;function bR(){return yT||(yT=1,lA.exports=pR()),lA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function yR(){if(vT)return Mf;vT=1;var g=bR(),t=nR(),e=aR();function a(i){var n="https://react.dev/errors/"+i;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var n=i,r=i;if(i.alternate)for(;n.return;)n=n.return;else{i=n;do n=i,(n.flags&4098)!==0&&(r=n.return),i=n.return;while(i)}return n.tag===3?r:null}function u(i){if(i.tag===13){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function h(i){if(i.tag===31){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(a(188))}function m(i){var n=i.alternate;if(!n){if(n=o(i),n===null)throw Error(a(188));return n!==i?null:i}for(var r=i,c=n;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return d(f),i;if(p===c)return d(f),n;p=p.sibling}throw Error(a(188))}if(r.return!==c.return)r=f,c=p;else{for(var S=!1,C=f.child;C;){if(C===r){S=!0,r=f,c=p;break}if(C===c){S=!0,c=f,r=p;break}C=C.sibling}if(!S){for(C=p.child;C;){if(C===r){S=!0,r=p,c=f;break}if(C===c){S=!0,c=p,r=f;break}C=C.sibling}if(!S)throw Error(a(189))}}if(r.alternate!==c)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?i:n}function b(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i;for(i=i.child;i!==null;){if(n=b(i),n!==null)return n;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function nt(i){return i===null||typeof i!="object"?null:(i=tt&&i[tt]||i["@@iterator"],typeof i=="function"?i:null)}var bt=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===bt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case z:return"Suspense";case j:return"SuspenseList";case X:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case N:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case O:var n=i.render;return i=i.displayName,i||(i=n.displayName||n.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return n=i.displayName||null,n!==null?n:st(i.type)||"Memo";case U:n=i._payload,i=i._init;try{return st(i(n))}catch{}}return null}var gt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},at=[],pt=-1;function At(i){return{current:i}}function ot(i){0>pt||(i.current=at[pt],at[pt]=null,pt--)}function lt(i,n){pt++,at[pt]=i.current,i.current=n}var xt=At(null),zt=At(null),qt=At(null),Mt=At(null);function Be(i,n){switch(lt(qt,n),lt(zt,i),lt(xt,null),n.nodeType){case 9:case 11:i=(i=n.documentElement)&&(i=i.namespaceURI)?OE(i):0;break;default:if(i=n.tagName,n=n.namespaceURI)n=OE(n),i=BE(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ot(xt),lt(xt,i)}function qe(){ot(xt),ot(zt),ot(qt)}function Zi(i){i.memoizedState!==null&&lt(Mt,i);var n=xt.current,r=BE(n,i.type);n!==r&&(lt(zt,i),lt(xt,r))}function Re(i){zt.current===i&&(ot(xt),ot(zt)),Mt.current===i&&(ot(Mt),wf._currentValue=W)}var Vt,Kt;function te(i){if(Vt===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Vt=n&&n[1]||"",Kt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vt+i+Kt}var ee=!1;function ze(i,n){if(!i||ee)return"";ee=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(K){var Y=K}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(K){Y=K}i.call(Z.prototype)}}else{try{throw Error()}catch(K){Y=K}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),S=p[0],C=p[1];if(S&&C){var L=S.split(`
`),V=C.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===V.length)for(c=L.length-1,f=V.length-1;1<=c&&0<=f&&L[c]!==V[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==V[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==V[f]){var $=`
`+L[c].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=c&&0<=f);break}}}finally{ee=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?te(r):""}function dt(i,n){switch(i.tag){case 26:case 27:case 5:return te(i.type);case 16:return te("Lazy");case 13:return i.child!==n&&n!==null?te("Suspense Fallback"):te("Suspense");case 19:return te("SuspenseList");case 0:case 15:return ze(i.type,!1);case 11:return ze(i.type.render,!1);case 1:return ze(i.type,!0);case 31:return te("Activity");default:return""}}function Te(i){try{var n="",r=null;do n+=dt(i,r),r=i,i=i.return;while(i);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Va=Object.prototype.hasOwnProperty,jr=g.unstable_scheduleCallback,Ji=g.unstable_cancelCallback,vn=g.unstable_shouldYield,tn=g.unstable_requestPaint,Ve=g.unstable_now,Qc=g.unstable_getCurrentPriorityLevel,An=g.unstable_ImmediatePriority,Zc=g.unstable_UserBlockingPriority,Jc=g.unstable_NormalPriority,Ya=g.unstable_LowPriority,Cs=g.unstable_IdlePriority,Xa=g.log,Ld=g.unstable_setDisableYieldValue,Od=null,Sn=null;function Fr(i){if(typeof Xa=="function"&&Ld(i),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Od,i)}catch{}}var xn=Math.clz32?Math.clz32:U2,P2=Math.log,H2=Math.LN2;function U2(i){return i>>>=0,i===0?32:31-(P2(i)/H2|0)|0}var Zg=256,Jg=262144,tp=4194304;function co(i){var n=i&42;if(n!==0)return n;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ep(i,n,r){var c=i.pendingLanes;if(c===0)return 0;var f=0,p=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var C=c&134217727;return C!==0?(c=C&~p,c!==0?f=co(c):(S&=C,S!==0?f=co(S):r||(r=C&~i,r!==0&&(f=co(r))))):(C=c&~p,C!==0?f=co(C):S!==0?f=co(S):r||(r=c&~i,r!==0&&(f=co(r)))),f===0?0:n!==0&&n!==f&&(n&p)===0&&(p=f&-f,r=n&-n,p>=r||p===32&&(r&4194048)!==0)?n:f}function Bd(i,n){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&n)===0}function I2(i,n){switch(i){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gx(){var i=tp;return tp<<=1,(tp&62914560)===0&&(tp=4194304),i}function Y0(i){for(var n=[],r=0;31>r;r++)n.push(i);return n}function zd(i,n){i.pendingLanes|=n,n!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function G2(i,n,r,c,f,p){var S=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var C=i.entanglements,L=i.expirationTimes,V=i.hiddenUpdates;for(r=S&~r;0<r;){var $=31-xn(r),Z=1<<$;C[$]=0,L[$]=-1;var Y=V[$];if(Y!==null)for(V[$]=null,$=0;$<Y.length;$++){var K=Y[$];K!==null&&(K.lane&=-536870913)}r&=~Z}c!==0&&px(i,c,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(S&~n))}function px(i,n,r){i.pendingLanes|=n,i.suspendedLanes&=~n;var c=31-xn(n);i.entangledLanes|=n,i.entanglements[c]=i.entanglements[c]|1073741824|r&261930}function bx(i,n){var r=i.entangledLanes|=n;for(i=i.entanglements;r;){var c=31-xn(r),f=1<<c;f&n|i[c]&n&&(i[c]|=n),r&=~f}}function yx(i,n){var r=n&-n;return r=(r&42)!==0?1:X0(r),(r&(i.suspendedLanes|n))!==0?0:r}function X0(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function K0(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vx(){var i=P.p;return i!==0?i:(i=window.event,i===void 0?32:aT(i.type))}function Ax(i,n){var r=P.p;try{return P.p=i,n()}finally{P.p=r}}var Pr=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Pr,en="__reactProps$"+Pr,tu="__reactContainer$"+Pr,W0="__reactEvents$"+Pr,q2="__reactListeners$"+Pr,V2="__reactHandles$"+Pr,Sx="__reactResources$"+Pr,jd="__reactMarker$"+Pr;function $0(i){delete i[Ai],delete i[en],delete i[W0],delete i[q2],delete i[V2]}function eu(i){var n=i[Ai];if(n)return n;for(var r=i.parentNode;r;){if(n=r[tu]||r[Ai]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(i=IE(i);i!==null;){if(r=i[Ai])return r;i=IE(i)}return n}i=r,r=i.parentNode}return null}function iu(i){if(i=i[Ai]||i[tu]){var n=i.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return i}return null}function Fd(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i.stateNode;throw Error(a(33))}function nu(i){var n=i[Sx];return n||(n=i[Sx]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ui(i){i[jd]=!0}var xx=new Set,wx={};function uo(i,n){au(i,n),au(i+"Capture",n)}function au(i,n){for(wx[i]=n,i=0;i<n.length;i++)xx.add(n[i])}var Y2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ex={},Tx={};function X2(i){return Va.call(Tx,i)?!0:Va.call(Ex,i)?!1:Y2.test(i)?Tx[i]=!0:(Ex[i]=!0,!1)}function ip(i,n,r){if(X2(n))if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(n);return}}i.setAttribute(n,""+r)}}function np(i,n,r){if(r===null)i.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(n);return}i.setAttribute(n,""+r)}}function Ms(i,n,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(n,r,""+c)}}function Jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _x(i){var n=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function K2(i,n,r){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,n);if(!i.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(i,n,{configurable:!0,get:function(){return f.call(this)},set:function(S){r=""+S,p.call(this,S)}}),Object.defineProperty(i,n,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){i._valueTracker=null,delete i[n]}}}}function Q0(i){if(!i._valueTracker){var n=_x(i)?"checked":"value";i._valueTracker=K2(i,n,""+i[n])}}function Cx(i){if(!i)return!1;var n=i._valueTracker;if(!n)return!0;var r=n.getValue(),c="";return i&&(c=_x(i)?i.checked?"true":"false":i.value),i=c,i!==r?(n.setValue(i),!0):!1}function ap(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var W2=/[\n"\\]/g;function ta(i){return i.replace(W2,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Z0(i,n,r,c,f,p,S,C){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),n!=null?S==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+Jn(n)):i.value!==""+Jn(n)&&(i.value=""+Jn(n)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),n!=null?J0(i,S,Jn(n)):r!=null?J0(i,S,Jn(r)):c!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Jn(C):i.removeAttribute("name")}function Mx(i,n,r,c,f,p,S,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),n!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){Q0(i);return}r=r!=null?""+Jn(r):"",n=n!=null?""+Jn(n):r,C||n===i.value||(i.value=n),i.defaultValue=n}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=C?i.checked:!!c,i.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Q0(i)}function J0(i,n,r){n==="number"&&ap(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function su(i,n,r,c){if(i=i.options,n){n={};for(var f=0;f<r.length;f++)n["$"+r[f]]=!0;for(r=0;r<i.length;r++)f=n.hasOwnProperty("$"+i[r].value),i[r].selected!==f&&(i[r].selected=f),f&&c&&(i[r].defaultSelected=!0)}else{for(r=""+Jn(r),n=null,f=0;f<i.length;f++){if(i[f].value===r){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}n!==null||i[f].disabled||(n=i[f])}n!==null&&(n.selected=!0)}}function Dx(i,n,r){if(n!=null&&(n=""+Jn(n),n!==i.value&&(i.value=n),r==null)){i.defaultValue!==n&&(i.defaultValue=n);return}i.defaultValue=r!=null?""+Jn(r):""}function Rx(i,n,r,c){if(n==null){if(c!=null){if(r!=null)throw Error(a(92));if(gt(c)){if(1<c.length)throw Error(a(93));c=c[0]}r=c}r==null&&(r=""),n=r}r=Jn(n),i.defaultValue=r,c=i.textContent,c===r&&c!==""&&c!==null&&(i.value=c),Q0(i)}function ru(i,n){if(n){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=n;return}}i.textContent=n}var $2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nx(i,n,r){var c=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="":c?i.setProperty(n,r):typeof r!="number"||r===0||$2.has(n)?n==="float"?i.cssFloat=r:i[n]=(""+r).trim():i[n]=r+"px"}function kx(i,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(i=i.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var f in n)c=n[f],n.hasOwnProperty(f)&&r[f]!==c&&Nx(i,f,c)}else for(var p in n)n.hasOwnProperty(p)&&Nx(i,p,n[p])}function ty(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sp(i){return Z2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ds(){}var ey=null;function iy(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var lu=null,ou=null;function Lx(i){var n=iu(i);if(n&&(i=n.stateNode)){var r=i[en]||null;t:switch(i=n.stateNode,n.type){case"input":if(Z0(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ta(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var c=r[n];if(c!==i&&c.form===i.form){var f=c[en]||null;if(!f)throw Error(a(90));Z0(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<r.length;n++)c=r[n],c.form===i.form&&Cx(c)}break t;case"textarea":Dx(i,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&su(i,!!r.multiple,n,!1)}}}var ny=!1;function Ox(i,n,r){if(ny)return i(n,r);ny=!0;try{var c=i(n);return c}finally{if(ny=!1,(lu!==null||ou!==null)&&(Yp(),lu&&(n=lu,i=ou,ou=lu=null,Lx(n),i)))for(n=0;n<i.length;n++)Lx(i[n])}}function Pd(i,n){var r=i.stateNode;if(r===null)return null;var c=r[en]||null;if(c===null)return null;r=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ay=!1;if(Rs)try{var Hd={};Object.defineProperty(Hd,"passive",{get:function(){ay=!0}}),window.addEventListener("test",Hd,Hd),window.removeEventListener("test",Hd,Hd)}catch{ay=!1}var Hr=null,sy=null,rp=null;function Bx(){if(rp)return rp;var i,n=sy,r=n.length,c,f="value"in Hr?Hr.value:Hr.textContent,p=f.length;for(i=0;i<r&&n[i]===f[i];i++);var S=r-i;for(c=1;c<=S&&n[r-c]===f[p-c];c++);return rp=f.slice(i,1<c?1-c:void 0)}function lp(i){var n=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&n===13&&(i=13)):i=n,i===10&&(i=13),32<=i||i===13?i:0}function op(){return!0}function zx(){return!1}function nn(i){function n(r,c,f,p,S){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=S,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(r=i[C],this[C]=r?r(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?op:zx,this.isPropagationStopped=zx,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),n}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=nn(ho),Ud=y({},ho,{view:0,detail:0}),J2=nn(Ud),ry,ly,Id,up=y({},Ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cy,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Id&&(Id&&i.type==="mousemove"?(ry=i.screenX-Id.screenX,ly=i.screenY-Id.screenY):ly=ry=0,Id=i),ry)},movementY:function(i){return"movementY"in i?i.movementY:ly}}),jx=nn(up),tM=y({},up,{dataTransfer:0}),eM=nn(tM),iM=y({},Ud,{relatedTarget:0}),oy=nn(iM),nM=y({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),aM=nn(nM),sM=y({},ho,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rM=nn(sM),lM=y({},ho,{data:0}),Fx=nn(lM),oM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hM(i){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(i):(i=uM[i])?!!n[i]:!1}function cy(){return hM}var dM=y({},Ud,{key:function(i){if(i.key){var n=oM[i.key]||i.key;if(n!=="Unidentified")return n}return i.type==="keypress"?(i=lp(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?cM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cy,charCode:function(i){return i.type==="keypress"?lp(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?lp(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fM=nn(dM),mM=y({},up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Px=nn(mM),gM=y({},Ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cy}),pM=nn(gM),bM=y({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),yM=nn(bM),vM=y({},up,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),AM=nn(vM),SM=y({},ho,{newState:0,oldState:0}),xM=nn(SM),wM=[9,13,27,32],uy=Rs&&"CompositionEvent"in window,Gd=null;Rs&&"documentMode"in document&&(Gd=document.documentMode);var EM=Rs&&"TextEvent"in window&&!Gd,Hx=Rs&&(!uy||Gd&&8<Gd&&11>=Gd),Ux=" ",Ix=!1;function Gx(i,n){switch(i){case"keyup":return wM.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var cu=!1;function TM(i,n){switch(i){case"compositionend":return qx(n);case"keypress":return n.which!==32?null:(Ix=!0,Ux);case"textInput":return i=n.data,i===Ux&&Ix?null:i;default:return null}}function _M(i,n){if(cu)return i==="compositionend"||!uy&&Gx(i,n)?(i=Bx(),rp=sy=Hr=null,cu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Hx&&n.locale!=="ko"?null:n.data;default:return null}}var CM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n==="input"?!!CM[i.type]:n==="textarea"}function Yx(i,n,r,c){lu?ou?ou.push(c):ou=[c]:lu=c,n=Jp(n,"onChange"),0<n.length&&(r=new cp("onChange","change",null,r,c),i.push({event:r,listeners:n}))}var qd=null,Vd=null;function MM(i){ME(i,0)}function hp(i){var n=Fd(i);if(Cx(n))return i}function Xx(i,n){if(i==="change")return n}var Kx=!1;if(Rs){var hy;if(Rs){var dy="oninput"in document;if(!dy){var Wx=document.createElement("div");Wx.setAttribute("oninput","return;"),dy=typeof Wx.oninput=="function"}hy=dy}else hy=!1;Kx=hy&&(!document.documentMode||9<document.documentMode)}function $x(){qd&&(qd.detachEvent("onpropertychange",Qx),Vd=qd=null)}function Qx(i){if(i.propertyName==="value"&&hp(Vd)){var n=[];Yx(n,Vd,i,iy(i)),Ox(MM,n)}}function DM(i,n,r){i==="focusin"?($x(),qd=n,Vd=r,qd.attachEvent("onpropertychange",Qx)):i==="focusout"&&$x()}function RM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hp(Vd)}function NM(i,n){if(i==="click")return hp(n)}function kM(i,n){if(i==="input"||i==="change")return hp(n)}function LM(i,n){return i===n&&(i!==0||1/i===1/n)||i!==i&&n!==n}var wn=typeof Object.is=="function"?Object.is:LM;function Yd(i,n){if(wn(i,n))return!0;if(typeof i!="object"||i===null||typeof n!="object"||n===null)return!1;var r=Object.keys(i),c=Object.keys(n);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!Va.call(n,f)||!wn(i[f],n[f]))return!1}return!0}function Zx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jx(i,n){var r=Zx(i);i=0;for(var c;r;){if(r.nodeType===3){if(c=i+r.textContent.length,i<=n&&c>=n)return{node:r,offset:n-i};i=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Zx(r)}}function tw(i,n){return i&&n?i===n?!0:i&&i.nodeType===3?!1:n&&n.nodeType===3?tw(i,n.parentNode):"contains"in i?i.contains(n):i.compareDocumentPosition?!!(i.compareDocumentPosition(n)&16):!1:!1}function ew(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var n=ap(i.document);n instanceof i.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)i=n.contentWindow;else break;n=ap(i.document)}return n}function fy(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n&&(n==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||n==="textarea"||i.contentEditable==="true")}var OM=Rs&&"documentMode"in document&&11>=document.documentMode,uu=null,my=null,Xd=null,gy=!1;function iw(i,n,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gy||uu==null||uu!==ap(c)||(c=uu,"selectionStart"in c&&fy(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xd&&Yd(Xd,c)||(Xd=c,c=Jp(my,"onSelect"),0<c.length&&(n=new cp("onSelect","select",null,n,r),i.push({event:n,listeners:c}),n.target=uu)))}function fo(i,n){var r={};return r[i.toLowerCase()]=n.toLowerCase(),r["Webkit"+i]="webkit"+n,r["Moz"+i]="moz"+n,r}var hu={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionrun:fo("Transition","TransitionRun"),transitionstart:fo("Transition","TransitionStart"),transitioncancel:fo("Transition","TransitionCancel"),transitionend:fo("Transition","TransitionEnd")},py={},nw={};Rs&&(nw=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function mo(i){if(py[i])return py[i];if(!hu[i])return i;var n=hu[i],r;for(r in n)if(n.hasOwnProperty(r)&&r in nw)return py[i]=n[r];return i}var aw=mo("animationend"),sw=mo("animationiteration"),rw=mo("animationstart"),BM=mo("transitionrun"),zM=mo("transitionstart"),jM=mo("transitioncancel"),lw=mo("transitionend"),ow=new Map,by="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");by.push("scrollEnd");function Ta(i,n){ow.set(i,n),uo(n,[i])}var dp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ea=[],du=0,yy=0;function fp(){for(var i=du,n=yy=du=0;n<i;){var r=ea[n];ea[n++]=null;var c=ea[n];ea[n++]=null;var f=ea[n];ea[n++]=null;var p=ea[n];if(ea[n++]=null,c!==null&&f!==null){var S=c.pending;S===null?f.next=f:(f.next=S.next,S.next=f),c.pending=f}p!==0&&cw(r,f,p)}}function mp(i,n,r,c){ea[du++]=i,ea[du++]=n,ea[du++]=r,ea[du++]=c,yy|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function vy(i,n,r,c){return mp(i,n,r,c),gp(i)}function go(i,n){return mp(i,null,null,n),gp(i)}function cw(i,n,r){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r);for(var f=!1,p=i.return;p!==null;)p.childLanes|=r,c=p.alternate,c!==null&&(c.childLanes|=r),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&n!==null&&(f=31-xn(r),i=p.hiddenUpdates,c=i[f],c===null?i[f]=[n]:c.push(n),n.lane=r|536870912),p):null}function gp(i){if(50<pf)throw pf=0,Mv=null,Error(a(185));for(var n=i.return;n!==null;)i=n,n=i.return;return i.tag===3?i.stateNode:null}var fu={};function FM(i,n,r,c){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,n,r,c){return new FM(i,n,r,c)}function Ay(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ns(i,n){var r=i.alternate;return r===null?(r=En(i.tag,n,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=n,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,n=i.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function uw(i,n){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,n=r.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),i}function pp(i,n,r,c,f,p){var S=0;if(c=i,typeof i=="function")Ay(i)&&(S=1);else if(typeof i=="string")S=GD(i,r,xt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case X:return i=En(31,r,n,f),i.elementType=X,i.lanes=p,i;case T:return po(r.children,f,p,n);case R:S=8,f|=24;break;case M:return i=En(12,r,n,f|2),i.elementType=M,i.lanes=p,i;case z:return i=En(13,r,n,f),i.elementType=z,i.lanes=p,i;case j:return i=En(19,r,n,f),i.elementType=j,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:S=10;break t;case k:S=9;break t;case O:S=11;break t;case H:S=14;break t;case U:S=16,c=null;break t}S=29,r=Error(a(130,i===null?"null":typeof i,"")),c=null}return n=En(S,r,n,f),n.elementType=i,n.type=c,n.lanes=p,n}function po(i,n,r,c){return i=En(7,i,c,n),i.lanes=r,i}function Sy(i,n,r){return i=En(6,i,null,n),i.lanes=r,i}function hw(i){var n=En(18,null,null,0);return n.stateNode=i,n}function xy(i,n,r){return n=En(4,i.children!==null?i.children:[],i.key,n),n.lanes=r,n.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},n}var dw=new WeakMap;function ia(i,n){if(typeof i=="object"&&i!==null){var r=dw.get(i);return r!==void 0?r:(n={value:i,source:n,stack:Te(n)},dw.set(i,n),n)}return{value:i,source:n,stack:Te(n)}}var mu=[],gu=0,bp=null,Kd=0,na=[],aa=0,Ur=null,Ka=1,Wa="";function ks(i,n){mu[gu++]=Kd,mu[gu++]=bp,bp=i,Kd=n}function fw(i,n,r){na[aa++]=Ka,na[aa++]=Wa,na[aa++]=Ur,Ur=i;var c=Ka;i=Wa;var f=32-xn(c)-1;c&=~(1<<f),r+=1;var p=32-xn(n)+f;if(30<p){var S=f-f%5;p=(c&(1<<S)-1).toString(32),c>>=S,f-=S,Ka=1<<32-xn(n)+f|r<<f|c,Wa=p+i}else Ka=1<<p|r<<f|c,Wa=i}function wy(i){i.return!==null&&(ks(i,1),fw(i,1,0))}function Ey(i){for(;i===bp;)bp=mu[--gu],mu[gu]=null,Kd=mu[--gu],mu[gu]=null;for(;i===Ur;)Ur=na[--aa],na[aa]=null,Wa=na[--aa],na[aa]=null,Ka=na[--aa],na[aa]=null}function mw(i,n){na[aa++]=Ka,na[aa++]=Wa,na[aa++]=Ur,Ka=n.id,Wa=n.overflow,Ur=i}var Si=null,xe=null,It=!1,Ir=null,sa=!1,Ty=Error(a(519));function Gr(i){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wd(ia(n,i)),Ty}function gw(i){var n=i.stateNode,r=i.type,c=i.memoizedProps;switch(n[Ai]=i,n[en]=c,r){case"dialog":Ft("cancel",n),Ft("close",n);break;case"iframe":case"object":case"embed":Ft("load",n);break;case"video":case"audio":for(r=0;r<yf.length;r++)Ft(yf[r],n);break;case"source":Ft("error",n);break;case"img":case"image":case"link":Ft("error",n),Ft("load",n);break;case"details":Ft("toggle",n);break;case"input":Ft("invalid",n),Mx(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ft("invalid",n);break;case"textarea":Ft("invalid",n),Rx(n,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||c.suppressHydrationWarning===!0||kE(n.textContent,r)?(c.popover!=null&&(Ft("beforetoggle",n),Ft("toggle",n)),c.onScroll!=null&&Ft("scroll",n),c.onScrollEnd!=null&&Ft("scrollend",n),c.onClick!=null&&(n.onclick=Ds),n=!0):n=!1,n||Gr(i,!0)}function pw(i){for(Si=i.return;Si;)switch(Si.tag){case 5:case 31:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:Si=Si.return}}function pu(i){if(i!==Si)return!1;if(!It)return pw(i),It=!0,!1;var n=i.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Gv(i.type,i.memoizedProps)),r=!r),r&&xe&&Gr(i),pw(i),n===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));xe=UE(i)}else if(n===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));xe=UE(i)}else n===27?(n=xe,nl(i.type)?(i=Kv,Kv=null,xe=i):xe=n):xe=Si?la(i.stateNode.nextSibling):null;return!0}function bo(){xe=Si=null,It=!1}function _y(){var i=Ir;return i!==null&&(ln===null?ln=i:ln.push.apply(ln,i),Ir=null),i}function Wd(i){Ir===null?Ir=[i]:Ir.push(i)}var Cy=At(null),yo=null,Ls=null;function qr(i,n,r){lt(Cy,n._currentValue),n._currentValue=r}function Os(i){i._currentValue=Cy.current,ot(Cy)}function My(i,n,r){for(;i!==null;){var c=i.alternate;if((i.childLanes&n)!==n?(i.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),i===r)break;i=i.return}}function Dy(i,n,r,c){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var S=f.child;p=p.firstContext;t:for(;p!==null;){var C=p;p=f;for(var L=0;L<n.length;L++)if(C.context===n[L]){p.lanes|=r,C=p.alternate,C!==null&&(C.lanes|=r),My(p.return,r,i),c||(S=null);break t}p=C.next}}else if(f.tag===18){if(S=f.return,S===null)throw Error(a(341));S.lanes|=r,p=S.alternate,p!==null&&(p.lanes|=r),My(S,r,i),S=null}else S=f.child;if(S!==null)S.return=f;else for(S=f;S!==null;){if(S===i){S=null;break}if(f=S.sibling,f!==null){f.return=S.return,S=f;break}S=S.return}f=S}}function bu(i,n,r,c){i=null;for(var f=n,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var S=f.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var C=f.type;wn(f.pendingProps.value,S.value)||(i!==null?i.push(C):i=[C])}}else if(f===Mt.current){if(S=f.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(wf):i=[wf])}f=f.return}i!==null&&Dy(n,i,r,c),n.flags|=262144}function yp(i){for(i=i.firstContext;i!==null;){if(!wn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function vo(i){yo=i,Ls=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function xi(i){return bw(yo,i)}function vp(i,n){return yo===null&&vo(i),bw(i,n)}function bw(i,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ls===null){if(i===null)throw Error(a(308));Ls=n,i.dependencies={lanes:0,firstContext:n},i.flags|=524288}else Ls=Ls.next=n;return r}var PM=typeof AbortController<"u"?AbortController:function(){var i=[],n=this.signal={aborted:!1,addEventListener:function(r,c){i.push(c)}};this.abort=function(){n.aborted=!0,i.forEach(function(r){return r()})}},HM=g.unstable_scheduleCallback,UM=g.unstable_NormalPriority,Qe={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ry(){return{controller:new PM,data:new Map,refCount:0}}function $d(i){i.refCount--,i.refCount===0&&HM(UM,function(){i.controller.abort()})}var Qd=null,Ny=0,yu=0,vu=null;function IM(i,n){if(Qd===null){var r=Qd=[];Ny=0,yu=Ov(),vu={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Ny++,n.then(yw,yw),n}function yw(){if(--Ny===0&&Qd!==null){vu!==null&&(vu.status="fulfilled");var i=Qd;Qd=null,yu=0,vu=null;for(var n=0;n<i.length;n++)(0,i[n])()}}function GM(i,n){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return i.then(function(){c.status="fulfilled",c.value=n;for(var f=0;f<r.length;f++)(0,r[f])(n)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var vw=B.S;B.S=function(i,n){iE=Ve(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&IM(i,n),vw!==null&&vw(i,n)};var Ao=At(null);function ky(){var i=Ao.current;return i!==null?i:me.pooledCache}function Ap(i,n){n===null?lt(Ao,Ao.current):lt(Ao,n.pool)}function Aw(){var i=ky();return i===null?null:{parent:Qe._currentValue,pool:i}}var Au=Error(a(460)),Ly=Error(a(474)),Sp=Error(a(542)),xp={then:function(){}};function Sw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xw(i,n,r){switch(r=i[r],r===void 0?i.push(n):r!==n&&(n.then(Ds,Ds),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,Ew(i),i;default:if(typeof n.status=="string")n.then(Ds,Ds);else{if(i=me,i!==null&&100<i.shellSuspendCounter)throw Error(a(482));i=n,i.status="pending",i.then(function(c){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=c}},function(c){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,Ew(i),i}throw xo=n,Au}}function So(i){try{var n=i._init;return n(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xo=r,Au):r}}var xo=null;function ww(){if(xo===null)throw Error(a(459));var i=xo;return xo=null,i}function Ew(i){if(i===Au||i===Sp)throw Error(a(483))}var Su=null,Zd=0;function wp(i){var n=Zd;return Zd+=1,Su===null&&(Su=[]),xw(Su,i,n)}function Jd(i,n){n=n.props.ref,i.ref=n!==void 0?n:null}function Ep(i,n){throw n.$$typeof===v?Error(a(525)):(i=Object.prototype.toString.call(n),Error(a(31,i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)))}function Tw(i){function n(I,F){if(i){var q=I.deletions;q===null?(I.deletions=[F],I.flags|=16):q.push(F)}}function r(I,F){if(!i)return null;for(;F!==null;)n(I,F),F=F.sibling;return null}function c(I){for(var F=new Map;I!==null;)I.key!==null?F.set(I.key,I):F.set(I.index,I),I=I.sibling;return F}function f(I,F){return I=Ns(I,F),I.index=0,I.sibling=null,I}function p(I,F,q){return I.index=q,i?(q=I.alternate,q!==null?(q=q.index,q<F?(I.flags|=67108866,F):q):(I.flags|=67108866,F)):(I.flags|=1048576,F)}function S(I){return i&&I.alternate===null&&(I.flags|=67108866),I}function C(I,F,q,Q){return F===null||F.tag!==6?(F=Sy(q,I.mode,Q),F.return=I,F):(F=f(F,q),F.return=I,F)}function L(I,F,q,Q){var St=q.type;return St===T?$(I,F,q.props.children,Q,q.key):F!==null&&(F.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===U&&So(St)===F.type)?(F=f(F,q.props),Jd(F,q),F.return=I,F):(F=pp(q.type,q.key,q.props,null,I.mode,Q),Jd(F,q),F.return=I,F)}function V(I,F,q,Q){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=xy(q,I.mode,Q),F.return=I,F):(F=f(F,q.children||[]),F.return=I,F)}function $(I,F,q,Q,St){return F===null||F.tag!==7?(F=po(q,I.mode,Q,St),F.return=I,F):(F=f(F,q),F.return=I,F)}function Z(I,F,q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Sy(""+F,I.mode,q),F.return=I,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case x:return q=pp(F.type,F.key,F.props,null,I.mode,q),Jd(q,F),q.return=I,q;case _:return F=xy(F,I.mode,q),F.return=I,F;case U:return F=So(F),Z(I,F,q)}if(gt(F)||nt(F))return F=po(F,I.mode,q,null),F.return=I,F;if(typeof F.then=="function")return Z(I,wp(F),q);if(F.$$typeof===N)return Z(I,vp(I,F),q);Ep(I,F)}return null}function Y(I,F,q,Q){var St=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return St!==null?null:C(I,F,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return q.key===St?L(I,F,q,Q):null;case _:return q.key===St?V(I,F,q,Q):null;case U:return q=So(q),Y(I,F,q,Q)}if(gt(q)||nt(q))return St!==null?null:$(I,F,q,Q,null);if(typeof q.then=="function")return Y(I,F,wp(q),Q);if(q.$$typeof===N)return Y(I,F,vp(I,q),Q);Ep(I,q)}return null}function K(I,F,q,Q,St){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return I=I.get(q)||null,C(F,I,""+Q,St);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return I=I.get(Q.key===null?q:Q.key)||null,L(F,I,Q,St);case _:return I=I.get(Q.key===null?q:Q.key)||null,V(F,I,Q,St);case U:return Q=So(Q),K(I,F,q,Q,St)}if(gt(Q)||nt(Q))return I=I.get(q)||null,$(F,I,Q,St,null);if(typeof Q.then=="function")return K(I,F,q,wp(Q),St);if(Q.$$typeof===N)return K(I,F,q,vp(F,Q),St);Ep(F,Q)}return null}function ft(I,F,q,Q){for(var St=null,Wt=null,yt=F,Nt=F=0,Ht=null;yt!==null&&Nt<q.length;Nt++){yt.index>Nt?(Ht=yt,yt=null):Ht=yt.sibling;var $t=Y(I,yt,q[Nt],Q);if($t===null){yt===null&&(yt=Ht);break}i&&yt&&$t.alternate===null&&n(I,yt),F=p($t,F,Nt),Wt===null?St=$t:Wt.sibling=$t,Wt=$t,yt=Ht}if(Nt===q.length)return r(I,yt),It&&ks(I,Nt),St;if(yt===null){for(;Nt<q.length;Nt++)yt=Z(I,q[Nt],Q),yt!==null&&(F=p(yt,F,Nt),Wt===null?St=yt:Wt.sibling=yt,Wt=yt);return It&&ks(I,Nt),St}for(yt=c(yt);Nt<q.length;Nt++)Ht=K(yt,I,Nt,q[Nt],Q),Ht!==null&&(i&&Ht.alternate!==null&&yt.delete(Ht.key===null?Nt:Ht.key),F=p(Ht,F,Nt),Wt===null?St=Ht:Wt.sibling=Ht,Wt=Ht);return i&&yt.forEach(function(ol){return n(I,ol)}),It&&ks(I,Nt),St}function wt(I,F,q,Q){if(q==null)throw Error(a(151));for(var St=null,Wt=null,yt=F,Nt=F=0,Ht=null,$t=q.next();yt!==null&&!$t.done;Nt++,$t=q.next()){yt.index>Nt?(Ht=yt,yt=null):Ht=yt.sibling;var ol=Y(I,yt,$t.value,Q);if(ol===null){yt===null&&(yt=Ht);break}i&&yt&&ol.alternate===null&&n(I,yt),F=p(ol,F,Nt),Wt===null?St=ol:Wt.sibling=ol,Wt=ol,yt=Ht}if($t.done)return r(I,yt),It&&ks(I,Nt),St;if(yt===null){for(;!$t.done;Nt++,$t=q.next())$t=Z(I,$t.value,Q),$t!==null&&(F=p($t,F,Nt),Wt===null?St=$t:Wt.sibling=$t,Wt=$t);return It&&ks(I,Nt),St}for(yt=c(yt);!$t.done;Nt++,$t=q.next())$t=K(yt,I,Nt,$t.value,Q),$t!==null&&(i&&$t.alternate!==null&&yt.delete($t.key===null?Nt:$t.key),F=p($t,F,Nt),Wt===null?St=$t:Wt.sibling=$t,Wt=$t);return i&&yt.forEach(function(tR){return n(I,tR)}),It&&ks(I,Nt),St}function oe(I,F,q,Q){if(typeof q=="object"&&q!==null&&q.type===T&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case x:t:{for(var St=q.key;F!==null;){if(F.key===St){if(St=q.type,St===T){if(F.tag===7){r(I,F.sibling),Q=f(F,q.props.children),Q.return=I,I=Q;break t}}else if(F.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===U&&So(St)===F.type){r(I,F.sibling),Q=f(F,q.props),Jd(Q,q),Q.return=I,I=Q;break t}r(I,F);break}else n(I,F);F=F.sibling}q.type===T?(Q=po(q.props.children,I.mode,Q,q.key),Q.return=I,I=Q):(Q=pp(q.type,q.key,q.props,null,I.mode,Q),Jd(Q,q),Q.return=I,I=Q)}return S(I);case _:t:{for(St=q.key;F!==null;){if(F.key===St)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){r(I,F.sibling),Q=f(F,q.children||[]),Q.return=I,I=Q;break t}else{r(I,F);break}else n(I,F);F=F.sibling}Q=xy(q,I.mode,Q),Q.return=I,I=Q}return S(I);case U:return q=So(q),oe(I,F,q,Q)}if(gt(q))return ft(I,F,q,Q);if(nt(q)){if(St=nt(q),typeof St!="function")throw Error(a(150));return q=St.call(q),wt(I,F,q,Q)}if(typeof q.then=="function")return oe(I,F,wp(q),Q);if(q.$$typeof===N)return oe(I,F,vp(I,q),Q);Ep(I,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,F!==null&&F.tag===6?(r(I,F.sibling),Q=f(F,q),Q.return=I,I=Q):(r(I,F),Q=Sy(q,I.mode,Q),Q.return=I,I=Q),S(I)):r(I,F)}return function(I,F,q,Q){try{Zd=0;var St=oe(I,F,q,Q);return Su=null,St}catch(yt){if(yt===Au||yt===Sp)throw yt;var Wt=En(29,yt,null,I.mode);return Wt.lanes=Q,Wt.return=I,Wt}finally{}}}var wo=Tw(!0),_w=Tw(!1),Vr=!1;function Oy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function By(i,n){i=i.updateQueue,n.updateQueue===i&&(n.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Yr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xr(i,n,r){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Qt&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,n=gp(i),cw(i,null,r),n}return mp(i,c,n,r),gp(i)}function tf(i,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var c=n.lanes;c&=i.pendingLanes,r|=c,n.lanes=r,bx(i,r)}}function zy(i,n){var r=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=S:p=p.next=S,r=r.next}while(r!==null);p===null?f=p=n:p=p.next=n}else f=p=n;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=n:i.next=n,r.lastBaseUpdate=n}var jy=!1;function ef(){if(jy){var i=vu;if(i!==null)throw i}}function nf(i,n,r,c){jy=!1;var f=i.updateQueue;Vr=!1;var p=f.firstBaseUpdate,S=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,V=L.next;L.next=null,S===null?p=V:S.next=V,S=L;var $=i.alternate;$!==null&&($=$.updateQueue,C=$.lastBaseUpdate,C!==S&&(C===null?$.firstBaseUpdate=V:C.next=V,$.lastBaseUpdate=L))}if(p!==null){var Z=f.baseState;S=0,$=V=L=null,C=p;do{var Y=C.lane&-536870913,K=Y!==C.lane;if(K?(Pt&Y)===Y:(c&Y)===Y){Y!==0&&Y===yu&&(jy=!0),$!==null&&($=$.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var ft=i,wt=C;Y=n;var oe=r;switch(wt.tag){case 1:if(ft=wt.payload,typeof ft=="function"){Z=ft.call(oe,Z,Y);break t}Z=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=wt.payload,Y=typeof ft=="function"?ft.call(oe,Z,Y):ft,Y==null)break t;Z=y({},Z,Y);break t;case 2:Vr=!0}}Y=C.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},$===null?(V=$=K,L=Z):$=$.next=K,S|=Y;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;K=C,C=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);$===null&&(L=Z),f.baseState=L,f.firstBaseUpdate=V,f.lastBaseUpdate=$,p===null&&(f.shared.lanes=0),Zr|=S,i.lanes=S,i.memoizedState=Z}}function Cw(i,n){if(typeof i!="function")throw Error(a(191,i));i.call(n)}function Mw(i,n){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Cw(r[i],n)}var xu=At(null),Tp=At(0);function Dw(i,n){i=Gs,lt(Tp,i),lt(xu,n),Gs=i|n.baseLanes}function Fy(){lt(Tp,Gs),lt(xu,xu.current)}function Py(){Gs=Tp.current,ot(xu),ot(Tp)}var Tn=At(null),ra=null;function Kr(i){var n=i.alternate;lt(Ye,Ye.current&1),lt(Tn,i),ra===null&&(n===null||xu.current!==null||n.memoizedState!==null)&&(ra=i)}function Hy(i){lt(Ye,Ye.current),lt(Tn,i),ra===null&&(ra=i)}function Rw(i){i.tag===22?(lt(Ye,Ye.current),lt(Tn,i),ra===null&&(ra=i)):Wr()}function Wr(){lt(Ye,Ye.current),lt(Tn,Tn.current)}function _n(i){ot(Tn),ra===i&&(ra=null),ot(Ye)}var Ye=At(0);function _p(i){for(var n=i;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Yv(r)||Xv(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Bs=0,Dt=null,re=null,Ze=null,Cp=!1,wu=!1,Eo=!1,Mp=0,af=0,Eu=null,qM=0;function je(){throw Error(a(321))}function Uy(i,n){if(n===null)return!1;for(var r=0;r<n.length&&r<i.length;r++)if(!wn(i[r],n[r]))return!1;return!0}function Iy(i,n,r,c,f,p){return Bs=p,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=i===null||i.memoizedState===null?f1:nv,Eo=!1,p=r(c,f),Eo=!1,wu&&(p=kw(n,r,c,f)),Nw(i),p}function Nw(i){B.H=lf;var n=re!==null&&re.next!==null;if(Bs=0,Ze=re=Dt=null,Cp=!1,af=0,Eu=null,n)throw Error(a(300));i===null||Je||(i=i.dependencies,i!==null&&yp(i)&&(Je=!0))}function kw(i,n,r,c){Dt=i;var f=0;do{if(wu&&(Eu=null),af=0,wu=!1,25<=f)throw Error(a(301));if(f+=1,Ze=re=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=m1,p=n(r,c)}while(wu);return p}function VM(){var i=B.H,n=i.useState()[0];return n=typeof n.then=="function"?sf(n):n,i=i.useState()[0],(re!==null?re.memoizedState:null)!==i&&(Dt.flags|=1024),n}function Gy(){var i=Mp!==0;return Mp=0,i}function qy(i,n,r){n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~r}function Vy(i){if(Cp){for(i=i.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Cp=!1}Bs=0,Ze=re=Dt=null,wu=!1,af=Mp=0,Eu=null}function Gi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Dt.memoizedState=Ze=i:Ze=Ze.next=i,Ze}function Xe(){if(re===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=re.next;var n=Ze===null?Dt.memoizedState:Ze.next;if(n!==null)Ze=n,re=i;else{if(i===null)throw Dt.alternate===null?Error(a(467)):Error(a(310));re=i,i={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ze===null?Dt.memoizedState=Ze=i:Ze=Ze.next=i}return Ze}function Dp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sf(i){var n=af;return af+=1,Eu===null&&(Eu=[]),i=xw(Eu,i,n),n=Dt,(Ze===null?n.memoizedState:Ze.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?f1:nv),i}function Rp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return sf(i);if(i.$$typeof===N)return xi(i)}throw Error(a(438,String(i)))}function Yy(i){var n=null,r=Dt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Dp(),Dt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(i),c=0;c<i;c++)r[c]=J;return n.index++,r}function zs(i,n){return typeof n=="function"?n(i):n}function Np(i){var n=Xe();return Xy(n,re,i)}function Xy(i,n,r){var c=i.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=r;var f=i.baseQueue,p=c.pending;if(p!==null){if(f!==null){var S=f.next;f.next=p.next,p.next=S}n.baseQueue=f=p,c.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{n=f.next;var C=S=null,L=null,V=n,$=!1;do{var Z=V.lane&-536870913;if(Z!==V.lane?(Pt&Z)===Z:(Bs&Z)===Z){var Y=V.revertLane;if(Y===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),Z===yu&&($=!0);else if((Bs&Y)===Y){V=V.next,Y===yu&&($=!0);continue}else Z={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},L===null?(C=L=Z,S=p):L=L.next=Z,Dt.lanes|=Y,Zr|=Y;Z=V.action,Eo&&r(p,Z),p=V.hasEagerState?V.eagerState:r(p,Z)}else Y={lane:Z,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},L===null?(C=L=Y,S=p):L=L.next=Y,Dt.lanes|=Z,Zr|=Z;V=V.next}while(V!==null&&V!==n);if(L===null?S=p:L.next=C,!wn(p,i.memoizedState)&&(Je=!0,$&&(r=vu,r!==null)))throw r;i.memoizedState=p,i.baseState=S,i.baseQueue=L,c.lastRenderedState=p}return f===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Ky(i){var n=Xe(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var c=r.dispatch,f=r.pending,p=n.memoizedState;if(f!==null){r.pending=null;var S=f=f.next;do p=i(p,S.action),S=S.next;while(S!==f);wn(p,n.memoizedState)||(Je=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),r.lastRenderedState=p}return[p,c]}function Lw(i,n,r){var c=Dt,f=Xe(),p=It;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=n();var S=!wn((re||f).memoizedState,r);if(S&&(f.memoizedState=r,Je=!0),f=f.queue,Qy(zw.bind(null,c,f,i),[i]),f.getSnapshot!==n||S||Ze!==null&&Ze.memoizedState.tag&1){if(c.flags|=2048,Tu(9,{destroy:void 0},Bw.bind(null,c,f,r,n),null),me===null)throw Error(a(349));p||(Bs&127)!==0||Ow(c,n,r)}return r}function Ow(i,n,r){i.flags|=16384,i={getSnapshot:n,value:r},n=Dt.updateQueue,n===null?(n=Dp(),Dt.updateQueue=n,n.stores=[i]):(r=n.stores,r===null?n.stores=[i]:r.push(i))}function Bw(i,n,r,c){n.value=r,n.getSnapshot=c,jw(n)&&Fw(i)}function zw(i,n,r){return r(function(){jw(n)&&Fw(i)})}function jw(i){var n=i.getSnapshot;i=i.value;try{var r=n();return!wn(i,r)}catch{return!0}}function Fw(i){var n=go(i,2);n!==null&&on(n,i,2)}function Wy(i){var n=Gi();if(typeof i=="function"){var r=i;if(i=r(),Eo){Fr(!0);try{r()}finally{Fr(!1)}}}return n.memoizedState=n.baseState=i,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:i},n}function Pw(i,n,r,c){return i.baseState=r,Xy(i,re,typeof c=="function"?c:zs)}function YM(i,n,r,c,f){if(Op(i))throw Error(a(485));if(i=n.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){p.listeners.push(S)}};B.T!==null?r(!0):p.isTransition=!1,c(p),r=n.pending,r===null?(p.next=n.pending=p,Hw(n,p)):(p.next=r.next,n.pending=r.next=p)}}function Hw(i,n){var r=n.action,c=n.payload,f=i.state;if(n.isTransition){var p=B.T,S={};B.T=S;try{var C=r(f,c),L=B.S;L!==null&&L(S,C),Uw(i,n,C)}catch(V){$y(i,n,V)}finally{p!==null&&S.types!==null&&(p.types=S.types),B.T=p}}else try{p=r(f,c),Uw(i,n,p)}catch(V){$y(i,n,V)}}function Uw(i,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Iw(i,n,c)},function(c){return $y(i,n,c)}):Iw(i,n,r)}function Iw(i,n,r){n.status="fulfilled",n.value=r,Gw(n),i.state=r,n=i.pending,n!==null&&(r=n.next,r===n?i.pending=null:(r=r.next,n.next=r,Hw(i,r)))}function $y(i,n,r){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=r,Gw(n),n=n.next;while(n!==c)}i.action=null}function Gw(i){i=i.listeners;for(var n=0;n<i.length;n++)(0,i[n])()}function qw(i,n){return n}function Vw(i,n){if(It){var r=me.formState;if(r!==null){t:{var c=Dt;if(It){if(xe){e:{for(var f=xe,p=sa;f.nodeType!==8;){if(!p){f=null;break e}if(f=la(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){xe=la(f.nextSibling),c=f.data==="F!";break t}}Gr(c)}c=!1}c&&(n=r[0])}}return r=Gi(),r.memoizedState=r.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qw,lastRenderedState:n},r.queue=c,r=u1.bind(null,Dt,c),c.dispatch=r,c=Wy(!1),p=iv.bind(null,Dt,!1,c.queue),c=Gi(),f={state:n,dispatch:null,action:i,pending:null},c.queue=f,r=YM.bind(null,Dt,f,p,r),f.dispatch=r,c.memoizedState=i,[n,r,!1]}function Yw(i){var n=Xe();return Xw(n,re,i)}function Xw(i,n,r){if(n=Xy(i,n,qw)[0],i=Np(zs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=sf(n)}catch(S){throw S===Au?Sp:S}else c=n;n=Xe();var f=n.queue,p=f.dispatch;return r!==n.memoizedState&&(Dt.flags|=2048,Tu(9,{destroy:void 0},XM.bind(null,f,r),null)),[c,p,i]}function XM(i,n){i.action=n}function Kw(i){var n=Xe(),r=re;if(r!==null)return Xw(n,r,i);Xe(),n=n.memoizedState,r=Xe();var c=r.queue.dispatch;return r.memoizedState=i,[n,c,!1]}function Tu(i,n,r,c){return i={tag:i,create:r,deps:c,inst:n,next:null},n=Dt.updateQueue,n===null&&(n=Dp(),Dt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=i.next=i:(c=r.next,r.next=i,i.next=c,n.lastEffect=i),i}function Ww(){return Xe().memoizedState}function kp(i,n,r,c){var f=Gi();Dt.flags|=i,f.memoizedState=Tu(1|n,{destroy:void 0},r,c===void 0?null:c)}function Lp(i,n,r,c){var f=Xe();c=c===void 0?null:c;var p=f.memoizedState.inst;re!==null&&c!==null&&Uy(c,re.memoizedState.deps)?f.memoizedState=Tu(n,p,r,c):(Dt.flags|=i,f.memoizedState=Tu(1|n,p,r,c))}function $w(i,n){kp(8390656,8,i,n)}function Qy(i,n){Lp(2048,8,i,n)}function KM(i){Dt.flags|=4;var n=Dt.updateQueue;if(n===null)n=Dp(),Dt.updateQueue=n,n.events=[i];else{var r=n.events;r===null?n.events=[i]:r.push(i)}}function Qw(i){var n=Xe().memoizedState;return KM({ref:n,nextImpl:i}),function(){if((Qt&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function Zw(i,n){return Lp(4,2,i,n)}function Jw(i,n){return Lp(4,4,i,n)}function t1(i,n){if(typeof n=="function"){i=i();var r=n(i);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return i=i(),n.current=i,function(){n.current=null}}function e1(i,n,r){r=r!=null?r.concat([i]):null,Lp(4,4,t1.bind(null,n,i),r)}function Zy(){}function i1(i,n){var r=Xe();n=n===void 0?null:n;var c=r.memoizedState;return n!==null&&Uy(n,c[1])?c[0]:(r.memoizedState=[i,n],i)}function n1(i,n){var r=Xe();n=n===void 0?null:n;var c=r.memoizedState;if(n!==null&&Uy(n,c[1]))return c[0];if(c=i(),Eo){Fr(!0);try{i()}finally{Fr(!1)}}return r.memoizedState=[c,n],c}function Jy(i,n,r){return r===void 0||(Bs&1073741824)!==0&&(Pt&261930)===0?i.memoizedState=n:(i.memoizedState=r,i=aE(),Dt.lanes|=i,Zr|=i,r)}function a1(i,n,r,c){return wn(r,n)?r:xu.current!==null?(i=Jy(i,r,c),wn(i,n)||(Je=!0),i):(Bs&42)===0||(Bs&1073741824)!==0&&(Pt&261930)===0?(Je=!0,i.memoizedState=r):(i=aE(),Dt.lanes|=i,Zr|=i,n)}function s1(i,n,r,c,f){var p=P.p;P.p=p!==0&&8>p?p:8;var S=B.T,C={};B.T=C,iv(i,!1,n,r);try{var L=f(),V=B.S;if(V!==null&&V(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=GM(L,c);rf(i,n,$,Dn(i))}else rf(i,n,c,Dn(i))}catch(Z){rf(i,n,{then:function(){},status:"rejected",reason:Z},Dn())}finally{P.p=p,S!==null&&C.types!==null&&(S.types=C.types),B.T=S}}function WM(){}function tv(i,n,r,c){if(i.tag!==5)throw Error(a(476));var f=r1(i).queue;s1(i,f,n,W,r===null?WM:function(){return l1(i),r(c)})}function r1(i){var n=i.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:W},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:r},next:null},i.memoizedState=n,i=i.alternate,i!==null&&(i.memoizedState=n),n}function l1(i){var n=r1(i);n.next===null&&(n=i.alternate.memoizedState),rf(i,n.next.queue,{},Dn())}function ev(){return xi(wf)}function o1(){return Xe().memoizedState}function c1(){return Xe().memoizedState}function $M(i){for(var n=i.return;n!==null;){switch(n.tag){case 24:case 3:var r=Dn();i=Yr(r);var c=Xr(n,i,r);c!==null&&(on(c,n,r),tf(c,n,r)),n={cache:Ry()},i.payload=n;return}n=n.return}}function QM(i,n,r){var c=Dn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Op(i)?h1(n,r):(r=vy(i,n,r,c),r!==null&&(on(r,i,c),d1(r,n,c)))}function u1(i,n,r){var c=Dn();rf(i,n,r,c)}function rf(i,n,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Op(i))h1(n,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var S=n.lastRenderedState,C=p(S,r);if(f.hasEagerState=!0,f.eagerState=C,wn(C,S))return mp(i,n,f,0),me===null&&fp(),!1}catch{}finally{}if(r=vy(i,n,f,c),r!==null)return on(r,i,c),d1(r,n,c),!0}return!1}function iv(i,n,r,c){if(c={lane:2,revertLane:Ov(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Op(i)){if(n)throw Error(a(479))}else n=vy(i,r,c,2),n!==null&&on(n,i,2)}function Op(i){var n=i.alternate;return i===Dt||n!==null&&n===Dt}function h1(i,n){wu=Cp=!0;var r=i.pending;r===null?n.next=n:(n.next=r.next,r.next=n),i.pending=n}function d1(i,n,r){if((r&4194048)!==0){var c=n.lanes;c&=i.pendingLanes,r|=c,n.lanes=r,bx(i,r)}}var lf={readContext:xi,use:Rp,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je,useHostTransitionStatus:je,useFormState:je,useActionState:je,useOptimistic:je,useMemoCache:je,useCacheRefresh:je};lf.useEffectEvent=je;var f1={readContext:xi,use:Rp,useCallback:function(i,n){return Gi().memoizedState=[i,n===void 0?null:n],i},useContext:xi,useEffect:$w,useImperativeHandle:function(i,n,r){r=r!=null?r.concat([i]):null,kp(4194308,4,t1.bind(null,n,i),r)},useLayoutEffect:function(i,n){return kp(4194308,4,i,n)},useInsertionEffect:function(i,n){kp(4,2,i,n)},useMemo:function(i,n){var r=Gi();n=n===void 0?null:n;var c=i();if(Eo){Fr(!0);try{i()}finally{Fr(!1)}}return r.memoizedState=[c,n],c},useReducer:function(i,n,r){var c=Gi();if(r!==void 0){var f=r(n);if(Eo){Fr(!0);try{r(n)}finally{Fr(!1)}}}else f=n;return c.memoizedState=c.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},c.queue=i,i=i.dispatch=QM.bind(null,Dt,i),[c.memoizedState,i]},useRef:function(i){var n=Gi();return i={current:i},n.memoizedState=i},useState:function(i){i=Wy(i);var n=i.queue,r=u1.bind(null,Dt,n);return n.dispatch=r,[i.memoizedState,r]},useDebugValue:Zy,useDeferredValue:function(i,n){var r=Gi();return Jy(r,i,n)},useTransition:function(){var i=Wy(!1);return i=s1.bind(null,Dt,i.queue,!0,!1),Gi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,n,r){var c=Dt,f=Gi();if(It){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),me===null)throw Error(a(349));(Pt&127)!==0||Ow(c,n,r)}f.memoizedState=r;var p={value:r,getSnapshot:n};return f.queue=p,$w(zw.bind(null,c,p,i),[i]),c.flags|=2048,Tu(9,{destroy:void 0},Bw.bind(null,c,p,r,n),null),r},useId:function(){var i=Gi(),n=me.identifierPrefix;if(It){var r=Wa,c=Ka;r=(c&~(1<<32-xn(c)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Mp++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=qM++,n="_"+n+"r_"+r.toString(32)+"_";return i.memoizedState=n},useHostTransitionStatus:ev,useFormState:Vw,useActionState:Vw,useOptimistic:function(i){var n=Gi();n.memoizedState=n.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=iv.bind(null,Dt,!0,r),r.dispatch=n,[i,n]},useMemoCache:Yy,useCacheRefresh:function(){return Gi().memoizedState=$M.bind(null,Dt)},useEffectEvent:function(i){var n=Gi(),r={impl:i};return n.memoizedState=r,function(){if((Qt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},nv={readContext:xi,use:Rp,useCallback:i1,useContext:xi,useEffect:Qy,useImperativeHandle:e1,useInsertionEffect:Zw,useLayoutEffect:Jw,useMemo:n1,useReducer:Np,useRef:Ww,useState:function(){return Np(zs)},useDebugValue:Zy,useDeferredValue:function(i,n){var r=Xe();return a1(r,re.memoizedState,i,n)},useTransition:function(){var i=Np(zs)[0],n=Xe().memoizedState;return[typeof i=="boolean"?i:sf(i),n]},useSyncExternalStore:Lw,useId:o1,useHostTransitionStatus:ev,useFormState:Yw,useActionState:Yw,useOptimistic:function(i,n){var r=Xe();return Pw(r,re,i,n)},useMemoCache:Yy,useCacheRefresh:c1};nv.useEffectEvent=Qw;var m1={readContext:xi,use:Rp,useCallback:i1,useContext:xi,useEffect:Qy,useImperativeHandle:e1,useInsertionEffect:Zw,useLayoutEffect:Jw,useMemo:n1,useReducer:Ky,useRef:Ww,useState:function(){return Ky(zs)},useDebugValue:Zy,useDeferredValue:function(i,n){var r=Xe();return re===null?Jy(r,i,n):a1(r,re.memoizedState,i,n)},useTransition:function(){var i=Ky(zs)[0],n=Xe().memoizedState;return[typeof i=="boolean"?i:sf(i),n]},useSyncExternalStore:Lw,useId:o1,useHostTransitionStatus:ev,useFormState:Kw,useActionState:Kw,useOptimistic:function(i,n){var r=Xe();return re!==null?Pw(r,re,i,n):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:Yy,useCacheRefresh:c1};m1.useEffectEvent=Qw;function av(i,n,r,c){n=i.memoizedState,r=r(c,n),r=r==null?n:y({},n,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var sv={enqueueSetState:function(i,n,r){i=i._reactInternals;var c=Dn(),f=Yr(c);f.payload=n,r!=null&&(f.callback=r),n=Xr(i,f,c),n!==null&&(on(n,i,c),tf(n,i,c))},enqueueReplaceState:function(i,n,r){i=i._reactInternals;var c=Dn(),f=Yr(c);f.tag=1,f.payload=n,r!=null&&(f.callback=r),n=Xr(i,f,c),n!==null&&(on(n,i,c),tf(n,i,c))},enqueueForceUpdate:function(i,n){i=i._reactInternals;var r=Dn(),c=Yr(r);c.tag=2,n!=null&&(c.callback=n),n=Xr(i,c,r),n!==null&&(on(n,i,r),tf(n,i,r))}};function g1(i,n,r,c,f,p,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,p,S):n.prototype&&n.prototype.isPureReactComponent?!Yd(r,c)||!Yd(f,p):!0}function p1(i,n,r,c){i=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,c),n.state!==i&&sv.enqueueReplaceState(n,n.state,null)}function To(i,n){var r=n;if("ref"in n){r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}if(i=i.defaultProps){r===n&&(r=y({},r));for(var f in i)r[f]===void 0&&(r[f]=i[f])}return r}function b1(i){dp(i)}function y1(i){console.error(i)}function v1(i){dp(i)}function Bp(i,n){try{var r=i.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function A1(i,n,r){try{var c=i.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rv(i,n,r){return r=Yr(r),r.tag=3,r.payload={element:null},r.callback=function(){Bp(i,n)},r}function S1(i){return i=Yr(i),i.tag=3,i}function x1(i,n,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;i.payload=function(){return f(p)},i.callback=function(){A1(n,r,c)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){A1(n,r,c),typeof f!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function ZM(i,n,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=r.alternate,n!==null&&bu(n,r,f,!0),r=Tn.current,r!==null){switch(r.tag){case 31:case 13:return ra===null?Xp():r.alternate===null&&Fe===0&&(Fe=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===xp?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([c]):n.add(c),Nv(i,c,f)),!1;case 22:return r.flags|=65536,c===xp?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([c]):r.add(c)),Nv(i,c,f)),!1}throw Error(a(435,r.tag))}return Nv(i,c,f),Xp(),!1}if(It)return n=Tn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,c!==Ty&&(i=Error(a(422),{cause:c}),Wd(ia(i,r)))):(c!==Ty&&(n=Error(a(423),{cause:c}),Wd(ia(n,r))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,c=ia(c,r),f=rv(i.stateNode,c,f),zy(i,f),Fe!==4&&(Fe=2)),!1;var p=Error(a(520),{cause:c});if(p=ia(p,r),gf===null?gf=[p]:gf.push(p),Fe!==4&&(Fe=2),n===null)return!0;c=ia(c,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,i=f&-f,r.lanes|=i,i=rv(r.stateNode,c,i),zy(r,i),!1;case 1:if(n=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Jr===null||!Jr.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=S1(f),x1(f,i,r,c),zy(r,f),!1}r=r.return}while(r!==null);return!1}var lv=Error(a(461)),Je=!1;function wi(i,n,r,c){n.child=i===null?_w(n,null,r,c):wo(n,i.child,r,c)}function w1(i,n,r,c,f){r=r.render;var p=n.ref;if("ref"in c){var S={};for(var C in c)C!=="ref"&&(S[C]=c[C])}else S=c;return vo(n),c=Iy(i,n,r,S,p,f),C=Gy(),i!==null&&!Je?(qy(i,n,f),js(i,n,f)):(It&&C&&wy(n),n.flags|=1,wi(i,n,c,f),n.child)}function E1(i,n,r,c,f){if(i===null){var p=r.type;return typeof p=="function"&&!Ay(p)&&p.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=p,T1(i,n,p,c,f)):(i=pp(r.type,null,c,n,n.mode,f),i.ref=n.ref,i.return=n,n.child=i)}if(p=i.child,!gv(i,f)){var S=p.memoizedProps;if(r=r.compare,r=r!==null?r:Yd,r(S,c)&&i.ref===n.ref)return js(i,n,f)}return n.flags|=1,i=Ns(p,c),i.ref=n.ref,i.return=n,n.child=i}function T1(i,n,r,c,f){if(i!==null){var p=i.memoizedProps;if(Yd(p,c)&&i.ref===n.ref)if(Je=!1,n.pendingProps=c=p,gv(i,f))(i.flags&131072)!==0&&(Je=!0);else return n.lanes=i.lanes,js(i,n,f)}return ov(i,n,r,c,f)}function _1(i,n,r,c){var f=c.children,p=i!==null?i.memoizedState:null;if(i===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,i!==null){for(c=n.child=i.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,n.child=null;return C1(i,n,p,r,c)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ap(n,p!==null?p.cachePool:null),p!==null?Dw(n,p):Fy(),Rw(n);else return c=n.lanes=536870912,C1(i,n,p!==null?p.baseLanes|r:r,r,c)}else p!==null?(Ap(n,p.cachePool),Dw(n,p),Wr(),n.memoizedState=null):(i!==null&&Ap(n,null),Fy(),Wr());return wi(i,n,f,r),n.child}function of(i,n){return i!==null&&i.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function C1(i,n,r,c,f){var p=ky();return p=p===null?null:{parent:Qe._currentValue,pool:p},n.memoizedState={baseLanes:r,cachePool:p},i!==null&&Ap(n,null),Fy(),Rw(n),i!==null&&bu(i,n,c,!0),n.childLanes=f,null}function zp(i,n){return n=Fp({mode:n.mode,children:n.children},i.mode),n.ref=i.ref,i.child=n,n.return=i,n}function M1(i,n,r){return wo(n,i.child,null,r),i=zp(n,n.pendingProps),i.flags|=2,_n(n),n.memoizedState=null,i}function JM(i,n,r){var c=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,i===null){if(It){if(c.mode==="hidden")return i=zp(n,c),n.lanes=536870912,of(null,i);if(Hy(n),(i=xe)?(i=HE(i,sa),i=i!==null&&i.data==="&"?i:null,i!==null&&(n.memoizedState={dehydrated:i,treeContext:Ur!==null?{id:Ka,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},r=hw(i),r.return=n,n.child=r,Si=n,xe=null)):i=null,i===null)throw Gr(n);return n.lanes=536870912,null}return zp(n,c)}var p=i.memoizedState;if(p!==null){var S=p.dehydrated;if(Hy(n),f)if(n.flags&256)n.flags&=-257,n=M1(i,n,r);else if(n.memoizedState!==null)n.child=i.child,n.flags|=128,n=null;else throw Error(a(558));else if(Je||bu(i,n,r,!1),f=(r&i.childLanes)!==0,Je||f){if(c=me,c!==null&&(S=yx(c,r),S!==0&&S!==p.retryLane))throw p.retryLane=S,go(i,S),on(c,i,S),lv;Xp(),n=M1(i,n,r)}else i=p.treeContext,xe=la(S.nextSibling),Si=n,It=!0,Ir=null,sa=!1,i!==null&&mw(n,i),n=zp(n,c),n.flags|=4096;return n}return i=Ns(i.child,{mode:c.mode,children:c.children}),i.ref=n.ref,n.child=i,i.return=n,i}function jp(i,n){var r=n.ref;if(r===null)i!==null&&i.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(i===null||i.ref!==r)&&(n.flags|=4194816)}}function ov(i,n,r,c,f){return vo(n),r=Iy(i,n,r,c,void 0,f),c=Gy(),i!==null&&!Je?(qy(i,n,f),js(i,n,f)):(It&&c&&wy(n),n.flags|=1,wi(i,n,r,f),n.child)}function D1(i,n,r,c,f,p){return vo(n),n.updateQueue=null,r=kw(n,c,r,f),Nw(i),c=Gy(),i!==null&&!Je?(qy(i,n,p),js(i,n,p)):(It&&c&&wy(n),n.flags|=1,wi(i,n,r,p),n.child)}function R1(i,n,r,c,f){if(vo(n),n.stateNode===null){var p=fu,S=r.contextType;typeof S=="object"&&S!==null&&(p=xi(S)),p=new r(c,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=sv,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=c,p.state=n.memoizedState,p.refs={},Oy(n),S=r.contextType,p.context=typeof S=="object"&&S!==null?xi(S):fu,p.state=n.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(av(n,r,S,c),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(S=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),S!==p.state&&sv.enqueueReplaceState(p,p.state,null),nf(n,c,p,f),ef(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(i===null){p=n.stateNode;var C=n.memoizedProps,L=To(r,C);p.props=L;var V=p.context,$=r.contextType;S=fu,typeof $=="object"&&$!==null&&(S=xi($));var Z=r.getDerivedStateFromProps;$=typeof Z=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||V!==S)&&p1(n,p,c,S),Vr=!1;var Y=n.memoizedState;p.state=Y,nf(n,c,p,f),ef(),V=n.memoizedState,C||Y!==V||Vr?(typeof Z=="function"&&(av(n,r,Z,c),V=n.memoizedState),(L=Vr||g1(n,r,L,c,Y,V,S))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=V),p.props=c,p.state=V,p.context=S,c=L):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{p=n.stateNode,By(i,n),S=n.memoizedProps,$=To(r,S),p.props=$,Z=n.pendingProps,Y=p.context,V=r.contextType,L=fu,typeof V=="object"&&V!==null&&(L=xi(V)),C=r.getDerivedStateFromProps,(V=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S!==Z||Y!==L)&&p1(n,p,c,L),Vr=!1,Y=n.memoizedState,p.state=Y,nf(n,c,p,f),ef();var K=n.memoizedState;S!==Z||Y!==K||Vr||i!==null&&i.dependencies!==null&&yp(i.dependencies)?(typeof C=="function"&&(av(n,r,C,c),K=n.memoizedState),($=Vr||g1(n,r,$,c,Y,K,L)||i!==null&&i.dependencies!==null&&yp(i.dependencies))?(V||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,K,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,K,L)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=K),p.props=c,p.state=K,p.context=L,c=$):(typeof p.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(n.flags|=1024),c=!1)}return p=c,jp(i,n),c=(n.flags&128)!==0,p||c?(p=n.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,i!==null&&c?(n.child=wo(n,i.child,null,f),n.child=wo(n,null,r,f)):wi(i,n,r,f),n.memoizedState=p.state,i=n.child):i=js(i,n,f),i}function N1(i,n,r,c){return bo(),n.flags|=256,wi(i,n,r,c),n.child}var cv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(i){return{baseLanes:i,cachePool:Aw()}}function hv(i,n,r){return i=i!==null?i.childLanes&~r:0,n&&(i|=Mn),i}function k1(i,n,r){var c=n.pendingProps,f=!1,p=(n.flags&128)!==0,S;if((S=p)||(S=i!==null&&i.memoizedState===null?!1:(Ye.current&2)!==0),S&&(f=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,i===null){if(It){if(f?Kr(n):Wr(),(i=xe)?(i=HE(i,sa),i=i!==null&&i.data!=="&"?i:null,i!==null&&(n.memoizedState={dehydrated:i,treeContext:Ur!==null?{id:Ka,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},r=hw(i),r.return=n,n.child=r,Si=n,xe=null)):i=null,i===null)throw Gr(n);return Xv(i)?n.lanes=32:n.lanes=536870912,null}var C=c.children;return c=c.fallback,f?(Wr(),f=n.mode,C=Fp({mode:"hidden",children:C},f),c=po(c,f,r,null),C.return=n,c.return=n,C.sibling=c,n.child=C,c=n.child,c.memoizedState=uv(r),c.childLanes=hv(i,S,r),n.memoizedState=cv,of(null,c)):(Kr(n),dv(n,C))}var L=i.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(p)n.flags&256?(Kr(n),n.flags&=-257,n=fv(i,n,r)):n.memoizedState!==null?(Wr(),n.child=i.child,n.flags|=128,n=null):(Wr(),C=c.fallback,f=n.mode,c=Fp({mode:"visible",children:c.children},f),C=po(C,f,r,null),C.flags|=2,c.return=n,C.return=n,c.sibling=C,n.child=c,wo(n,i.child,null,r),c=n.child,c.memoizedState=uv(r),c.childLanes=hv(i,S,r),n.memoizedState=cv,n=of(null,c));else if(Kr(n),Xv(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var V=S.dgst;S=V,c=Error(a(419)),c.stack="",c.digest=S,Wd({value:c,source:null,stack:null}),n=fv(i,n,r)}else if(Je||bu(i,n,r,!1),S=(r&i.childLanes)!==0,Je||S){if(S=me,S!==null&&(c=yx(S,r),c!==0&&c!==L.retryLane))throw L.retryLane=c,go(i,c),on(S,i,c),lv;Yv(C)||Xp(),n=fv(i,n,r)}else Yv(C)?(n.flags|=192,n.child=i.child,n=null):(i=L.treeContext,xe=la(C.nextSibling),Si=n,It=!0,Ir=null,sa=!1,i!==null&&mw(n,i),n=dv(n,c.children),n.flags|=4096);return n}return f?(Wr(),C=c.fallback,f=n.mode,L=i.child,V=L.sibling,c=Ns(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,V!==null?C=Ns(V,C):(C=po(C,f,r,null),C.flags|=2),C.return=n,c.return=n,c.sibling=C,n.child=c,of(null,c),c=n.child,C=i.child.memoizedState,C===null?C=uv(r):(f=C.cachePool,f!==null?(L=Qe._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Aw(),C={baseLanes:C.baseLanes|r,cachePool:f}),c.memoizedState=C,c.childLanes=hv(i,S,r),n.memoizedState=cv,of(i.child,c)):(Kr(n),r=i.child,i=r.sibling,r=Ns(r,{mode:"visible",children:c.children}),r.return=n,r.sibling=null,i!==null&&(S=n.deletions,S===null?(n.deletions=[i],n.flags|=16):S.push(i)),n.child=r,n.memoizedState=null,r)}function dv(i,n){return n=Fp({mode:"visible",children:n},i.mode),n.return=i,i.child=n}function Fp(i,n){return i=En(22,i,null,n),i.lanes=0,i}function fv(i,n,r){return wo(n,i.child,null,r),i=dv(n,n.pendingProps.children),i.flags|=2,n.memoizedState=null,i}function L1(i,n,r){i.lanes|=n;var c=i.alternate;c!==null&&(c.lanes|=n),My(i.return,n,r)}function mv(i,n,r,c,f,p){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:p}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=r,S.tailMode=f,S.treeForkCount=p)}function O1(i,n,r){var c=n.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var S=Ye.current,C=(S&2)!==0;if(C?(S=S&1|2,n.flags|=128):S&=1,lt(Ye,S),wi(i,n,c,r),c=It?Kd:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=n.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&L1(i,r,n);else if(i.tag===19)L1(i,r,n);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(r=n.child,f=null;r!==null;)i=r.alternate,i!==null&&_p(i)===null&&(f=r),r=r.sibling;r=f,r===null?(f=n.child,n.child=null):(f=r.sibling,r.sibling=null),mv(n,!1,f,r,p,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=n.child,n.child=null;f!==null;){if(i=f.alternate,i!==null&&_p(i)===null){n.child=f;break}i=f.sibling,f.sibling=r,r=f,f=i}mv(n,!0,r,null,p,c);break;case"together":mv(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function js(i,n,r){if(i!==null&&(n.dependencies=i.dependencies),Zr|=n.lanes,(r&n.childLanes)===0)if(i!==null){if(bu(i,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(i!==null&&n.child!==i.child)throw Error(a(153));if(n.child!==null){for(i=n.child,r=Ns(i,i.pendingProps),n.child=r,r.return=n;i.sibling!==null;)i=i.sibling,r=r.sibling=Ns(i,i.pendingProps),r.return=n;r.sibling=null}return n.child}function gv(i,n){return(i.lanes&n)!==0?!0:(i=i.dependencies,!!(i!==null&&yp(i)))}function tD(i,n,r){switch(n.tag){case 3:Be(n,n.stateNode.containerInfo),qr(n,Qe,i.memoizedState.cache),bo();break;case 27:case 5:Zi(n);break;case 4:Be(n,n.stateNode.containerInfo);break;case 10:qr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Hy(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Kr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?k1(i,n,r):(Kr(n),i=js(i,n,r),i!==null?i.sibling:null);Kr(n);break;case 19:var f=(i.flags&128)!==0;if(c=(r&n.childLanes)!==0,c||(bu(i,n,r,!1),c=(r&n.childLanes)!==0),f){if(c)return O1(i,n,r);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),lt(Ye,Ye.current),c)break;return null;case 22:return n.lanes=0,_1(i,n,r,n.pendingProps);case 24:qr(n,Qe,i.memoizedState.cache)}return js(i,n,r)}function B1(i,n,r){if(i!==null)if(i.memoizedProps!==n.pendingProps)Je=!0;else{if(!gv(i,r)&&(n.flags&128)===0)return Je=!1,tD(i,n,r);Je=(i.flags&131072)!==0}else Je=!1,It&&(n.flags&1048576)!==0&&fw(n,Kd,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(i=So(n.elementType),n.type=i,typeof i=="function")Ay(i)?(c=To(i,c),n.tag=1,n=R1(null,n,i,c,r)):(n.tag=0,n=ov(null,n,i,c,r));else{if(i!=null){var f=i.$$typeof;if(f===O){n.tag=11,n=w1(null,n,i,c,r);break t}else if(f===H){n.tag=14,n=E1(null,n,i,c,r);break t}}throw n=st(i)||i,Error(a(306,n,""))}}return n;case 0:return ov(i,n,n.type,n.pendingProps,r);case 1:return c=n.type,f=To(c,n.pendingProps),R1(i,n,c,f,r);case 3:t:{if(Be(n,n.stateNode.containerInfo),i===null)throw Error(a(387));c=n.pendingProps;var p=n.memoizedState;f=p.element,By(i,n),nf(n,c,null,r);var S=n.memoizedState;if(c=S.cache,qr(n,Qe,c),c!==p.cache&&Dy(n,[Qe],r,!0),ef(),c=S.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=N1(i,n,c,r);break t}else if(c!==f){f=ia(Error(a(424)),n),Wd(f),n=N1(i,n,c,r);break t}else{switch(i=n.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xe=la(i.firstChild),Si=n,It=!0,Ir=null,sa=!0,r=_w(n,null,c,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(bo(),c===f){n=js(i,n,r);break t}wi(i,n,c,r)}n=n.child}return n;case 26:return jp(i,n),i===null?(r=YE(n.type,null,n.pendingProps,null))?n.memoizedState=r:It||(r=n.type,i=n.pendingProps,c=tb(qt.current).createElement(r),c[Ai]=n,c[en]=i,Ei(c,r,i),ui(c),n.stateNode=c):n.memoizedState=YE(n.type,i.memoizedProps,n.pendingProps,i.memoizedState),null;case 27:return Zi(n),i===null&&It&&(c=n.stateNode=GE(n.type,n.pendingProps,qt.current),Si=n,sa=!0,f=xe,nl(n.type)?(Kv=f,xe=la(c.firstChild)):xe=f),wi(i,n,n.pendingProps.children,r),jp(i,n),i===null&&(n.flags|=4194304),n.child;case 5:return i===null&&It&&((f=c=xe)&&(c=RD(c,n.type,n.pendingProps,sa),c!==null?(n.stateNode=c,Si=n,xe=la(c.firstChild),sa=!1,f=!0):f=!1),f||Gr(n)),Zi(n),f=n.type,p=n.pendingProps,S=i!==null?i.memoizedProps:null,c=p.children,Gv(f,p)?c=null:S!==null&&Gv(f,S)&&(n.flags|=32),n.memoizedState!==null&&(f=Iy(i,n,VM,null,null,r),wf._currentValue=f),jp(i,n),wi(i,n,c,r),n.child;case 6:return i===null&&It&&((i=r=xe)&&(r=ND(r,n.pendingProps,sa),r!==null?(n.stateNode=r,Si=n,xe=null,i=!0):i=!1),i||Gr(n)),null;case 13:return k1(i,n,r);case 4:return Be(n,n.stateNode.containerInfo),c=n.pendingProps,i===null?n.child=wo(n,null,c,r):wi(i,n,c,r),n.child;case 11:return w1(i,n,n.type,n.pendingProps,r);case 7:return wi(i,n,n.pendingProps,r),n.child;case 8:return wi(i,n,n.pendingProps.children,r),n.child;case 12:return wi(i,n,n.pendingProps.children,r),n.child;case 10:return c=n.pendingProps,qr(n,n.type,c.value),wi(i,n,c.children,r),n.child;case 9:return f=n.type._context,c=n.pendingProps.children,vo(n),f=xi(f),c=c(f),n.flags|=1,wi(i,n,c,r),n.child;case 14:return E1(i,n,n.type,n.pendingProps,r);case 15:return T1(i,n,n.type,n.pendingProps,r);case 19:return O1(i,n,r);case 31:return JM(i,n,r);case 22:return _1(i,n,r,n.pendingProps);case 24:return vo(n),c=xi(Qe),i===null?(f=ky(),f===null&&(f=me,p=Ry(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),n.memoizedState={parent:c,cache:f},Oy(n),qr(n,Qe,f)):((i.lanes&r)!==0&&(By(i,n),nf(n,null,null,r),ef()),f=i.memoizedState,p=n.memoizedState,f.parent!==c?(f={parent:c,cache:c},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),qr(n,Qe,c)):(c=p.cache,qr(n,Qe,c),c!==f.cache&&Dy(n,[Qe],r,!0))),wi(i,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Fs(i){i.flags|=4}function pv(i,n,r,c,f){if((n=(i.mode&32)!==0)&&(n=!1),n){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(oE())i.flags|=8192;else throw xo=xp,Ly}else i.flags&=-16777217}function z1(i,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!QE(n))if(oE())i.flags|=8192;else throw xo=xp,Ly}function Pp(i,n){n!==null&&(i.flags|=4),i.flags&16384&&(n=i.tag!==22?gx():536870912,i.lanes|=n,Du|=n)}function cf(i,n){if(!It)switch(i.tailMode){case"hidden":n=i.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function we(i){var n=i.alternate!==null&&i.alternate.child===i.child,r=0,c=0;if(n)for(var f=i.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=r,n}function eD(i,n,r){var c=n.pendingProps;switch(Ey(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(n),null;case 1:return we(n),null;case 3:return r=n.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Os(Qe),qe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(pu(n)?Fs(n):i===null||i.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,_y())),we(n),null;case 26:var f=n.type,p=n.memoizedState;return i===null?(Fs(n),p!==null?(we(n),z1(n,p)):(we(n),pv(n,f,null,c,r))):p?p!==i.memoizedState?(Fs(n),we(n),z1(n,p)):(we(n),n.flags&=-16777217):(i=i.memoizedProps,i!==c&&Fs(n),we(n),pv(n,f,i,c,r)),null;case 27:if(Re(n),r=qt.current,f=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==c&&Fs(n);else{if(!c){if(n.stateNode===null)throw Error(a(166));return we(n),null}i=xt.current,pu(n)?gw(n):(i=GE(f,c,r),n.stateNode=i,Fs(n))}return we(n),null;case 5:if(Re(n),f=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==c&&Fs(n);else{if(!c){if(n.stateNode===null)throw Error(a(166));return we(n),null}if(p=xt.current,pu(n))gw(n);else{var S=tb(qt.current);switch(p){case 1:p=S.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=S.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=S.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?S.createElement(f,{is:c.is}):S.createElement(f)}}p[Ai]=n,p[en]=c;t:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)p.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break t;for(;S.sibling===null;){if(S.return===null||S.return===n)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=p;t:switch(Ei(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Fs(n)}}return we(n),pv(n,n.type,i===null?null:i.memoizedProps,n.pendingProps,r),null;case 6:if(i&&n.stateNode!=null)i.memoizedProps!==c&&Fs(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(a(166));if(i=qt.current,pu(n)){if(i=n.stateNode,r=n.memoizedProps,c=null,f=Si,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}i[Ai]=n,i=!!(i.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||kE(i.nodeValue,r)),i||Gr(n,!0)}else i=tb(i).createTextNode(c),i[Ai]=n,n.stateNode=i}return we(n),null;case 31:if(r=n.memoizedState,i===null||i.memoizedState!==null){if(c=pu(n),r!==null){if(i===null){if(!c)throw Error(a(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(557));i[Ai]=n}else bo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;we(n),i=!1}else r=_y(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return n.flags&256?(_n(n),n):(_n(n),null);if((n.flags&128)!==0)throw Error(a(558))}return we(n),null;case 13:if(c=n.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=pu(n),c!==null&&c.dehydrated!==null){if(i===null){if(!f)throw Error(a(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ai]=n}else bo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;we(n),f=!1}else f=_y(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(_n(n),n):(_n(n),null)}return _n(n),(n.flags&128)!==0?(n.lanes=r,n):(r=c!==null,i=i!==null&&i.memoizedState!==null,r&&(c=n.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),r!==i&&r&&(n.child.flags|=8192),Pp(n,n.updateQueue),we(n),null);case 4:return qe(),i===null&&Fv(n.stateNode.containerInfo),we(n),null;case 10:return Os(n.type),we(n),null;case 19:if(ot(Ye),c=n.memoizedState,c===null)return we(n),null;if(f=(n.flags&128)!==0,p=c.rendering,p===null)if(f)cf(c,!1);else{if(Fe!==0||i!==null&&(i.flags&128)!==0)for(i=n.child;i!==null;){if(p=_p(i),p!==null){for(n.flags|=128,cf(c,!1),i=p.updateQueue,n.updateQueue=i,Pp(n,i),n.subtreeFlags=0,i=r,r=n.child;r!==null;)uw(r,i),r=r.sibling;return lt(Ye,Ye.current&1|2),It&&ks(n,c.treeForkCount),n.child}i=i.sibling}c.tail!==null&&Ve()>qp&&(n.flags|=128,f=!0,cf(c,!1),n.lanes=4194304)}else{if(!f)if(i=_p(p),i!==null){if(n.flags|=128,f=!0,i=i.updateQueue,n.updateQueue=i,Pp(n,i),cf(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!It)return we(n),null}else 2*Ve()-c.renderingStartTime>qp&&r!==536870912&&(n.flags|=128,f=!0,cf(c,!1),n.lanes=4194304);c.isBackwards?(p.sibling=n.child,n.child=p):(i=c.last,i!==null?i.sibling=p:n.child=p,c.last=p)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Ve(),i.sibling=null,r=Ye.current,lt(Ye,f?r&1|2:r&1),It&&ks(n,c.treeForkCount),i):(we(n),null);case 22:case 23:return _n(n),Py(),c=n.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(r&536870912)!==0&&(n.flags&128)===0&&(we(n),n.subtreeFlags&6&&(n.flags|=8192)):we(n),r=n.updateQueue,r!==null&&Pp(n,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048),i!==null&&ot(Ao),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Os(Qe),we(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function iD(i,n){switch(Ey(n),n.tag){case 1:return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 3:return Os(Qe),qe(),i=n.flags,(i&65536)!==0&&(i&128)===0?(n.flags=i&-65537|128,n):null;case 26:case 27:case 5:return Re(n),null;case 31:if(n.memoizedState!==null){if(_n(n),n.alternate===null)throw Error(a(340));bo()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 13:if(_n(n),i=n.memoizedState,i!==null&&i.dehydrated!==null){if(n.alternate===null)throw Error(a(340));bo()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 19:return ot(Ye),null;case 4:return qe(),null;case 10:return Os(n.type),null;case 22:case 23:return _n(n),Py(),i!==null&&ot(Ao),i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 24:return Os(Qe),null;case 25:return null;default:return null}}function j1(i,n){switch(Ey(n),n.tag){case 3:Os(Qe),qe();break;case 26:case 27:case 5:Re(n);break;case 4:qe();break;case 31:n.memoizedState!==null&&_n(n);break;case 13:_n(n);break;case 19:ot(Ye);break;case 10:Os(n.type);break;case 22:case 23:_n(n),Py(),i!==null&&ot(Ao);break;case 24:Os(Qe)}}function uf(i,n){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&i)===i){c=void 0;var p=r.create,S=r.inst;c=p(),S.destroy=c}r=r.next}while(r!==f)}}catch(C){ne(n,n.return,C)}}function $r(i,n,r){try{var c=n.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&i)===i){var S=c.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,f=n;var L=r,V=C;try{V()}catch($){ne(f,L,$)}}}c=c.next}while(c!==p)}}catch($){ne(n,n.return,$)}}function F1(i){var n=i.updateQueue;if(n!==null){var r=i.stateNode;try{Mw(n,r)}catch(c){ne(i,i.return,c)}}}function P1(i,n,r){r.props=To(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(c){ne(i,n,c)}}function hf(i,n){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof r=="function"?i.refCleanup=r(c):r.current=c}}catch(f){ne(i,n,f)}}function $a(i,n){var r=i.ref,c=i.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){ne(i,n,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){ne(i,n,f)}else r.current=null}function H1(i){var n=i.type,r=i.memoizedProps,c=i.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){ne(i,i.return,f)}}function bv(i,n,r){try{var c=i.stateNode;ED(c,i.type,r,n),c[en]=n}catch(f){ne(i,i.return,f)}}function U1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&nl(i.type)||i.tag===4}function yv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||U1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&nl(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vv(i,n,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(i),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ds));else if(c!==4&&(c===27&&nl(i.type)&&(r=i.stateNode,n=null),i=i.child,i!==null))for(vv(i,n,r),i=i.sibling;i!==null;)vv(i,n,r),i=i.sibling}function Hp(i,n,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,n?r.insertBefore(i,n):r.appendChild(i);else if(c!==4&&(c===27&&nl(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Hp(i,n,r),i=i.sibling;i!==null;)Hp(i,n,r),i=i.sibling}function I1(i){var n=i.stateNode,r=i.memoizedProps;try{for(var c=i.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Ei(n,c,r),n[Ai]=i,n[en]=r}catch(p){ne(i,i.return,p)}}var Ps=!1,ti=!1,Av=!1,G1=typeof WeakSet=="function"?WeakSet:Set,hi=null;function nD(i,n){if(i=i.containerInfo,Uv=lb,i=ew(i),fy(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break t}var S=0,C=-1,L=-1,V=0,$=0,Z=i,Y=null;e:for(;;){for(var K;Z!==r||f!==0&&Z.nodeType!==3||(C=S+f),Z!==p||c!==0&&Z.nodeType!==3||(L=S+c),Z.nodeType===3&&(S+=Z.nodeValue.length),(K=Z.firstChild)!==null;)Y=Z,Z=K;for(;;){if(Z===i)break e;if(Y===r&&++V===f&&(C=S),Y===p&&++$===c&&(L=S),(K=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=K}r=C===-1||L===-1?null:{start:C,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(Iv={focusedElem:i,selectionRange:r},lb=!1,hi=n;hi!==null;)if(n=hi,i=n.child,(n.subtreeFlags&1028)!==0&&i!==null)i.return=n,hi=i;else for(;hi!==null;){switch(n=hi,p=n.alternate,i=n.flags,n.tag){case 0:if((i&4)!==0&&(i=n.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)f=i[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,r=n,f=p.memoizedProps,p=p.memoizedState,c=r.stateNode;try{var ft=To(r.type,f);i=c.getSnapshotBeforeUpdate(ft,p),c.__reactInternalSnapshotBeforeUpdate=i}catch(wt){ne(r,r.return,wt)}}break;case 3:if((i&1024)!==0){if(i=n.stateNode.containerInfo,r=i.nodeType,r===9)Vv(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Vv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(a(163))}if(i=n.sibling,i!==null){i.return=n.return,hi=i;break}hi=n.return}}function q1(i,n,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Us(i,r),c&4&&uf(5,r);break;case 1:if(Us(i,r),c&4)if(i=r.stateNode,n===null)try{i.componentDidMount()}catch(S){ne(r,r.return,S)}else{var f=To(r.type,n.memoizedProps);n=n.memoizedState;try{i.componentDidUpdate(f,n,i.__reactInternalSnapshotBeforeUpdate)}catch(S){ne(r,r.return,S)}}c&64&&F1(r),c&512&&hf(r,r.return);break;case 3:if(Us(i,r),c&64&&(i=r.updateQueue,i!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Mw(i,n)}catch(S){ne(r,r.return,S)}}break;case 27:n===null&&c&4&&I1(r);case 26:case 5:Us(i,r),n===null&&c&4&&H1(r),c&512&&hf(r,r.return);break;case 12:Us(i,r);break;case 31:Us(i,r),c&4&&X1(i,r);break;case 13:Us(i,r),c&4&&K1(i,r),c&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=dD.bind(null,r),kD(i,r))));break;case 22:if(c=r.memoizedState!==null||Ps,!c){n=n!==null&&n.memoizedState!==null||ti,f=Ps;var p=ti;Ps=c,(ti=n)&&!p?Is(i,r,(r.subtreeFlags&8772)!==0):Us(i,r),Ps=f,ti=p}break;case 30:break;default:Us(i,r)}}function V1(i){var n=i.alternate;n!==null&&(i.alternate=null,V1(n)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(n=i.stateNode,n!==null&&$0(n)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _e=null,an=!1;function Hs(i,n,r){for(r=r.child;r!==null;)Y1(i,n,r),r=r.sibling}function Y1(i,n,r){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Od,r)}catch{}switch(r.tag){case 26:ti||$a(r,n),Hs(i,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ti||$a(r,n);var c=_e,f=an;nl(r.type)&&(_e=r.stateNode,an=!1),Hs(i,n,r),Af(r.stateNode),_e=c,an=f;break;case 5:ti||$a(r,n);case 6:if(c=_e,f=an,_e=null,Hs(i,n,r),_e=c,an=f,_e!==null)if(an)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(r.stateNode)}catch(p){ne(r,n,p)}else try{_e.removeChild(r.stateNode)}catch(p){ne(r,n,p)}break;case 18:_e!==null&&(an?(i=_e,FE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),ju(i)):FE(_e,r.stateNode));break;case 4:c=_e,f=an,_e=r.stateNode.containerInfo,an=!0,Hs(i,n,r),_e=c,an=f;break;case 0:case 11:case 14:case 15:$r(2,r,n),ti||$r(4,r,n),Hs(i,n,r);break;case 1:ti||($a(r,n),c=r.stateNode,typeof c.componentWillUnmount=="function"&&P1(r,n,c)),Hs(i,n,r);break;case 21:Hs(i,n,r);break;case 22:ti=(c=ti)||r.memoizedState!==null,Hs(i,n,r),ti=c;break;default:Hs(i,n,r)}}function X1(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ju(i)}catch(r){ne(n,n.return,r)}}}function K1(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ju(i)}catch(r){ne(n,n.return,r)}}function aD(i){switch(i.tag){case 31:case 13:case 19:var n=i.stateNode;return n===null&&(n=i.stateNode=new G1),n;case 22:return i=i.stateNode,n=i._retryCache,n===null&&(n=i._retryCache=new G1),n;default:throw Error(a(435,i.tag))}}function Up(i,n){var r=aD(i);n.forEach(function(c){if(!r.has(c)){r.add(c);var f=fD.bind(null,i,c);c.then(f,f)}})}function sn(i,n){var r=n.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],p=i,S=n,C=S;t:for(;C!==null;){switch(C.tag){case 27:if(nl(C.type)){_e=C.stateNode,an=!1;break t}break;case 5:_e=C.stateNode,an=!1;break t;case 3:case 4:_e=C.stateNode.containerInfo,an=!0;break t}C=C.return}if(_e===null)throw Error(a(160));Y1(p,S,f),_e=null,an=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)W1(n,i),n=n.sibling}var _a=null;function W1(i,n){var r=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:sn(n,i),rn(i),c&4&&($r(3,i,i.return),uf(3,i),$r(5,i,i.return));break;case 1:sn(n,i),rn(i),c&512&&(ti||r===null||$a(r,r.return)),c&64&&Ps&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=_a;if(sn(n,i),rn(i),c&512&&(ti||r===null||$a(r,r.return)),c&4){var p=r!==null?r.memoizedState:null;if(c=i.memoizedState,r===null)if(c===null)if(i.stateNode===null){t:{c=i.type,r=i.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[jd]||p[Ai]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Ei(p,c,r),p[Ai]=i,ui(p),c=p;break t;case"link":var S=WE("link","href",f).get(c+(r.href||""));if(S){for(var C=0;C<S.length;C++)if(p=S[C],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(C,1);break e}}p=f.createElement(c),Ei(p,c,r),f.head.appendChild(p);break;case"meta":if(S=WE("meta","content",f).get(c+(r.content||""))){for(C=0;C<S.length;C++)if(p=S[C],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(C,1);break e}}p=f.createElement(c),Ei(p,c,r),f.head.appendChild(p);break;default:throw Error(a(468,c))}p[Ai]=i,ui(p),c=p}i.stateNode=c}else $E(f,i.type,i.stateNode);else i.stateNode=KE(f,c,i.memoizedProps);else p!==c?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,c===null?$E(f,i.type,i.stateNode):KE(f,c,i.memoizedProps)):c===null&&i.stateNode!==null&&bv(i,i.memoizedProps,r.memoizedProps)}break;case 27:sn(n,i),rn(i),c&512&&(ti||r===null||$a(r,r.return)),r!==null&&c&4&&bv(i,i.memoizedProps,r.memoizedProps);break;case 5:if(sn(n,i),rn(i),c&512&&(ti||r===null||$a(r,r.return)),i.flags&32){f=i.stateNode;try{ru(f,"")}catch(ft){ne(i,i.return,ft)}}c&4&&i.stateNode!=null&&(f=i.memoizedProps,bv(i,f,r!==null?r.memoizedProps:f)),c&1024&&(Av=!0);break;case 6:if(sn(n,i),rn(i),c&4){if(i.stateNode===null)throw Error(a(162));c=i.memoizedProps,r=i.stateNode;try{r.nodeValue=c}catch(ft){ne(i,i.return,ft)}}break;case 3:if(nb=null,f=_a,_a=eb(n.containerInfo),sn(n,i),_a=f,rn(i),c&4&&r!==null&&r.memoizedState.isDehydrated)try{ju(n.containerInfo)}catch(ft){ne(i,i.return,ft)}Av&&(Av=!1,$1(i));break;case 4:c=_a,_a=eb(i.stateNode.containerInfo),sn(n,i),rn(i),_a=c;break;case 12:sn(n,i),rn(i);break;case 31:sn(n,i),rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Up(i,c)));break;case 13:sn(n,i),rn(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Gp=Ve()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Up(i,c)));break;case 22:f=i.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,V=Ps,$=ti;if(Ps=V||f,ti=$||L,sn(n,i),ti=$,Ps=V,rn(i),c&8192)t:for(n=i.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(r===null||L||Ps||ti||_o(i)),r=null,n=i;;){if(n.tag===5||n.tag===26){if(r===null){L=r=n;try{if(p=L.stateNode,f)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=L.stateNode;var Z=L.memoizedProps.style,Y=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ft){ne(L,L.return,ft)}}}else if(n.tag===6){if(r===null){L=n;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(ft){ne(L,L.return,ft)}}}else if(n.tag===18){if(r===null){L=n;try{var K=L.stateNode;f?PE(K,!0):PE(L.stateNode,!1)}catch(ft){ne(L,L.return,ft)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===i)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=i.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Up(i,r))));break;case 19:sn(n,i),rn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Up(i,c)));break;case 30:break;case 21:break;default:sn(n,i),rn(i)}}function rn(i){var n=i.flags;if(n&2){try{for(var r,c=i.return;c!==null;){if(U1(c)){r=c;break}c=c.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=yv(i);Hp(i,p,f);break;case 5:var S=r.stateNode;r.flags&32&&(ru(S,""),r.flags&=-33);var C=yv(i);Hp(i,C,S);break;case 3:case 4:var L=r.stateNode.containerInfo,V=yv(i);vv(i,V,L);break;default:throw Error(a(161))}}catch($){ne(i,i.return,$)}i.flags&=-3}n&4096&&(i.flags&=-4097)}function $1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var n=i;$1(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),i=i.sibling}}function Us(i,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)q1(i,n.alternate,n),n=n.sibling}function _o(i){for(i=i.child;i!==null;){var n=i;switch(n.tag){case 0:case 11:case 14:case 15:$r(4,n,n.return),_o(n);break;case 1:$a(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&P1(n,n.return,r),_o(n);break;case 27:Af(n.stateNode);case 26:case 5:$a(n,n.return),_o(n);break;case 22:n.memoizedState===null&&_o(n);break;case 30:_o(n);break;default:_o(n)}i=i.sibling}}function Is(i,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,f=i,p=n,S=p.flags;switch(p.tag){case 0:case 11:case 15:Is(f,p,r),uf(4,p);break;case 1:if(Is(f,p,r),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(V){ne(c,c.return,V)}if(c=p,f=c.updateQueue,f!==null){var C=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Cw(L[f],C)}catch(V){ne(c,c.return,V)}}r&&S&64&&F1(p),hf(p,p.return);break;case 27:I1(p);case 26:case 5:Is(f,p,r),r&&c===null&&S&4&&H1(p),hf(p,p.return);break;case 12:Is(f,p,r);break;case 31:Is(f,p,r),r&&S&4&&X1(f,p);break;case 13:Is(f,p,r),r&&S&4&&K1(f,p);break;case 22:p.memoizedState===null&&Is(f,p,r),hf(p,p.return);break;case 30:break;default:Is(f,p,r)}n=n.sibling}}function Sv(i,n){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&$d(r))}function xv(i,n){i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&$d(i))}function Ca(i,n,r,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Q1(i,n,r,c),n=n.sibling}function Q1(i,n,r,c){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Ca(i,n,r,c),f&2048&&uf(9,n);break;case 1:Ca(i,n,r,c);break;case 3:Ca(i,n,r,c),f&2048&&(i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&$d(i)));break;case 12:if(f&2048){Ca(i,n,r,c),i=n.stateNode;try{var p=n.memoizedProps,S=p.id,C=p.onPostCommit;typeof C=="function"&&C(S,n.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){ne(n,n.return,L)}}else Ca(i,n,r,c);break;case 31:Ca(i,n,r,c);break;case 13:Ca(i,n,r,c);break;case 23:break;case 22:p=n.stateNode,S=n.alternate,n.memoizedState!==null?p._visibility&2?Ca(i,n,r,c):df(i,n):p._visibility&2?Ca(i,n,r,c):(p._visibility|=2,_u(i,n,r,c,(n.subtreeFlags&10256)!==0||!1)),f&2048&&Sv(S,n);break;case 24:Ca(i,n,r,c),f&2048&&xv(n.alternate,n);break;default:Ca(i,n,r,c)}}function _u(i,n,r,c,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=i,S=n,C=r,L=c,V=S.flags;switch(S.tag){case 0:case 11:case 15:_u(p,S,C,L,f),uf(8,S);break;case 23:break;case 22:var $=S.stateNode;S.memoizedState!==null?$._visibility&2?_u(p,S,C,L,f):df(p,S):($._visibility|=2,_u(p,S,C,L,f)),f&&V&2048&&Sv(S.alternate,S);break;case 24:_u(p,S,C,L,f),f&&V&2048&&xv(S.alternate,S);break;default:_u(p,S,C,L,f)}n=n.sibling}}function df(i,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=i,c=n,f=c.flags;switch(c.tag){case 22:df(r,c),f&2048&&Sv(c.alternate,c);break;case 24:df(r,c),f&2048&&xv(c.alternate,c);break;default:df(r,c)}n=n.sibling}}var ff=8192;function Cu(i,n,r){if(i.subtreeFlags&ff)for(i=i.child;i!==null;)Z1(i,n,r),i=i.sibling}function Z1(i,n,r){switch(i.tag){case 26:Cu(i,n,r),i.flags&ff&&i.memoizedState!==null&&qD(r,_a,i.memoizedState,i.memoizedProps);break;case 5:Cu(i,n,r);break;case 3:case 4:var c=_a;_a=eb(i.stateNode.containerInfo),Cu(i,n,r),_a=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=ff,ff=16777216,Cu(i,n,r),ff=c):Cu(i,n,r));break;default:Cu(i,n,r)}}function J1(i){var n=i.alternate;if(n!==null&&(i=n.child,i!==null)){n.child=null;do n=i.sibling,i.sibling=null,i=n;while(i!==null)}}function mf(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];hi=c,eE(c,i)}J1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)tE(i),i=i.sibling}function tE(i){switch(i.tag){case 0:case 11:case 15:mf(i),i.flags&2048&&$r(9,i,i.return);break;case 3:mf(i);break;case 12:mf(i);break;case 22:var n=i.stateNode;i.memoizedState!==null&&n._visibility&2&&(i.return===null||i.return.tag!==13)?(n._visibility&=-3,Ip(i)):mf(i);break;default:mf(i)}}function Ip(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];hi=c,eE(c,i)}J1(i)}for(i=i.child;i!==null;){switch(n=i,n.tag){case 0:case 11:case 15:$r(8,n,n.return),Ip(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Ip(n));break;default:Ip(n)}i=i.sibling}}function eE(i,n){for(;hi!==null;){var r=hi;switch(r.tag){case 0:case 11:case 15:$r(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$d(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,hi=c;else t:for(r=i;hi!==null;){c=hi;var f=c.sibling,p=c.return;if(V1(c),c===r){hi=null;break t}if(f!==null){f.return=p,hi=f;break t}hi=p}}}var sD={getCacheForType:function(i){var n=xi(Qe),r=n.data.get(i);return r===void 0&&(r=i(),n.data.set(i,r)),r},cacheSignal:function(){return xi(Qe).controller.signal}},rD=typeof WeakMap=="function"?WeakMap:Map,Qt=0,me=null,jt=null,Pt=0,ie=0,Cn=null,Qr=!1,Mu=!1,wv=!1,Gs=0,Fe=0,Zr=0,Co=0,Ev=0,Mn=0,Du=0,gf=null,ln=null,Tv=!1,Gp=0,iE=0,qp=1/0,Vp=null,Jr=null,ai=0,tl=null,Ru=null,qs=0,_v=0,Cv=null,nE=null,pf=0,Mv=null;function Dn(){return(Qt&2)!==0&&Pt!==0?Pt&-Pt:B.T!==null?Ov():vx()}function aE(){if(Mn===0)if((Pt&536870912)===0||It){var i=Jg;Jg<<=1,(Jg&3932160)===0&&(Jg=262144),Mn=i}else Mn=536870912;return i=Tn.current,i!==null&&(i.flags|=32),Mn}function on(i,n,r){(i===me&&(ie===2||ie===9)||i.cancelPendingCommit!==null)&&(Nu(i,0),el(i,Pt,Mn,!1)),zd(i,r),((Qt&2)===0||i!==me)&&(i===me&&((Qt&2)===0&&(Co|=r),Fe===4&&el(i,Pt,Mn,!1)),Qa(i))}function sE(i,n,r){if((Qt&6)!==0)throw Error(a(327));var c=!r&&(n&127)===0&&(n&i.expiredLanes)===0||Bd(i,n),f=c?cD(i,n):Rv(i,n,!0),p=c;do{if(f===0){Mu&&!c&&el(i,n,0,!1);break}else{if(r=i.current.alternate,p&&!lD(r)){f=Rv(i,n,!1),p=!1;continue}if(f===2){if(p=n,i.errorRecoveryDisabledLanes&p)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;t:{var C=i;f=gf;var L=C.current.memoizedState.isDehydrated;if(L&&(Nu(C,S).flags|=256),S=Rv(C,S,!1),S!==2){if(wv&&!L){C.errorRecoveryDisabledLanes|=p,Co|=p,f=4;break t}p=ln,ln=f,p!==null&&(ln===null?ln=p:ln.push.apply(ln,p))}f=S}if(p=!1,f!==2)continue}}if(f===1){Nu(i,0),el(i,n,0,!0);break}t:{switch(c=i,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:el(c,n,Mn,!Qr);break t;case 2:ln=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(f=Gp+300-Ve(),10<f)){if(el(c,n,Mn,!Qr),ep(c,0,!0)!==0)break t;qs=n,c.timeoutHandle=zE(rE.bind(null,c,r,ln,Vp,Tv,n,Mn,Co,Du,Qr,p,"Throttled",-0,0),f);break t}rE(c,r,ln,Vp,Tv,n,Mn,Co,Du,Qr,p,null,-0,0)}}break}while(!0);Qa(i)}function rE(i,n,r,c,f,p,S,C,L,V,$,Z,Y,K){if(i.timeoutHandle=-1,Z=n.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ds},Z1(n,p,Z);var ft=(p&62914560)===p?Gp-Ve():(p&4194048)===p?iE-Ve():0;if(ft=VD(Z,ft),ft!==null){qs=p,i.cancelPendingCommit=ft(mE.bind(null,i,n,p,r,c,f,S,C,L,$,Z,null,Y,K)),el(i,p,S,!V);return}}mE(i,n,p,r,c,f,S,C,L)}function lD(i){for(var n=i;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],p=f.getSnapshot;f=f.value;try{if(!wn(p(),f))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function el(i,n,r,c){n&=~Ev,n&=~Co,i.suspendedLanes|=n,i.pingedLanes&=~n,c&&(i.warmLanes|=n),c=i.expirationTimes;for(var f=n;0<f;){var p=31-xn(f),S=1<<p;c[p]=-1,f&=~S}r!==0&&px(i,r,n)}function Yp(){return(Qt&6)===0?(bf(0),!1):!0}function Dv(){if(jt!==null){if(ie===0)var i=jt.return;else i=jt,Ls=yo=null,Vy(i),Su=null,Zd=0,i=jt;for(;i!==null;)j1(i.alternate,i),i=i.return;jt=null}}function Nu(i,n){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,CD(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),qs=0,Dv(),me=i,jt=r=Ns(i.current,null),Pt=n,ie=0,Cn=null,Qr=!1,Mu=Bd(i,n),wv=!1,Du=Mn=Ev=Co=Zr=Fe=0,ln=gf=null,Tv=!1,(n&8)!==0&&(n|=n&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=n;0<c;){var f=31-xn(c),p=1<<f;n|=i[f],c&=~p}return Gs=n,fp(),r}function lE(i,n){Dt=null,B.H=lf,n===Au||n===Sp?(n=ww(),ie=3):n===Ly?(n=ww(),ie=4):ie=n===lv?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Cn=n,jt===null&&(Fe=1,Bp(i,ia(n,i.current)))}function oE(){var i=Tn.current;return i===null?!0:(Pt&4194048)===Pt?ra===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?i===ra:!1}function cE(){var i=B.H;return B.H=lf,i===null?lf:i}function uE(){var i=B.A;return B.A=sD,i}function Xp(){Fe=4,Qr||(Pt&4194048)!==Pt&&Tn.current!==null||(Mu=!0),(Zr&134217727)===0&&(Co&134217727)===0||me===null||el(me,Pt,Mn,!1)}function Rv(i,n,r){var c=Qt;Qt|=2;var f=cE(),p=uE();(me!==i||Pt!==n)&&(Vp=null,Nu(i,n)),n=!1;var S=Fe;t:do try{if(ie!==0&&jt!==null){var C=jt,L=Cn;switch(ie){case 8:Dv(),S=6;break t;case 3:case 2:case 9:case 6:Tn.current===null&&(n=!0);var V=ie;if(ie=0,Cn=null,ku(i,C,L,V),r&&Mu){S=0;break t}break;default:V=ie,ie=0,Cn=null,ku(i,C,L,V)}}oD(),S=Fe;break}catch($){lE(i,$)}while(!0);return n&&i.shellSuspendCounter++,Ls=yo=null,Qt=c,B.H=f,B.A=p,jt===null&&(me=null,Pt=0,fp()),S}function oD(){for(;jt!==null;)hE(jt)}function cD(i,n){var r=Qt;Qt|=2;var c=cE(),f=uE();me!==i||Pt!==n?(Vp=null,qp=Ve()+500,Nu(i,n)):Mu=Bd(i,n);t:do try{if(ie!==0&&jt!==null){n=jt;var p=Cn;e:switch(ie){case 1:ie=0,Cn=null,ku(i,n,p,1);break;case 2:case 9:if(Sw(p)){ie=0,Cn=null,dE(n);break}n=function(){ie!==2&&ie!==9||me!==i||(ie=7),Qa(i)},p.then(n,n);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:Sw(p)?(ie=0,Cn=null,dE(n)):(ie=0,Cn=null,ku(i,n,p,7));break;case 5:var S=null;switch(jt.tag){case 26:S=jt.memoizedState;case 5:case 27:var C=jt;if(S?QE(S):C.stateNode.complete){ie=0,Cn=null;var L=C.sibling;if(L!==null)jt=L;else{var V=C.return;V!==null?(jt=V,Kp(V)):jt=null}break e}}ie=0,Cn=null,ku(i,n,p,5);break;case 6:ie=0,Cn=null,ku(i,n,p,6);break;case 8:Dv(),Fe=6;break t;default:throw Error(a(462))}}uD();break}catch($){lE(i,$)}while(!0);return Ls=yo=null,B.H=c,B.A=f,Qt=r,jt!==null?0:(me=null,Pt=0,fp(),Fe)}function uD(){for(;jt!==null&&!vn();)hE(jt)}function hE(i){var n=B1(i.alternate,i,Gs);i.memoizedProps=i.pendingProps,n===null?Kp(i):jt=n}function dE(i){var n=i,r=n.alternate;switch(n.tag){case 15:case 0:n=D1(r,n,n.pendingProps,n.type,void 0,Pt);break;case 11:n=D1(r,n,n.pendingProps,n.type.render,n.ref,Pt);break;case 5:Vy(n);default:j1(r,n),n=jt=uw(n,Gs),n=B1(r,n,Gs)}i.memoizedProps=i.pendingProps,n===null?Kp(i):jt=n}function ku(i,n,r,c){Ls=yo=null,Vy(n),Su=null,Zd=0;var f=n.return;try{if(ZM(i,f,n,r,Pt)){Fe=1,Bp(i,ia(r,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Fe=1,Bp(i,ia(r,i.current)),jt=null;return}n.flags&32768?(It||c===1?i=!0:Mu||(Pt&536870912)!==0?i=!1:(Qr=i=!0,(c===2||c===9||c===3||c===6)&&(c=Tn.current,c!==null&&c.tag===13&&(c.flags|=16384))),fE(n,i)):Kp(n)}function Kp(i){var n=i;do{if((n.flags&32768)!==0){fE(n,Qr);return}i=n.return;var r=eD(n.alternate,n,Gs);if(r!==null){jt=r;return}if(n=n.sibling,n!==null){jt=n;return}jt=n=i}while(n!==null);Fe===0&&(Fe=5)}function fE(i,n){do{var r=iD(i.alternate,i);if(r!==null){r.flags&=32767,jt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(i=i.sibling,i!==null)){jt=i;return}jt=i=r}while(i!==null);Fe=6,jt=null}function mE(i,n,r,c,f,p,S,C,L){i.cancelPendingCommit=null;do Wp();while(ai!==0);if((Qt&6)!==0)throw Error(a(327));if(n!==null){if(n===i.current)throw Error(a(177));if(p=n.lanes|n.childLanes,p|=yy,G2(i,r,p,S,C,L),i===me&&(jt=me=null,Pt=0),Ru=n,tl=i,qs=r,_v=p,Cv=f,nE=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mD(Jc,function(){return vE(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,f=P.p,P.p=2,S=Qt,Qt|=4;try{nD(i,n,r)}finally{Qt=S,P.p=f,B.T=c}}ai=1,gE(),pE(),bE()}}function gE(){if(ai===1){ai=0;var i=tl,n=Ru,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var c=P.p;P.p=2;var f=Qt;Qt|=4;try{W1(n,i);var p=Iv,S=ew(i.containerInfo),C=p.focusedElem,L=p.selectionRange;if(S!==C&&C&&C.ownerDocument&&tw(C.ownerDocument.documentElement,C)){if(L!==null&&fy(C)){var V=L.start,$=L.end;if($===void 0&&($=V),"selectionStart"in C)C.selectionStart=V,C.selectionEnd=Math.min($,C.value.length);else{var Z=C.ownerDocument||document,Y=Z&&Z.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),ft=C.textContent.length,wt=Math.min(L.start,ft),oe=L.end===void 0?wt:Math.min(L.end,ft);!K.extend&&wt>oe&&(S=oe,oe=wt,wt=S);var I=Jx(C,wt),F=Jx(C,oe);if(I&&F&&(K.rangeCount!==1||K.anchorNode!==I.node||K.anchorOffset!==I.offset||K.focusNode!==F.node||K.focusOffset!==F.offset)){var q=Z.createRange();q.setStart(I.node,I.offset),K.removeAllRanges(),wt>oe?(K.addRange(q),K.extend(F.node,F.offset)):(q.setEnd(F.node,F.offset),K.addRange(q))}}}}for(Z=[],K=C;K=K.parentNode;)K.nodeType===1&&Z.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Z.length;C++){var Q=Z[C];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}lb=!!Uv,Iv=Uv=null}finally{Qt=f,P.p=c,B.T=r}}i.current=n,ai=2}}function pE(){if(ai===2){ai=0;var i=tl,n=Ru,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var c=P.p;P.p=2;var f=Qt;Qt|=4;try{q1(i,n.alternate,n)}finally{Qt=f,P.p=c,B.T=r}}ai=3}}function bE(){if(ai===4||ai===3){ai=0,tn();var i=tl,n=Ru,r=qs,c=nE;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ai=5:(ai=0,Ru=tl=null,yE(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Jr=null),K0(r),n=n.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Od,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=B.T,f=P.p,P.p=2,B.T=null;try{for(var p=i.onRecoverableError,S=0;S<c.length;S++){var C=c[S];p(C.value,{componentStack:C.stack})}}finally{B.T=n,P.p=f}}(qs&3)!==0&&Wp(),Qa(i),f=i.pendingLanes,(r&261930)!==0&&(f&42)!==0?i===Mv?pf++:(pf=0,Mv=i):pf=0,bf(0)}}function yE(i,n){(i.pooledCacheLanes&=n)===0&&(n=i.pooledCache,n!=null&&(i.pooledCache=null,$d(n)))}function Wp(){return gE(),pE(),bE(),vE()}function vE(){if(ai!==5)return!1;var i=tl,n=_v;_v=0;var r=K0(qs),c=B.T,f=P.p;try{P.p=32>r?32:r,B.T=null,r=Cv,Cv=null;var p=tl,S=qs;if(ai=0,Ru=tl=null,qs=0,(Qt&6)!==0)throw Error(a(331));var C=Qt;if(Qt|=4,tE(p.current),Q1(p,p.current,S,r),Qt=C,bf(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Od,p)}catch{}return!0}finally{P.p=f,B.T=c,yE(i,n)}}function AE(i,n,r){n=ia(r,n),n=rv(i.stateNode,n,2),i=Xr(i,n,2),i!==null&&(zd(i,2),Qa(i))}function ne(i,n,r){if(i.tag===3)AE(i,i,r);else for(;n!==null;){if(n.tag===3){AE(n,i,r);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jr===null||!Jr.has(c))){i=ia(r,i),r=S1(2),c=Xr(n,r,2),c!==null&&(x1(r,c,n,i),zd(c,2),Qa(c));break}}n=n.return}}function Nv(i,n,r){var c=i.pingCache;if(c===null){c=i.pingCache=new rD;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(r)||(wv=!0,f.add(r),i=hD.bind(null,i,n,r),n.then(i,i))}function hD(i,n,r){var c=i.pingCache;c!==null&&c.delete(n),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,me===i&&(Pt&r)===r&&(Fe===4||Fe===3&&(Pt&62914560)===Pt&&300>Ve()-Gp?(Qt&2)===0&&Nu(i,0):Ev|=r,Du===Pt&&(Du=0)),Qa(i)}function SE(i,n){n===0&&(n=gx()),i=go(i,n),i!==null&&(zd(i,n),Qa(i))}function dD(i){var n=i.memoizedState,r=0;n!==null&&(r=n.retryLane),SE(i,r)}function fD(i,n){var r=0;switch(i.tag){case 31:case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(n),SE(i,r)}function mD(i,n){return jr(i,n)}var $p=null,Lu=null,kv=!1,Qp=!1,Lv=!1,il=0;function Qa(i){i!==Lu&&i.next===null&&(Lu===null?$p=Lu=i:Lu=Lu.next=i),Qp=!0,kv||(kv=!0,pD())}function bf(i,n){if(!Lv&&Qp){Lv=!0;do for(var r=!1,c=$p;c!==null;){if(i!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var S=c.suspendedLanes,C=c.pingedLanes;p=(1<<31-xn(42|i)+1)-1,p&=f&~(S&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,TE(c,p))}else p=Pt,p=ep(c,c===me?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Bd(c,p)||(r=!0,TE(c,p));c=c.next}while(r);Lv=!1}}function gD(){xE()}function xE(){Qp=kv=!1;var i=0;il!==0&&_D()&&(i=il);for(var n=Ve(),r=null,c=$p;c!==null;){var f=c.next,p=wE(c,n);p===0?(c.next=null,r===null?$p=f:r.next=f,f===null&&(Lu=r)):(r=c,(i!==0||(p&3)!==0)&&(Qp=!0)),c=f}ai!==0&&ai!==5||bf(i),il!==0&&(il=0)}function wE(i,n){for(var r=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var S=31-xn(p),C=1<<S,L=f[S];L===-1?((C&r)===0||(C&c)!==0)&&(f[S]=I2(C,n)):L<=n&&(i.expiredLanes|=C),p&=~C}if(n=me,r=Pt,r=ep(i,i===n?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,r===0||i===n&&(ie===2||ie===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ji(c),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Bd(i,r)){if(n=r&-r,n===i.callbackPriority)return n;switch(c!==null&&Ji(c),K0(r)){case 2:case 8:r=Zc;break;case 32:r=Jc;break;case 268435456:r=Cs;break;default:r=Jc}return c=EE.bind(null,i),r=jr(r,c),i.callbackPriority=n,i.callbackNode=r,n}return c!==null&&c!==null&&Ji(c),i.callbackPriority=2,i.callbackNode=null,2}function EE(i,n){if(ai!==0&&ai!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Wp()&&i.callbackNode!==r)return null;var c=Pt;return c=ep(i,i===me?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(sE(i,c,n),wE(i,Ve()),i.callbackNode!=null&&i.callbackNode===r?EE.bind(null,i):null)}function TE(i,n){if(Wp())return null;sE(i,n,!0)}function pD(){MD(function(){(Qt&6)!==0?jr(An,gD):xE()})}function Ov(){if(il===0){var i=yu;i===0&&(i=Zg,Zg<<=1,(Zg&261888)===0&&(Zg=256)),il=i}return il}function _E(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:sp(""+i)}function CE(i,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,i.id&&r.setAttribute("form",i.id),n.parentNode.insertBefore(r,n),i=new FormData(i),r.parentNode.removeChild(r),i}function bD(i,n,r,c,f){if(n==="submit"&&r&&r.stateNode===f){var p=_E((f[en]||null).action),S=c.submitter;S&&(n=(n=S[en]||null)?_E(n.formAction):S.getAttribute("formAction"),n!==null&&(p=n,S=null));var C=new cp("action","action",null,c,f);i.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(il!==0){var L=S?CE(f,S):new FormData(f);tv(r,{pending:!0,data:L,method:f.method,action:p},null,L)}}else typeof p=="function"&&(C.preventDefault(),L=S?CE(f,S):new FormData(f),tv(r,{pending:!0,data:L,method:f.method,action:p},p,L))},currentTarget:f}]})}}for(var Bv=0;Bv<by.length;Bv++){var zv=by[Bv],yD=zv.toLowerCase(),vD=zv[0].toUpperCase()+zv.slice(1);Ta(yD,"on"+vD)}Ta(aw,"onAnimationEnd"),Ta(sw,"onAnimationIteration"),Ta(rw,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(BM,"onTransitionRun"),Ta(zM,"onTransitionStart"),Ta(jM,"onTransitionCancel"),Ta(lw,"onTransitionEnd"),au("onMouseEnter",["mouseout","mouseover"]),au("onMouseLeave",["mouseout","mouseover"]),au("onPointerEnter",["pointerout","pointerover"]),au("onPointerLeave",["pointerout","pointerover"]),uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),uo("onBeforeInput",["compositionend","keypress","textInput","paste"]),uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yf));function ME(i,n){n=(n&4)!==0;for(var r=0;r<i.length;r++){var c=i[r],f=c.event;c=c.listeners;t:{var p=void 0;if(n)for(var S=c.length-1;0<=S;S--){var C=c[S],L=C.instance,V=C.currentTarget;if(C=C.listener,L!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=V;try{p(f)}catch($){dp($)}f.currentTarget=null,p=L}else for(S=0;S<c.length;S++){if(C=c[S],L=C.instance,V=C.currentTarget,C=C.listener,L!==p&&f.isPropagationStopped())break t;p=C,f.currentTarget=V;try{p(f)}catch($){dp($)}f.currentTarget=null,p=L}}}}function Ft(i,n){var r=n[W0];r===void 0&&(r=n[W0]=new Set);var c=i+"__bubble";r.has(c)||(DE(n,i,2,!1),r.add(c))}function jv(i,n,r){var c=0;n&&(c|=4),DE(r,i,c,n)}var Zp="_reactListening"+Math.random().toString(36).slice(2);function Fv(i){if(!i[Zp]){i[Zp]=!0,xx.forEach(function(r){r!=="selectionchange"&&(AD.has(r)||jv(r,!1,i),jv(r,!0,i))});var n=i.nodeType===9?i:i.ownerDocument;n===null||n[Zp]||(n[Zp]=!0,jv("selectionchange",!1,n))}}function DE(i,n,r,c){switch(aT(n)){case 2:var f=KD;break;case 8:f=WD;break;default:f=Jv}r=f.bind(null,n,r,i),f=void 0,!ay||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(n,r,{capture:!0,passive:f}):i.addEventListener(n,r,!0):f!==void 0?i.addEventListener(n,r,{passive:f}):i.addEventListener(n,r,!1)}function Pv(i,n,r,c,f){var p=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var C=c.stateNode.containerInfo;if(C===f)break;if(S===4)for(S=c.return;S!==null;){var L=S.tag;if((L===3||L===4)&&S.stateNode.containerInfo===f)return;S=S.return}for(;C!==null;){if(S=eu(C),S===null)return;if(L=S.tag,L===5||L===6||L===26||L===27){c=p=S;continue t}C=C.parentNode}}c=c.return}Ox(function(){var V=p,$=iy(r),Z=[];t:{var Y=ow.get(i);if(Y!==void 0){var K=cp,ft=i;switch(i){case"keypress":if(lp(r)===0)break t;case"keydown":case"keyup":K=fM;break;case"focusin":ft="focus",K=oy;break;case"focusout":ft="blur",K=oy;break;case"beforeblur":case"afterblur":K=oy;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=eM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=pM;break;case aw:case sw:case rw:K=aM;break;case lw:K=yM;break;case"scroll":case"scrollend":K=J2;break;case"wheel":K=AM;break;case"copy":case"cut":case"paste":K=rM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Px;break;case"toggle":case"beforetoggle":K=xM}var wt=(n&4)!==0,oe=!wt&&(i==="scroll"||i==="scrollend"),I=wt?Y!==null?Y+"Capture":null:Y;wt=[];for(var F=V,q;F!==null;){var Q=F;if(q=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||q===null||I===null||(Q=Pd(F,I),Q!=null&&wt.push(vf(F,Q,q))),oe)break;F=F.return}0<wt.length&&(Y=new K(Y,ft,null,r,$),Z.push({event:Y,listeners:wt}))}}if((n&7)===0){t:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&r!==ey&&(ft=r.relatedTarget||r.fromElement)&&(eu(ft)||ft[tu]))break t;if((K||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(ft=r.relatedTarget||r.toElement,K=V,ft=ft?eu(ft):null,ft!==null&&(oe=o(ft),wt=ft.tag,ft!==oe||wt!==5&&wt!==27&&wt!==6)&&(ft=null)):(K=null,ft=V),K!==ft)){if(wt=jx,Q="onMouseLeave",I="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(wt=Px,Q="onPointerLeave",I="onPointerEnter",F="pointer"),oe=K==null?Y:Fd(K),q=ft==null?Y:Fd(ft),Y=new wt(Q,F+"leave",K,r,$),Y.target=oe,Y.relatedTarget=q,Q=null,eu($)===V&&(wt=new wt(I,F+"enter",ft,r,$),wt.target=q,wt.relatedTarget=oe,Q=wt),oe=Q,K&&ft)e:{for(wt=SD,I=K,F=ft,q=0,Q=I;Q;Q=wt(Q))q++;Q=0;for(var St=F;St;St=wt(St))Q++;for(;0<q-Q;)I=wt(I),q--;for(;0<Q-q;)F=wt(F),Q--;for(;q--;){if(I===F||F!==null&&I===F.alternate){wt=I;break e}I=wt(I),F=wt(F)}wt=null}else wt=null;K!==null&&RE(Z,Y,K,wt,!1),ft!==null&&oe!==null&&RE(Z,oe,ft,wt,!0)}}t:{if(Y=V?Fd(V):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var Wt=Xx;else if(Vx(Y))if(Kx)Wt=kM;else{Wt=RM;var yt=DM}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&ty(V.elementType)&&(Wt=Xx):Wt=NM;if(Wt&&(Wt=Wt(i,V))){Yx(Z,Wt,r,$);break t}yt&&yt(i,Y,V),i==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&J0(Y,"number",Y.value)}switch(yt=V?Fd(V):window,i){case"focusin":(Vx(yt)||yt.contentEditable==="true")&&(uu=yt,my=V,Xd=null);break;case"focusout":Xd=my=uu=null;break;case"mousedown":gy=!0;break;case"contextmenu":case"mouseup":case"dragend":gy=!1,iw(Z,r,$);break;case"selectionchange":if(OM)break;case"keydown":case"keyup":iw(Z,r,$)}var Nt;if(uy)t:{switch(i){case"compositionstart":var Ht="onCompositionStart";break t;case"compositionend":Ht="onCompositionEnd";break t;case"compositionupdate":Ht="onCompositionUpdate";break t}Ht=void 0}else cu?Gx(i,r)&&(Ht="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Ht="onCompositionStart");Ht&&(Hx&&r.locale!=="ko"&&(cu||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&cu&&(Nt=Bx()):(Hr=$,sy="value"in Hr?Hr.value:Hr.textContent,cu=!0)),yt=Jp(V,Ht),0<yt.length&&(Ht=new Fx(Ht,i,null,r,$),Z.push({event:Ht,listeners:yt}),Nt?Ht.data=Nt:(Nt=qx(r),Nt!==null&&(Ht.data=Nt)))),(Nt=EM?TM(i,r):_M(i,r))&&(Ht=Jp(V,"onBeforeInput"),0<Ht.length&&(yt=new Fx("onBeforeInput","beforeinput",null,r,$),Z.push({event:yt,listeners:Ht}),yt.data=Nt)),bD(Z,i,V,r,$)}ME(Z,n)})}function vf(i,n,r){return{instance:i,listener:n,currentTarget:r}}function Jp(i,n){for(var r=n+"Capture",c=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Pd(i,r),f!=null&&c.unshift(vf(i,f,p)),f=Pd(i,n),f!=null&&c.push(vf(i,f,p))),i.tag===3)return c;i=i.return}return[]}function SD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function RE(i,n,r,c,f){for(var p=n._reactName,S=[];r!==null&&r!==c;){var C=r,L=C.alternate,V=C.stateNode;if(C=C.tag,L!==null&&L===c)break;C!==5&&C!==26&&C!==27||V===null||(L=V,f?(V=Pd(r,p),V!=null&&S.unshift(vf(r,V,L))):f||(V=Pd(r,p),V!=null&&S.push(vf(r,V,L)))),r=r.return}S.length!==0&&i.push({event:n,listeners:S})}var xD=/\r\n?/g,wD=/\u0000|\uFFFD/g;function NE(i){return(typeof i=="string"?i:""+i).replace(xD,`
`).replace(wD,"")}function kE(i,n){return n=NE(n),NE(i)===n}function le(i,n,r,c,f,p){switch(r){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||ru(i,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&ru(i,""+c);break;case"className":np(i,"class",c);break;case"tabIndex":np(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":np(i,r,c);break;case"style":kx(i,c,p);break;case"data":if(n!=="object"){np(i,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||r!=="href")){i.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=sp(""+c),i.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(n!=="input"&&le(i,n,"name",f.name,f,null),le(i,n,"formEncType",f.formEncType,f,null),le(i,n,"formMethod",f.formMethod,f,null),le(i,n,"formTarget",f.formTarget,f,null)):(le(i,n,"encType",f.encType,f,null),le(i,n,"method",f.method,f,null),le(i,n,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=sp(""+c),i.setAttribute(r,c);break;case"onClick":c!=null&&(i.onclick=Ds);break;case"onScroll":c!=null&&Ft("scroll",i);break;case"onScrollEnd":c!=null&&Ft("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}r=sp(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""+c):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":c===!0?i.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,c):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(r,c):i.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(r):i.setAttribute(r,c);break;case"popover":Ft("beforetoggle",i),Ft("toggle",i),ip(i,"popover",c);break;case"xlinkActuate":Ms(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ms(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ms(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ms(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ms(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ms(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ip(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Q2.get(r)||r,ip(i,r,c))}}function Hv(i,n,r,c,f,p){switch(r){case"style":kx(i,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));i.innerHTML=r}}break;case"children":typeof c=="string"?ru(i,c):(typeof c=="number"||typeof c=="bigint")&&ru(i,""+c);break;case"onScroll":c!=null&&Ft("scroll",i);break;case"onScrollEnd":c!=null&&Ft("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Ds);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wx.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),n=r.slice(2,f?r.length-7:void 0),p=i[en]||null,p=p!=null?p[r]:null,typeof p=="function"&&i.removeEventListener(n,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(n,c,f);break t}r in i?i[r]=c:c===!0?i.setAttribute(r,""):ip(i,r,c)}}}function Ei(i,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",i),Ft("load",i);var c=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var S=r[p];if(S!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:le(i,n,p,S,r,null)}}f&&le(i,n,"srcSet",r.srcSet,r,null),c&&le(i,n,"src",r.src,r,null);return;case"input":Ft("invalid",i);var C=p=S=f=null,L=null,V=null;for(c in r)if(r.hasOwnProperty(c)){var $=r[c];if($!=null)switch(c){case"name":f=$;break;case"type":S=$;break;case"checked":L=$;break;case"defaultChecked":V=$;break;case"value":p=$;break;case"defaultValue":C=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,n));break;default:le(i,n,c,$,r,null)}}Mx(i,p,C,L,V,S,f,!1);return;case"select":Ft("invalid",i),c=S=p=null;for(f in r)if(r.hasOwnProperty(f)&&(C=r[f],C!=null))switch(f){case"value":p=C;break;case"defaultValue":S=C;break;case"multiple":c=C;default:le(i,n,f,C,r,null)}n=p,r=S,i.multiple=!!c,n!=null?su(i,!!c,n,!1):r!=null&&su(i,!!c,r,!0);return;case"textarea":Ft("invalid",i),p=f=c=null;for(S in r)if(r.hasOwnProperty(S)&&(C=r[S],C!=null))switch(S){case"value":c=C;break;case"defaultValue":f=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:le(i,n,S,C,r,null)}Rx(i,c,f,p);return;case"option":for(L in r)if(r.hasOwnProperty(L)&&(c=r[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:le(i,n,L,c,r,null)}return;case"dialog":Ft("beforetoggle",i),Ft("toggle",i),Ft("cancel",i),Ft("close",i);break;case"iframe":case"object":Ft("load",i);break;case"video":case"audio":for(c=0;c<yf.length;c++)Ft(yf[c],i);break;case"image":Ft("error",i),Ft("load",i);break;case"details":Ft("toggle",i);break;case"embed":case"source":case"link":Ft("error",i),Ft("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in r)if(r.hasOwnProperty(V)&&(c=r[V],c!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:le(i,n,V,c,r,null)}return;default:if(ty(n)){for($ in r)r.hasOwnProperty($)&&(c=r[$],c!==void 0&&Hv(i,n,$,c,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(c=r[C],c!=null&&le(i,n,C,c,r,null))}function ED(i,n,r,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,S=null,C=null,L=null,V=null,$=null;for(K in r){var Z=r[K];if(r.hasOwnProperty(K)&&Z!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=Z;default:c.hasOwnProperty(K)||le(i,n,K,null,c,Z)}}for(var Y in c){var K=c[Y];if(Z=r[Y],c.hasOwnProperty(Y)&&(K!=null||Z!=null))switch(Y){case"type":p=K;break;case"name":f=K;break;case"checked":V=K;break;case"defaultChecked":$=K;break;case"value":S=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,n));break;default:K!==Z&&le(i,n,Y,K,c,Z)}}Z0(i,S,C,L,V,$,p,f);return;case"select":K=S=C=Y=null;for(p in r)if(L=r[p],r.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":K=L;default:c.hasOwnProperty(p)||le(i,n,p,null,c,L)}for(f in c)if(p=c[f],L=r[f],c.hasOwnProperty(f)&&(p!=null||L!=null))switch(f){case"value":Y=p;break;case"defaultValue":C=p;break;case"multiple":S=p;default:p!==L&&le(i,n,f,p,c,L)}n=C,r=S,c=K,Y!=null?su(i,!!r,Y,!1):!!c!=!!r&&(n!=null?su(i,!!r,n,!0):su(i,!!r,r?[]:"",!1));return;case"textarea":K=Y=null;for(C in r)if(f=r[C],r.hasOwnProperty(C)&&f!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:le(i,n,C,null,c,f)}for(S in c)if(f=c[S],p=r[S],c.hasOwnProperty(S)&&(f!=null||p!=null))switch(S){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&le(i,n,S,f,c,p)}Dx(i,Y,K);return;case"option":for(var ft in r)if(Y=r[ft],r.hasOwnProperty(ft)&&Y!=null&&!c.hasOwnProperty(ft))switch(ft){case"selected":i.selected=!1;break;default:le(i,n,ft,null,c,Y)}for(L in c)if(Y=c[L],K=r[L],c.hasOwnProperty(L)&&Y!==K&&(Y!=null||K!=null))switch(L){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:le(i,n,L,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in r)Y=r[wt],r.hasOwnProperty(wt)&&Y!=null&&!c.hasOwnProperty(wt)&&le(i,n,wt,null,c,Y);for(V in c)if(Y=c[V],K=r[V],c.hasOwnProperty(V)&&Y!==K&&(Y!=null||K!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:le(i,n,V,Y,c,K)}return;default:if(ty(n)){for(var oe in r)Y=r[oe],r.hasOwnProperty(oe)&&Y!==void 0&&!c.hasOwnProperty(oe)&&Hv(i,n,oe,void 0,c,Y);for($ in c)Y=c[$],K=r[$],!c.hasOwnProperty($)||Y===K||Y===void 0&&K===void 0||Hv(i,n,$,Y,c,K);return}}for(var I in r)Y=r[I],r.hasOwnProperty(I)&&Y!=null&&!c.hasOwnProperty(I)&&le(i,n,I,null,c,Y);for(Z in c)Y=c[Z],K=r[Z],!c.hasOwnProperty(Z)||Y===K||Y==null&&K==null||le(i,n,Z,Y,c,K)}function LE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,n=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],p=f.transferSize,S=f.initiatorType,C=f.duration;if(p&&C&&LE(S)){for(S=0,C=f.responseEnd,c+=1;c<r.length;c++){var L=r[c],V=L.startTime;if(V>C)break;var $=L.transferSize,Z=L.initiatorType;$&&LE(Z)&&(L=L.responseEnd,S+=$*(L<C?1:(C-V)/(L-V)))}if(--c,n+=8*(p+S)/(f.duration/1e3),i++,10<i)break}}if(0<i)return n/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Uv=null,Iv=null;function tb(i){return i.nodeType===9?i:i.ownerDocument}function OE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BE(i,n){if(i===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&n==="foreignObject"?0:i}function Gv(i,n){return i==="textarea"||i==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qv=null;function _D(){var i=window.event;return i&&i.type==="popstate"?i===qv?!1:(qv=i,!0):(qv=null,!1)}var zE=typeof setTimeout=="function"?setTimeout:void 0,CD=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,MD=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(i){return jE.resolve(null).then(i).catch(DD)}:zE;function DD(i){setTimeout(function(){throw i})}function nl(i){return i==="head"}function FE(i,n){var r=n,c=0;do{var f=r.nextSibling;if(i.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){i.removeChild(f),ju(n);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Af(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,Af(r);for(var p=r.firstChild;p;){var S=p.nextSibling,C=p.nodeName;p[jd]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=S}}else r==="body"&&Af(i.ownerDocument.body);r=f}while(r);ju(n)}function PE(i,n){var r=i;i=0;do{var c=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=c}while(r)}function Vv(i){var n=i.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Vv(r),$0(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function RD(i,n,r,c){for(;i.nodeType===1;){var f=r;if(i.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[jd])switch(n){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(n==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=la(i.nextSibling),i===null)break}return null}function ND(i,n,r){if(n==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=la(i.nextSibling),i===null))return null;return i}function HE(i,n){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!n||(i=la(i.nextSibling),i===null))return null;return i}function Yv(i){return i.data==="$?"||i.data==="$~"}function Xv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function kD(i,n){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=n;else if(i.data!=="$?"||r.readyState!=="loading")n();else{var c=function(){n(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function la(i){for(;i!=null;i=i.nextSibling){var n=i.nodeType;if(n===1||n===3)break;if(n===8){if(n=i.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return i}var Kv=null;function UE(i){i=i.nextSibling;for(var n=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(n===0)return la(i.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}i=i.nextSibling}return null}function IE(i){i=i.previousSibling;for(var n=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return i;n--}else r!=="/$"&&r!=="/&"||n++}i=i.previousSibling}return null}function GE(i,n,r){switch(n=tb(r),i){case"html":if(i=n.documentElement,!i)throw Error(a(452));return i;case"head":if(i=n.head,!i)throw Error(a(453));return i;case"body":if(i=n.body,!i)throw Error(a(454));return i;default:throw Error(a(451))}}function Af(i){for(var n=i.attributes;n.length;)i.removeAttributeNode(n[0]);$0(i)}var oa=new Map,qE=new Set;function eb(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vs=P.d;P.d={f:LD,r:OD,D:BD,C:zD,L:jD,m:FD,X:HD,S:PD,M:UD};function LD(){var i=Vs.f(),n=Yp();return i||n}function OD(i){var n=iu(i);n!==null&&n.tag===5&&n.type==="form"?l1(n):Vs.r(i)}var Ou=typeof document>"u"?null:document;function VE(i,n,r){var c=Ou;if(c&&typeof n=="string"&&n){var f=ta(n);f='link[rel="'+i+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),qE.has(f)||(qE.add(f),i={rel:i,crossOrigin:r,href:n},c.querySelector(f)===null&&(n=c.createElement("link"),Ei(n,"link",i),ui(n),c.head.appendChild(n)))}}function BD(i){Vs.D(i),VE("dns-prefetch",i,null)}function zD(i,n){Vs.C(i,n),VE("preconnect",i,n)}function jD(i,n,r){Vs.L(i,n,r);var c=Ou;if(c&&i&&n){var f='link[rel="preload"][as="'+ta(n)+'"]';n==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+ta(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+ta(r.imageSizes)+'"]')):f+='[href="'+ta(i)+'"]';var p=f;switch(n){case"style":p=Bu(i);break;case"script":p=zu(i)}oa.has(p)||(i=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:i,as:n},r),oa.set(p,i),c.querySelector(f)!==null||n==="style"&&c.querySelector(Sf(p))||n==="script"&&c.querySelector(xf(p))||(n=c.createElement("link"),Ei(n,"link",i),ui(n),c.head.appendChild(n)))}}function FD(i,n){Vs.m(i,n);var r=Ou;if(r&&i){var c=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+ta(c)+'"][href="'+ta(i)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=zu(i)}if(!oa.has(p)&&(i=y({rel:"modulepreload",href:i},n),oa.set(p,i),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(xf(p)))return}c=r.createElement("link"),Ei(c,"link",i),ui(c),r.head.appendChild(c)}}}function PD(i,n,r){Vs.S(i,n,r);var c=Ou;if(c&&i){var f=nu(c).hoistableStyles,p=Bu(i);n=n||"default";var S=f.get(p);if(!S){var C={loading:0,preload:null};if(S=c.querySelector(Sf(p)))C.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":n},r),(r=oa.get(p))&&Wv(i,r);var L=S=c.createElement("link");ui(L),Ei(L,"link",i),L._p=new Promise(function(V,$){L.onload=V,L.onerror=$}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ib(S,n,c)}S={type:"stylesheet",instance:S,count:1,state:C},f.set(p,S)}}}function HD(i,n){Vs.X(i,n);var r=Ou;if(r&&i){var c=nu(r).hoistableScripts,f=zu(i),p=c.get(f);p||(p=r.querySelector(xf(f)),p||(i=y({src:i,async:!0},n),(n=oa.get(f))&&$v(i,n),p=r.createElement("script"),ui(p),Ei(p,"link",i),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function UD(i,n){Vs.M(i,n);var r=Ou;if(r&&i){var c=nu(r).hoistableScripts,f=zu(i),p=c.get(f);p||(p=r.querySelector(xf(f)),p||(i=y({src:i,async:!0,type:"module"},n),(n=oa.get(f))&&$v(i,n),p=r.createElement("script"),ui(p),Ei(p,"link",i),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function YE(i,n,r,c){var f=(f=qt.current)?eb(f):null;if(!f)throw Error(a(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Bu(r.href),r=nu(f).hoistableStyles,c=r.get(n),c||(c={type:"style",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Bu(r.href);var p=nu(f).hoistableStyles,S=p.get(i);if(S||(f=f.ownerDocument||f,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,S),(p=f.querySelector(Sf(i)))&&!p._p&&(S.instance=p,S.state.loading=5),oa.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},oa.set(i,r),p||ID(f,i,r,S.state))),n&&c===null)throw Error(a(528,""));return S}if(n&&c!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=zu(r),r=nu(f).hoistableScripts,c=r.get(n),c||(c={type:"script",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,i))}}function Bu(i){return'href="'+ta(i)+'"'}function Sf(i){return'link[rel="stylesheet"]['+i+"]"}function XE(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function ID(i,n,r,c){i.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=i.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ei(n,"link",r),ui(n),i.head.appendChild(n))}function zu(i){return'[src="'+ta(i)+'"]'}function xf(i){return"script[async]"+i}function KE(i,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var c=i.querySelector('style[data-href~="'+ta(r.href)+'"]');if(c)return n.instance=c,ui(c),c;var f=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),ui(c),Ei(c,"style",f),ib(c,r.precedence,i),n.instance=c;case"stylesheet":f=Bu(r.href);var p=i.querySelector(Sf(f));if(p)return n.state.loading|=4,n.instance=p,ui(p),p;c=XE(r),(f=oa.get(f))&&Wv(c,f),p=(i.ownerDocument||i).createElement("link"),ui(p);var S=p;return S._p=new Promise(function(C,L){S.onload=C,S.onerror=L}),Ei(p,"link",c),n.state.loading|=4,ib(p,r.precedence,i),n.instance=p;case"script":return p=zu(r.src),(f=i.querySelector(xf(p)))?(n.instance=f,ui(f),f):(c=r,(f=oa.get(p))&&(c=y({},r),$v(c,f)),i=i.ownerDocument||i,f=i.createElement("script"),ui(f),Ei(f,"link",c),i.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ib(c,r.precedence,i));return n.instance}function ib(i,n,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,S=0;S<c.length;S++){var C=c[S];if(C.dataset.precedence===n)p=C;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(i,n.firstChild))}function Wv(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.title==null&&(i.title=n.title)}function $v(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.integrity==null&&(i.integrity=n.integrity)}var nb=null;function WE(i,n,r){if(nb===null){var c=new Map,f=nb=new Map;f.set(r,c)}else f=nb,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(i))return c;for(c.set(i,null),r=r.getElementsByTagName(i),f=0;f<r.length;f++){var p=r[f];if(!(p[jd]||p[Ai]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var S=p.getAttribute(n)||"";S=i+S;var C=c.get(S);C?C.push(p):c.set(S,[p])}}return c}function $E(i,n,r){i=i.ownerDocument||i,i.head.insertBefore(r,n==="title"?i.querySelector("head > title"):null)}function GD(i,n,r){if(r===1||n.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return i=n.disabled,typeof n.precedence=="string"&&i==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function QE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function qD(i,n,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Bu(c.href),p=n.querySelector(Sf(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=ab.bind(i),n.then(i,i)),r.state.loading|=4,r.instance=p,ui(p);return}p=n.ownerDocument||n,c=XE(c),(f=oa.get(f))&&Wv(c,f),p=p.createElement("link"),ui(p);var S=p;S._p=new Promise(function(C,L){S.onload=C,S.onerror=L}),Ei(p,"link",c),r.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=ab.bind(i),n.addEventListener("load",r),n.addEventListener("error",r))}}var Qv=0;function VD(i,n){return i.stylesheets&&i.count===0&&rb(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var c=setTimeout(function(){if(i.stylesheets&&rb(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+n);0<i.imgBytes&&Qv===0&&(Qv=62500*TD());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&rb(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>Qv?50:800)+n);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function ab(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rb(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var sb=null;function rb(i,n){i.stylesheets=null,i.unsuspend!==null&&(i.count++,sb=new Map,n.forEach(YD,i),sb=null,ab.call(i))}function YD(i,n){if(!(n.state.loading&4)){var r=sb.get(i);if(r)var c=r.get(null);else{r=new Map,sb.set(i,r);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var S=f[p];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),c=S)}c&&r.set(null,c)}f=n.instance,S=f.getAttribute("data-precedence"),p=r.get(S)||c,p===c&&r.set(null,f),r.set(S,f),this.count++,c=ab.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),n.state.loading|=4}}var wf={$$typeof:N,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function XD(i,n,r,c,f,p,S,C,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Y0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y0(0),this.hiddenUpdates=Y0(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function ZE(i,n,r,c,f,p,S,C,L,V,$,Z){return i=new XD(i,n,r,S,L,V,$,Z,C),n=1,p===!0&&(n|=24),p=En(3,null,null,n),i.current=p,p.stateNode=i,n=Ry(),n.refCount++,i.pooledCache=n,n.refCount++,p.memoizedState={element:c,isDehydrated:r,cache:n},Oy(p),i}function JE(i){return i?(i=fu,i):fu}function tT(i,n,r,c,f,p){f=JE(f),c.context===null?c.context=f:c.pendingContext=f,c=Yr(n),c.payload={element:r},p=p===void 0?null:p,p!==null&&(c.callback=p),r=Xr(i,c,n),r!==null&&(on(r,i,n),tf(r,i,n))}function eT(i,n){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<n?r:n}}function Zv(i,n){eT(i,n),(i=i.alternate)&&eT(i,n)}function iT(i){if(i.tag===13||i.tag===31){var n=go(i,67108864);n!==null&&on(n,i,67108864),Zv(i,67108864)}}function nT(i){if(i.tag===13||i.tag===31){var n=Dn();n=X0(n);var r=go(i,n);r!==null&&on(r,i,n),Zv(i,n)}}var lb=!0;function KD(i,n,r,c){var f=B.T;B.T=null;var p=P.p;try{P.p=2,Jv(i,n,r,c)}finally{P.p=p,B.T=f}}function WD(i,n,r,c){var f=B.T;B.T=null;var p=P.p;try{P.p=8,Jv(i,n,r,c)}finally{P.p=p,B.T=f}}function Jv(i,n,r,c){if(lb){var f=tA(c);if(f===null)Pv(i,n,c,ob,r),sT(i,c);else if(QD(f,i,n,r,c))c.stopPropagation();else if(sT(i,c),n&4&&-1<$D.indexOf(i)){for(;f!==null;){var p=iu(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var S=co(p.pendingLanes);if(S!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var L=1<<31-xn(S);C.entanglements[1]|=L,S&=~L}Qa(p),(Qt&6)===0&&(qp=Ve()+500,bf(0))}}break;case 31:case 13:C=go(p,2),C!==null&&on(C,p,2),Yp(),Zv(p,2)}if(p=tA(c),p===null&&Pv(i,n,c,ob,r),p===f)break;f=p}f!==null&&c.stopPropagation()}else Pv(i,n,c,null,r)}}function tA(i){return i=iy(i),eA(i)}var ob=null;function eA(i){if(ob=null,i=eu(i),i!==null){var n=o(i);if(n===null)i=null;else{var r=n.tag;if(r===13){if(i=u(n),i!==null)return i;i=null}else if(r===31){if(i=h(n),i!==null)return i;i=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;i=null}else n!==i&&(i=null)}}return ob=i,null}function aT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qc()){case An:return 2;case Zc:return 8;case Jc:case Ya:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var iA=!1,al=null,sl=null,rl=null,Ef=new Map,Tf=new Map,ll=[],$D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sT(i,n){switch(i){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":Ef.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(n.pointerId)}}function _f(i,n,r,c,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:n,domEventName:r,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},n!==null&&(n=iu(n),n!==null&&iT(n)),i):(i.eventSystemFlags|=c,n=i.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),i)}function QD(i,n,r,c,f){switch(n){case"focusin":return al=_f(al,i,n,r,c,f),!0;case"dragenter":return sl=_f(sl,i,n,r,c,f),!0;case"mouseover":return rl=_f(rl,i,n,r,c,f),!0;case"pointerover":var p=f.pointerId;return Ef.set(p,_f(Ef.get(p)||null,i,n,r,c,f)),!0;case"gotpointercapture":return p=f.pointerId,Tf.set(p,_f(Tf.get(p)||null,i,n,r,c,f)),!0}return!1}function rT(i){var n=eu(i.target);if(n!==null){var r=o(n);if(r!==null){if(n=r.tag,n===13){if(n=u(r),n!==null){i.blockedOn=n,Ax(i.priority,function(){nT(r)});return}}else if(n===31){if(n=h(r),n!==null){i.blockedOn=n,Ax(i.priority,function(){nT(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cb(i){if(i.blockedOn!==null)return!1;for(var n=i.targetContainers;0<n.length;){var r=tA(i.nativeEvent);if(r===null){r=i.nativeEvent;var c=new r.constructor(r.type,r);ey=c,r.target.dispatchEvent(c),ey=null}else return n=iu(r),n!==null&&iT(n),i.blockedOn=r,!1;n.shift()}return!0}function lT(i,n,r){cb(i)&&r.delete(n)}function ZD(){iA=!1,al!==null&&cb(al)&&(al=null),sl!==null&&cb(sl)&&(sl=null),rl!==null&&cb(rl)&&(rl=null),Ef.forEach(lT),Tf.forEach(lT)}function ub(i,n){i.blockedOn===n&&(i.blockedOn=null,iA||(iA=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,ZD)))}var hb=null;function oT(i){hb!==i&&(hb=i,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){hb===i&&(hb=null);for(var n=0;n<i.length;n+=3){var r=i[n],c=i[n+1],f=i[n+2];if(typeof c!="function"){if(eA(c||r)===null)continue;break}var p=iu(r);p!==null&&(i.splice(n,3),n-=3,tv(p,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function ju(i){function n(L){return ub(L,i)}al!==null&&ub(al,i),sl!==null&&ub(sl,i),rl!==null&&ub(rl,i),Ef.forEach(n),Tf.forEach(n);for(var r=0;r<ll.length;r++){var c=ll[r];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ll.length&&(r=ll[0],r.blockedOn===null);)rT(r),r.blockedOn===null&&ll.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],p=r[c+1],S=f[en]||null;if(typeof p=="function")S||oT(r);else if(S){var C=null;if(p&&p.hasAttribute("formAction")){if(f=p,S=p[en]||null)C=S.formAction;else if(eA(f)!==null)continue}else C=S.action;typeof C=="function"?r[c+1]=C:(r.splice(c,3),c-=3),oT(r)}}}function cT(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(S){return f=S})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function nA(i){this._internalRoot=i}db.prototype.render=nA.prototype.render=function(i){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,c=Dn();tT(r,c,i,n,null,null)},db.prototype.unmount=nA.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var n=i.containerInfo;tT(i.current,2,null,i,null,null),Yp(),n[tu]=null}};function db(i){this._internalRoot=i}db.prototype.unstable_scheduleHydration=function(i){if(i){var n=vx();i={blockedOn:null,target:i,priority:n};for(var r=0;r<ll.length&&n!==0&&n<ll[r].priority;r++);ll.splice(r,0,i),r===0&&rT(i)}};var uT=t.version;if(uT!=="19.2.4")throw Error(a(527,uT,"19.2.4"));P.findDOMNode=function(i){var n=i._reactInternals;if(n===void 0)throw typeof i.render=="function"?Error(a(188)):(i=Object.keys(i).join(","),Error(a(268,i)));return i=m(n),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var JD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fb.isDisabled&&fb.supportsFiber)try{Od=fb.inject(JD),Sn=fb}catch{}}return Mf.createRoot=function(i,n){if(!s(i))throw Error(a(299));var r=!1,c="",f=b1,p=y1,S=v1;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=ZE(i,1,!1,null,null,r,c,null,f,p,S,cT),i[tu]=n.current,Fv(i),new nA(n)},Mf.hydrateRoot=function(i,n,r){if(!s(i))throw Error(a(299));var c=!1,f="",p=b1,S=y1,C=v1,L=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),n=ZE(i,1,!0,n,r??null,c,f,L,p,S,C,cT),n.context=JE(null),r=n.current,c=Dn(),c=X0(c),f=Yr(c),f.callback=null,Xr(r,f,c),r=c,n.current.lanes=r,zd(n,r),Qa(n),i[tu]=n.current,Fv(i),new db(n)},Mf.version="19.2.4",Mf}var AT;function vR(){if(AT)return rA.exports;AT=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),rA.exports=yR(),rA.exports}var AR=vR();const SR=r_(AR),xR=({children:g})=>{const t=sR(),e=rR(),[a,s]=et.useState(!1),o=[{to:"/family",label:"Ancestry",color:"text-blue-400"},{to:"/silsila",label:"Silsila",color:"text-emerald-400"},{to:"/guide",label:"Guide",color:"text-indigo-400"}],u=t.pathname==="/";return D.jsxs("div",{className:"flex flex-col h-full bg-[#020617] text-slate-200",children:[D.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 z-50 glass flex items-center justify-between px-4 md:px-8 shadow-2xl shadow-black/20",children:[D.jsxs("div",{className:"flex items-center gap-4",children:[!u&&D.jsx("button",{onClick:()=>e("/"),className:"p-2 -ml-2 text-slate-400 hover:text-white transition-colors",title:"Go Home",children:D.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),D.jsxs(Lf,{to:"/",className:"flex items-center gap-3 group",children:[D.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center font-bold text-white text-[10px] shadow-lg shadow-blue-900/50 group-hover:scale-105 transition-transform",children:"KT"}),D.jsxs("span",{className:"font-black text-white tracking-tight text-lg",children:["Legacy",D.jsx("span",{className:"text-blue-500",children:"Flow"})]})]})]}),D.jsx("nav",{className:"hidden md:flex items-center gap-1",children:o.map(h=>D.jsx(Lf,{to:h.to,className:`px-5 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${t.pathname===h.to?"bg-white/10 text-white border border-white/10":"text-slate-500 hover:text-white hover:bg-white/5 border border-transparent"}`,children:h.label},h.to))}),D.jsx("button",{onClick:()=>s(!0),className:"md:hidden p-2 text-slate-300 hover:text-white",children:D.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),a&&D.jsxs("div",{className:"fixed inset-0 z-[60] bg-[#020617] animate-in slide-in-from-right duration-300 flex flex-col",children:[D.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-white/5 shrink-0",children:[D.jsx("span",{className:"font-black text-slate-500 uppercase tracking-widest text-xs",children:"Menu"}),D.jsx("button",{onClick:()=>s(!1),className:"p-2 text-slate-400 hover:text-white",children:D.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),D.jsxs("div",{className:"flex-1 p-6 flex flex-col gap-4 overflow-y-auto",children:[D.jsxs(Lf,{to:"/",onClick:()=>s(!1),className:"flex items-center gap-4 p-4 rounded-2xl bg-white/5 border border-white/5",children:[D.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-800 flex items-center justify-center text-white",children:D.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),D.jsx("span",{className:"text-xl font-bold text-white",children:"Home"})]}),o.map(h=>D.jsxs(Lf,{to:h.to,onClick:()=>s(!1),className:`flex items-center gap-4 p-4 rounded-2xl border ${t.pathname===h.to?"bg-indigo-600/20 border-indigo-500/50":"bg-white/5 border-white/5"}`,children:[D.jsx("div",{className:`text-xl font-bold ${t.pathname===h.to?"text-indigo-400":"text-slate-300"}`,children:h.label}),t.pathname===h.to&&D.jsx("div",{className:"ml-auto w-2 h-2 rounded-full bg-indigo-500"})]},h.to))]}),D.jsx("div",{className:"p-6 text-center text-[10px] text-slate-600 font-medium",children:"Legacy Flow  2024"})]}),D.jsx("main",{className:"flex-1 pt-16 h-full relative overflow-hidden flex flex-col",children:g})]})};let cl=null;function wR(g){const t=atob(g),e=new Uint8Array(t.length);for(let a=0;a<t.length;a++)e[a]=t.charCodeAt(a);return e}async function ER(g,t,e){const a=new Int16Array(g.buffer,g.byteOffset,g.byteLength/2),s=t.createBuffer(1,a.length,e),o=s.getChannelData(0);for(let u=0;u<a.length;u++)o[u]=a[u]/32768;return s}async function YS(){cl||(cl=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),cl.state==="suspended"&&await cl.resume();const g=cl.createBuffer(1,1,22050),t=cl.createBufferSource();return t.buffer=g,t.connect(cl.destination),t.start(0),cl}function a0(g){return new Promise(t=>{if(!window.speechSynthesis)return t();window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(g),a=/[\u0600-\u06FF]/.test(g),s=window.speechSynthesis.getVoices();a?(e.voice=s.find(o=>o.lang.startsWith("ar"))||null,e.lang="ar-SA"):(e.voice=s.find(o=>o.lang.startsWith("en"))||null,e.lang="en-US"),e.rate=.9,e.onend=()=>{t()},e.onerror=()=>{t()},window.speechSynthesis.speak(e),setTimeout(t,8e3)})}async function TR(g,t){var e;try{return((e=(await new l_({apiKey:""}).models.generateContent({model:"gemini-3-flash-preview",contents:`Generate a short 2-sentence historical bio for ${g} (${t}).`})).text)==null?void 0:e.trim())||"Record preserved."}catch{return"Historical record remains preserved in the family archives."}}async function o_(g){var t,e,a,s,o,u;try{return((u=(o=(s=(a=(e=(t=(await new l_({apiKey:""}).models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:g}]}],config:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:t[0])==null?void 0:e.content)==null?void 0:a.parts)==null?void 0:s.find(m=>m.inlineData))==null?void 0:o.inlineData)==null?void 0:u.data)||null}catch{return null}}async function c_(g){const t=await YS(),e=wR(g),a=await ER(e,t,24e3);return new Promise(s=>{const o=t.createBufferSource();o.buffer=a,o.connect(t.destination),o.onended=()=>s(),o.start(0)})}const _R=({data:g,type:t,expandAll:e=!1,isPrinting:a=!1})=>{const s=et.useRef(null),o=et.useRef(null),u=et.useRef(null),[h,d]=et.useState(null),[m,b]=et.useState(!1),[y,v]=et.useState(!1),[x,_]=et.useState(!1),[T,R]=et.useState(""),[M,k]=et.useState(!0),N=et.useCallback((B,P)=>{const W={...B};if(W.isRevealed=P,B.children&&B.children.length>0){const at=B.children.map(pt=>N(pt,P));P?(W.children=at,W._children=null):(W._children=at,W.children=null)}else W._children=null,W.children=null;return W},[]),[O,z]=et.useState(()=>{const B=N(g,e);return B.isRevealed=!0,B}),[j,H]=et.useState(null);et.useEffect(()=>{const B=N(g,e);B.isRevealed=!0,z(B),d(B),b(!1),k(!0)},[g,N,e]);const U=et.useCallback((B,P,W)=>{if(!s.current||!o.current||!u.current)return;const at=o.current.clientWidth,pt=o.current.clientHeight,At=Fu(s.current),ot=uR(s.current),lt=W??ot.k,xt=gb.translate(at/2-B*lt,pt/2-P*lt).scale(lt);At.transition().duration(1e3).ease(dT).call(u.current.transform,xt)},[]),X=et.useCallback(()=>{if(!s.current||!o.current||!j||!u.current)return;const B=o.current.clientWidth,P=o.current.clientHeight,W=Fu(s.current),at=j.descendants(),pt=fT(at,xt=>xt.x)||0,At=mT(at,xt=>xt.x)||0,ot=fT(at,xt=>xt.y)||0,lt=mT(at,xt=>xt.y)||0;if(a){const zt=pt-40,qt=ot-40,Mt=At-pt+80,Be=lt-ot+80;!isNaN(zt)&&!isNaN(qt)&&!isNaN(Mt)&&!isNaN(Be)&&Mt>0&&Be>0&&(W.attr("viewBox",`${zt} ${qt} ${Mt} ${Be}`),W.attr("preserveAspectRatio","xMidYMin meet"),W.attr("width","100%"),W.attr("height","auto"),W.style("min-width","0"),W.style("max-height","none"),W.select("g.main-group").attr("transform","translate(0,0) scale(1)"))}else{W.attr("viewBox",null),W.attr("preserveAspectRatio",null),W.attr("height","100%"),W.attr("width","100%");const xt=At-pt+400,zt=lt-ot+400,qt=Math.min(B/xt,P/zt,1),Mt=gb.translate(B/2-(At+pt)/2*qt,100).scale(qt);W.call(u.current.transform,Mt)}},[j,a]),J=()=>{j&&U(j.x,j.y,1)},tt=()=>{if(!j)return;const B=j.descendants(),P=B.reduce((W,at)=>at.y>W.y?at:W,B[0]);U(P.x,P.y,1)},nt=et.useCallback(()=>{if(!s.current||!o.current)return;const B=o.current.clientWidth,P=o.current.clientHeight;if(B===0||P===0)return;const W=Fu(s.current);let at=W.select("g.main-group");if(at.empty()){at=W.append("g").attr("class","main-group");const dt=hR().scaleExtent([.1,2.5]).on("zoom",Te=>{at.attr("transform",Te.transform)});W.call(dt),u.current=dt}const pt={color:"#3b82f6",bg:"#1d4ed8"},At=B<768,ot=a?500:At?1200:1350,lt=a||At?250:400,zt=dR().nodeSize([ot,lt])(fR(O));if(H(zt),M){const dt=At?.3:.5,Te=gb.translate(B/2,P/3).scale(dt);W.call(u.current.transform,Te),k(!1)}const qt=zt.links(),Mt=at.selectAll(".link").data(qt,dt=>`${dt.source.data.id}-${dt.target.data.id}`);Mt.exit().remove(),Mt.enter().append("path").attr("class","link").merge(Mt).transition().duration(500).attr("d",dt=>`M${dt.source.x},${dt.source.y} C${dt.source.x},${(dt.source.y+dt.target.y)/2} ${dt.target.x},${(dt.source.y+dt.target.y)/2} ${dt.target.x},${dt.target.y}`).attr("fill","none").attr("stroke",pt.color).attr("stroke-width",At?4:6).attr("opacity",.3);const Be=zt.descendants(),qe=at.selectAll(".node").data(Be,dt=>dt.data.id);qe.exit().remove();const Re=qe.enter().append("g").attr("class","node").attr("transform",dt=>`translate(${dt.x}, ${dt.y})`).style("opacity",0).merge(qe);Re.transition().duration(a?0:500).attr("transform",dt=>`translate(${dt.x}, ${dt.y})`).style("opacity",1);const Vt=a?40:At?50:70,Kt=a?80:At?90:130,te=a?"20px":At?"28px":"36px",ee=a?"14px":At?"18px":"22px",ze=a?"11px":At?"14px":"16px";Re.each(function(dt){const Te=Fu(this);Te.selectAll("*").remove();const Va=dt.data.isRevealed;dt.data.spouse&&Te.append("line").attr("x1",-Kt).attr("x2",Kt).attr("y1",0).attr("y2",0).attr("stroke",pt.color).attr("stroke-width",4).attr("opacity",.4);const jr=(Ji,vn)=>{const tn=Ji==="main"?dt.data.name:dt.data.spouse,Ve=Te.append("g").attr("transform",`translate(${vn}, 0)`).on("click",Zc=>bt(Zc,dt,Ji)).style("cursor","pointer"),Qc=dt.data.children&&dt.data.children.length>0||dt.data._children&&dt.data._children.length>0;Ve.append("circle").attr("r",Vt).attr("fill",Va?Qc?pt.bg:"#1e293b":"#0f172a").attr("stroke",Va?pt.color:"#475569").attr("stroke-width",4).attr("class","node-circle shadow-xl");let An="?";Va&&(Ji==="main"?dt.data.role==="S"?An="S":dt.data.role==="D"?An="D":dt.data.role==="Root"?An="R":An=tn?tn.charAt(0):"?":dt.data.spouseRole==="W"?An="W":dt.data.spouseRole==="H"?An="H":An=tn?tn.charAt(0):"?"),Ve.append("text").attr("dy","0.35em").attr("text-anchor","middle").attr("fill","white").attr("font-size",te).attr("font-weight","900").attr("pointer-events","none").style("text-shadow","0 2px 4px rgba(0,0,0,0.5)").text(An),Qc&&Ji==="main"&&Ve.append("circle").attr("cy",Vt+15).attr("r",8).attr("fill",dt.data.children?pt.color:"#64748b")};if(jr("main",dt.data.spouse?-Kt:0),dt.data.spouse&&jr("spouse",Kt),Va){const Ji=dt.data.spouse?`${dt.data.name} & ${dt.data.spouse}`:dt.data.name;let vn=dt.data.role||"Descendant";vn==="S"?vn="Son":vn==="D"?vn="Daughter":vn==="Root"&&(vn="Root Ancestor");const tn=Vt+(At?50:65),Ve=tn+(At?22:28);Te.append("text").attr("dy",tn).attr("text-anchor","middle").attr("fill","#60a5fa").attr("font-size",ze).attr("font-weight","700").text(vn),Te.append("text").attr("dy",Ve).attr("text-anchor","middle").attr("fill","#f1f5f9").attr("font-size",ee).attr("font-weight","800").style("text-shadow","0 2px 4px rgba(0,0,0,0.8)").text(Ji)}})},[O,M,U,a]),bt=et.useCallback(async(B,P,W="main")=>{B.stopPropagation(),P.data.children?(P.data._children=P.data.children,P.data.children=null):P.data._children&&(P.data.children=P.data._children,P.data._children=null,P.data.isRevealed=!0,P.data.children&&P.data.children.forEach(At=>{At.isRevealed=!0}),P.parent&&P.parent.children&&P.parent.children.forEach(At=>{const ot=At.data;ot.id!==P.data.id&&ot.children&&(ot._children=ot.children,ot.children=null)})),z({...O}),d(P.data),b(W==="spouse"),R(""),U(P.x,P.y,.9),_(!0);const at=W==="spouse"?P.data.spouse:P.data.name,pt=W==="spouse"?P.data.spouseRole:P.data.role;if(at)try{const At=await TR(at,pt||"");R(At)}catch{R("History record available in archives.")}_(!1)},[U,O]);et.useEffect(()=>{nt();const B=new ResizeObserver(()=>nt());return o.current&&B.observe(o.current),()=>B.disconnect()},[nt,O,a]);const st=et.useCallback(()=>{if(!s.current||!o.current||!u.current)return;const B=o.current.clientWidth,P=o.current.clientHeight,W=Fu(s.current),at=B<768;W.attr("viewBox",null),W.attr("preserveAspectRatio",null),W.attr("height","100%"),W.attr("width","100%");const pt=at?.3:.5,At=gb.translate(B/2,P/3).scale(pt);W.transition().duration(1e3).ease(dT).call(u.current.transform,At)},[]);et.useEffect(()=>{if(a){const B=setTimeout(()=>{X()},100);return()=>clearTimeout(B)}else{Fu(s.current).attr("height","100%");const P=setTimeout(()=>{st()},100);return()=>clearTimeout(P)}},[a,X,st]);const gt=m?{name:h==null?void 0:h.spouse,urduName:"",image:h==null?void 0:h.spouseImage}:{name:h==null?void 0:h.name,urduName:h==null?void 0:h.urduName,image:h==null?void 0:h.image};return D.jsxs("div",{className:`w-full bg-[radial-gradient(circle_at_center,_#0f172a_0%,_#020617_100%)] print:bg-white print:bg-none ${a?"block static h-auto overflow-visible":"h-full relative overflow-hidden"}`,children:[D.jsx("div",{ref:o,className:`w-full ${a?"block static h-auto":"h-full absolute inset-0"}`,children:D.jsx("svg",{ref:s,className:`w-full cursor-grab active:cursor-grabbing ${a?"block h-auto overflow-visible":"h-full"}`,style:{touchAction:"none"}})}),D.jsxs("div",{className:"absolute bottom-6 left-6 md:bottom-8 md:left-8 flex flex-col gap-3 z-10 pointer-events-auto",children:[D.jsx("button",{onClick:J,className:"w-12 h-12 flex items-center justify-center glass rounded-2xl border border-white/10 text-blue-400 hover:bg-blue-600 hover:text-white transition-all shadow-xl bg-slate-900/80",title:"Jump to Top",children:D.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),D.jsx("button",{onClick:tt,className:"w-12 h-12 flex items-center justify-center glass rounded-2xl border border-white/10 text-emerald-400 hover:bg-emerald-600 hover:text-white transition-all shadow-xl bg-slate-900/80",title:"Jump to Bottom",children:D.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]}),h&&D.jsxs("div",{className:`absolute right-0 top-0 bottom-0 md:w-[400px] w-full z-40 transition-transform duration-500 ease-in-out flex ${y?"translate-x-0":"translate-x-full"}`,children:[D.jsx("div",{className:"absolute left-0 top-1/2 -translate-x-full -translate-y-1/2 flex items-center",children:D.jsxs("button",{onClick:()=>v(!y),className:"flex items-center gap-2 px-4 py-6 bg-slate-900/90 border border-white/10 backdrop-blur-xl rounded-l-3xl shadow-[-10px_0_30px_rgba(0,0,0,0.5)] group hover:bg-blue-600 transition-colors",children:[D.jsx("div",{className:`transition-transform duration-500 ${y?"rotate-180":"rotate-0"}`,children:D.jsx("svg",{className:"w-5 h-5 text-blue-400 group-hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15 19l-7-7 7-7"})})}),!y&&D.jsx("span",{className:"[writing-mode:vertical-lr] text-[10px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white whitespace-nowrap",children:"Show Details"})]})}),D.jsxs("div",{className:"w-full bg-slate-900/95 md:bg-slate-900/90 backdrop-blur-2xl border-l border-white/10 h-full p-6 overflow-y-auto flex flex-col gap-6 shadow-2xl",children:[D.jsxs("div",{className:"flex justify-between items-start",children:[D.jsxs("div",{className:"flex-1",children:[D.jsx("h3",{className:"text-xl font-black text-white",children:gt.name}),D.jsx("p",{className:"text-[10px] text-blue-500 font-bold uppercase tracking-widest",children:"Selected Record"})]}),D.jsx("button",{onClick:()=>v(!1),className:"p-2 text-slate-400 hover:text-white transition-colors",children:D.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),D.jsx("div",{className:"w-full aspect-square rounded-2xl overflow-hidden border-2 border-slate-700 bg-slate-800 shadow-xl shrink-0 max-h-64 md:max-h-80",children:D.jsx("img",{src:gt.image||`https://picsum.photos/seed/${gt.name}/400/400`,className:"w-full h-full object-cover",alt:gt.name})}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"text-3xl font-black text-white leading-tight",children:gt.name}),gt.urduName&&D.jsx("p",{className:"text-2xl font-serif text-blue-400 rtl leading-tight mt-2",children:gt.urduName})]}),D.jsxs("div",{className:"p-5 bg-black/40 rounded-2xl border border-white/5 text-sm text-slate-300 leading-relaxed",children:[D.jsx("h4",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-3 border-b border-white/5 pb-2",children:"Archives Insight"}),x?D.jsxs("div",{className:"animate-pulse space-y-2",children:[D.jsx("div",{className:"h-2 bg-slate-700 rounded w-3/4"}),D.jsx("div",{className:"h-2 bg-slate-700 rounded"})]}):D.jsx("p",{children:T||"No record available in current scroll."})]})]})]})]})]})},Wi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),AA=[.001,0,0,.001,0,0],cA=1.35,Kn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Es={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},im="pdfjs_internal_editor_",Tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},u_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ti={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},em={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ke={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Hu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qg={ERRORS:0,WARNINGS:1,INFOS:5},Md={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},pb={moveTo:0,lineTo:1,curveTo:2,closePath:3},h_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let z0=qg.WARNINGS;function CR(g){Number.isInteger(g)&&(z0=g)}function MR(){return z0}function j0(g){z0>=qg.INFOS&&console.info(`Info: ${g}`)}function _t(g){z0>=qg.WARNINGS&&console.warn(`Warning: ${g}`)}function ve(g){throw new Error(g)}function Gt(g,t){g||ve(t)}function DR(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function XS(g,t=null,e=null){if(!g)return null;if(e&&typeof g=="string"){if(e.addDefaultProtocol&&g.startsWith("www.")){const s=g.match(/\./g);(s==null?void 0:s.length)>=2&&(g=`http://${g}`)}if(e.tryConvertEncoding)try{g=OR(g)}catch{}}const a=t?URL.parse(g,t):URL.parse(g);return DR(a)?a:null}function KS(g,t,e=!1){const a=URL.parse(g);return a?(a.hash=t,a.href):e&&XS(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function kt(g,t,e,a=!1){return Object.defineProperty(g,t,{value:e,enumerable:!a,configurable:!0,writable:!1}),e}const Wc=(function(){function t(e,a){this.message=e,this.name=a}return t.prototype=new Error,t.constructor=t,t})();class ST extends Wc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class uA extends Wc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class s0 extends Wc{constructor(t){super(t,"InvalidPDFException")}}class nm extends Wc{constructor(t,e,a){super(t,"ResponseException"),this.status=e,this.missing=a}}class RR extends Wc{constructor(t){super(t,"FormatError")}}class Lr extends Wc{constructor(t){super(t,"AbortException")}}function d_(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&ve("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const a=[];for(let s=0;s<t;s+=e){const o=Math.min(s+e,t),u=g.subarray(s,o);a.push(String.fromCharCode.apply(null,u))}return a.join("")}function Vg(g){typeof g!="string"&&ve("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let a=0;a<t;++a)e[a]=g.charCodeAt(a)&255;return e}function NR(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function kR(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function LR(){try{return new Function(""),!0}catch{return!1}}class vi{static get isLittleEndian(){return kt(this,"isLittleEndian",kR())}static get isEvalSupported(){return kt(this,"isEvalSupported",LR())}static get isOffscreenCanvasSupported(){return kt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return kt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return kt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return kt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const hA=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var Nr,_b,SA;class ht{static makeHexColor(t,e,a){return`#${hA[t]}${hA[e]}${hA[a]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let a;t[0]?(t[0]<0&&(a=e[0],e[0]=e[2],e[2]=a),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(a=e[1],e[1]=e[3],e[3]=a),e[1]*=t[3],e[3]*=t[3]):(a=e[0],e[0]=e[1],e[1]=a,a=e[2],e[2]=e[3],e[3]=a,t[1]<0&&(a=e[1],e[1]=e[3],e[3]=a),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(a=e[0],e[0]=e[2],e[2]=a),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,a=0){const s=t[a],o=t[a+1];t[a]=s*e[0]+o*e[2]+e[4],t[a+1]=s*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,a=0){const s=e[0],o=e[1],u=e[2],h=e[3],d=e[4],m=e[5];for(let b=0;b<6;b+=2){const y=t[a+b],v=t[a+b+1];t[a+b]=y*s+v*u+d,t[a+b+1]=y*o+v*h+m}}static applyInverseTransform(t,e){const a=t[0],s=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(a*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-a*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,a){const s=e[0],o=e[1],u=e[2],h=e[3],d=e[4],m=e[5],b=t[0],y=t[1],v=t[2],x=t[3];let _=s*b+d,T=_,R=s*v+d,M=R,k=h*y+m,N=k,O=h*x+m,z=O;if(o!==0||u!==0){const j=o*b,H=o*v,U=u*y,X=u*x;_+=U,M+=U,R+=X,T+=X,k+=j,z+=j,O+=H,N+=H}a[0]=Math.min(a[0],_,R,T,M),a[1]=Math.min(a[1],k,O,N,z),a[2]=Math.max(a[2],_,R,T,M),a[3]=Math.max(a[3],k,O,N,z)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const a=t[0],s=t[1],o=t[2],u=t[3],h=a**2+s**2,d=a*o+s*u,m=o**2+u**2,b=(h+m)/2,y=Math.sqrt(b**2-(h*m-d**2));e[0]=Math.sqrt(b+y||1),e[1]=Math.sqrt(b-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const a=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(a>s)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[a,o,s,u]}static pointBoundingBox(t,e,a){a[0]=Math.min(a[0],t),a[1]=Math.min(a[1],e),a[2]=Math.max(a[2],t),a[3]=Math.max(a[3],e)}static rectBoundingBox(t,e,a,s,o){o[0]=Math.min(o[0],t,a),o[1]=Math.min(o[1],e,s),o[2]=Math.max(o[2],t,a),o[3]=Math.max(o[3],e,s)}static bezierBoundingBox(t,e,a,s,o,u,h,d,m){m[0]=Math.min(m[0],t,h),m[1]=Math.min(m[1],e,d),m[2]=Math.max(m[2],t,h),m[3]=Math.max(m[3],e,d),E(this,Nr,SA).call(this,t,a,o,h,e,s,u,d,3*(-t+3*(a-o)+h),6*(t-2*a+o),3*(a-t),m),E(this,Nr,SA).call(this,t,a,o,h,e,s,u,d,3*(-e+3*(s-u)+d),6*(e-2*s+u),3*(s-e),m)}}Nr=new WeakSet,_b=function(t,e,a,s,o,u,h,d,m,b){if(m<=0||m>=1)return;const y=1-m,v=m*m,x=v*m,_=y*(y*(y*t+3*m*e)+3*v*a)+x*s,T=y*(y*(y*o+3*m*u)+3*v*h)+x*d;b[0]=Math.min(b[0],_),b[1]=Math.min(b[1],T),b[2]=Math.max(b[2],_),b[3]=Math.max(b[3],T)},SA=function(t,e,a,s,o,u,h,d,m,b,y,v){if(Math.abs(m)<1e-12){Math.abs(b)>=1e-12&&E(this,Nr,_b).call(this,t,e,a,s,o,u,h,d,-y/b,v);return}const x=b**2-4*y*m;if(x<0)return;const _=Math.sqrt(x),T=2*m;E(this,Nr,_b).call(this,t,e,a,s,o,u,h,d,(-b+_)/T,v),E(this,Nr,_b).call(this,t,e,a,s,o,u,h,d,(-b-_)/T,v)},w(ht,Nr);function OR(g){return decodeURIComponent(escape(g))}let dA=null,xT=null;function f_(g){return dA||(dA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xT=new Map([["","t"]])),g.replaceAll(dA,(t,e,a)=>e?e.normalize("NFKC"):xT.get(a))}function WS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),d_(g)}const $S="pdfjs_internal_id_";function BR(g,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[a,s,...o]=e;if(!g(a)&&!Number.isInteger(a)||!t(s))return!1;const u=o.length;let h=!0;switch(s.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Ui(g,t,e){return Math.min(Math.max(g,t),e)}function m_(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(d_(g))}function zR(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):Vg(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...t){return new Promise(e=>{e(g(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,e)=>t+e,0)});class am{static textContent(t){const e=[],a={items:e,styles:Object.create(null)};function s(o){var d;if(!o)return;let u=null;const h=o.name;if(h==="#text")u=o.value;else if(am.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const m of o.children)s(m)}return s(t),a}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class QS{static setupStorage(t,e,a,s,o){const u=s.getValue(e,{value:null});switch(a.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",h=>{s.setValue(e,{value:h.target.value})});break;case"input":if(a.attributes.type==="radio"||a.attributes.type==="checkbox"){if(u.value===a.attributes.xfaOn?t.setAttribute("checked",!0):u.value===a.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{s.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",h=>{s.setValue(e,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of a.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,m=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(e,{value:m})});break}}static setAttributes({html:t,element:e,storage:a=null,intent:s,linkService:o}){const{attributes:u}=e,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${s}`);for(const[d,m]of Object.entries(u))if(m!=null)switch(d){case"class":m.length&&t.setAttribute(d,m.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",m);break;case"style":Object.assign(t.style,m);break;case"textContent":t.textContent=m;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,m)}h&&o.addLinkAttributes(t,u.href,u.newWindow),a&&u.dataId&&this.setupStorage(t,u.dataId,e,a)}static render(t){var y,v;const e=t.annotationStorage,a=t.linkService,s=t.xfaHtml,o=t.intent||"display",u=document.createElement(s.name);s.attributes&&this.setAttributes({html:u,element:s,intent:o,linkService:a});const h=o!=="richText",d=t.div;if(d.append(u),t.viewport){const x=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=x}h&&d.setAttribute("class","xfaLayer xfaFont");const m=[];if(s.children.length===0){if(s.value){const x=document.createTextNode(s.value);u.append(x),h&&am.shouldBuildText(s.name)&&m.push(x)}return{textDivs:m}}const b=[[s,-1,u]];for(;b.length>0;){const[x,_,T]=b.at(-1);if(_+1===x.children.length){b.pop();continue}const R=x.children[++b.at(-1)[1]];if(R===null)continue;const{name:M}=R;if(M==="#text"){const N=document.createTextNode(R.value);m.push(N),T.append(N);continue}const k=(y=R==null?void 0:R.attributes)!=null&&y.xmlns?document.createElementNS(R.attributes.xmlns,M):document.createElement(M);if(T.append(k),R.attributes&&this.setAttributes({html:k,element:R,storage:e,intent:o,linkService:a}),((v=R.children)==null?void 0:v.length)>0)b.push([R,-1,k]);else if(R.value){const N=document.createTextNode(R.value);h&&am.shouldBuildText(M)&&m.push(N),k.append(N)}}for(const x of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:m}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ys="http://www.w3.org/2000/svg",ko=class ko{};it(ko,"CSS",96),it(ko,"PDF",72),it(ko,"PDF_TO_CSS_UNITS",ko.CSS/ko.PDF);let Or=ko;async function Nd(g,t="text"){if(Of(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,a)=>{const s=new XMLHttpRequest;s.open("GET",g,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}a(new Error(s.statusText))}},s.send(null)})}class Yg{constructor({viewBox:t,userUnit:e,scale:a,rotation:s,offsetX:o=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=a,this.rotation=s,this.offsetX=o,this.offsetY=u,a*=e;const d=(t[2]+t[0])/2,m=(t[3]+t[1])/2;let b,y,v,x;switch(s%=360,s<0&&(s+=360),s){case 180:b=-1,y=0,v=0,x=1;break;case 90:b=0,y=1,v=1,x=0;break;case 270:b=0,y=-1,v=-1,x=0;break;case 0:b=1,y=0,v=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,x=-x);let _,T,R,M;b===0?(_=Math.abs(m-t[1])*a+o,T=Math.abs(d-t[0])*a+u,R=(t[3]-t[1])*a,M=(t[2]-t[0])*a):(_=Math.abs(d-t[0])*a+o,T=Math.abs(m-t[1])*a+u,R=(t[2]-t[0])*a,M=(t[3]-t[1])*a),this.transform=[b*a,y*a,v*a,x*a,_-b*a*d-v*a*m,T-y*a*d-x*a*m],this.width=R,this.height=M}get rawDims(){const t=this.viewBox;return kt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:a=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new Yg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:a,offsetY:s,dontFlip:o})}convertToViewportPoint(t,e){const a=[t,e];return ht.applyTransform(a,this.transform),a}convertToViewportRectangle(t){const e=[t[0],t[1]];ht.applyTransform(e,this.transform);const a=[t[2],t[3]];return ht.applyTransform(a,this.transform),[e[0],e[1],a[0],a[1]]}convertToPdfPoint(t,e){const a=[t,e];return ht.applyInverseTransform(a,this.transform),a}}class F0 extends Wc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Xg(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function P0(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function g_(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function p_(g,t="document.pdf"){if(typeof g!="string")return t;if(Xg(g))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const a=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(g);if(!a)return t;const s=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,u=a.pathname.split("/").at(-1);if(o.test(u))return s(u);if(a.searchParams.size>0){const h=Array.from(a.searchParams.values()).reverse();for(const m of h)if(o.test(m))return s(m);const d=Array.from(a.searchParams.keys()).reverse();for(const m of d)if(o.test(m))return s(m)}if(a.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(a.hash);if(d)return s(d[0])}return t}class wT{constructor(){it(this,"started",Object.create(null));it(this,"times",[])}time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:a}of this.times)e=Math.max(a.length,e);for(const{name:a,start:s,end:o}of this.times)t.push(`${a.padEnd(e)} ${o-s}ms
`);return t.join("")}}function Of(g,t){const e=t?URL.parse(g,t):URL.parse(g);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Zn(g){g.preventDefault()}function Le(g){g.preventDefault(),g.stopPropagation()}function jR(g){console.log("Deprecated API usage: "+g)}var um;class sm{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,um)||A(this,um,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,um).exec(t);if(!e)return null;const a=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const m=e[7]||"Z";let b=parseInt(e[8],10);b=b>=0&&b<=23?b:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,m==="-"?(u+=b,h+=y):m==="+"&&(u-=b,h-=y),new Date(Date.UTC(a,s,o,u,h,d))}}um=new WeakMap,w(sm,um);function b_(g,{scale:t=1,rotation:e=0}){const{width:a,height:s}=g.attributes.style,o=[0,0,parseInt(a),parseInt(s)];return new Yg({viewBox:o,userUnit:1,scale:t,rotation:e})}function kd(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${g}"`),[0,0,0])}function FR(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of g.keys()){t.style.color=e;const a=window.getComputedStyle(t).color;g.set(e,kd(a))}t.remove()}function ke(g){const{a:t,b:e,c:a,d:s,e:o,f:u}=g.getTransform();return[t,e,a,s,o,u]}function Za(g){const{a:t,b:e,c:a,d:s,e:o,f:u}=g.getTransform().invertSelf();return[t,e,a,s,o,u]}function so(g,t,e=!1,a=!0){if(t instanceof Yg){const{pageWidth:s,pageHeight:o}=t.rawDims,{style:u}=g,h=vi.isCSSRoundSupported,d=`var(--total-scale-factor) * ${s}px`,m=`var(--total-scale-factor) * ${o}px`,b=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!e||t.rotation%180===0?(u.width=b,u.height=y):(u.width=y,u.height=b)}a&&g.setAttribute("data-main-rotation",t.rotation)}class Ga{constructor(){const{pixelRatio:t}=Ga;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,a,s,o=-1){let u=1/0,h=1/0,d=1/0;a=Ga.capPixels(a,o),a>0&&(u=Math.sqrt(a/(t*e))),s!==-1&&(h=s/t,d=s/e);const m=Math.min(u,h,d);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const a=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,a):a}return t}}const r0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class PR{static get isDarkMode(){var t;return kt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class y_{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:a}=window.getComputedStyle(t);return t.remove(),kt(this,"commentForegroundColor",kd(a))}}function v_(g,t,e,a){a=Math.min(Math.max(a??1,0),1);const s=255*(1-a);return g=Math.round(g*a+s),t=Math.round(t*a+s),e=Math.round(e*a+s),[g,t,e]}function ET(g,t){const e=g[0]/255,a=g[1]/255,s=g[2]/255,o=Math.max(e,a,s),u=Math.min(e,a,s),h=(o+u)/2;if(o===u)t[0]=t[1]=0;else{const d=o-u;switch(t[1]=h<.5?d/(o+u):d/(2-o-u),o){case e:t[0]=((a-s)/d+(a<s?6:0))*60;break;case a:t[0]=((s-e)/d+2)*60;break;case s:t[0]=((e-a)/d+4)*60;break}}t[2]=h}function xA(g,t){const e=g[0],a=g[1],s=g[2],o=(1-Math.abs(2*s-1))*a,u=o*(1-Math.abs(e/60%2-1)),h=s-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=u+h,t[2]=h;break;case 1:t[0]=u+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=u+h;break;case 3:t[0]=h,t[1]=u+h,t[2]=o+h;break;case 4:t[0]=u+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=u+h;break}}function TT(g){return g<=.03928?g/12.92:((g+.055)/1.055)**2.4}function _T(g,t,e){xA(g,e),e.map(TT);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];xA(t,e),e.map(TT);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return a>s?(a+.05)/(s+.05):(s+.05)/(a+.05)}const CT=new Map;function A_(g,t){const e=g[0]+g[1]*256+g[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let a=CT.get(e);if(a)return a;const s=new Float32Array(9),o=s.subarray(0,3),u=s.subarray(3,6);ET(g,u);const h=s.subarray(6,9);ET(t,h);const d=h[2]<.5,m=d?12:4.5;if(u[2]=d?Math.sqrt(u[2]):1-Math.sqrt(1-u[2]),_T(u,h,o)<m){let b,y;d?(b=u[2],y=1):(b=0,y=u[2]);const v=.005;for(;y-b>v;){const x=u[2]=(b+y)/2;d===_T(u,h,o)<m?b=x:y=x}u[2]=d?y:b}return xA(u,o),a=ht.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),CT.set(e,a),a}function ZS({html:g,dir:t,className:e},a){const s=document.createDocumentFragment();if(typeof g=="string"){const o=document.createElement("p");o.dir=t||"auto";const u=g.split(/(?:\r\n?|\n)/);for(let h=0,d=u.length;h<d;++h){const m=u[h];o.append(document.createTextNode(m)),h<d-1&&o.append(document.createElement("br"))}s.append(o)}else QS.render({xfaHtml:g,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),a.append(s)}var hl,dl,ha,da,hm,fl,ih,nh,dm,b0,S_,Li,x_,w_,Uu,Bf;const Ws=class Ws{constructor(t){w(this,Li);w(this,hl,null);w(this,dl,null);w(this,ha);w(this,da,null);w(this,hm,null);w(this,fl,null);w(this,ih,null);w(this,nh,null);A(this,ha,t),l(Ws,dm)||A(Ws,dm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,hl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,ha)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Zn,{signal:e}),t.addEventListener("pointerdown",E(Ws,b0,S_),{signal:e}));const a=A(this,da,document.createElement("div"));a.className="buttons",t.append(a);const s=l(this,ha).toolbarPosition;if(s){const{style:o}=t,u=l(this,ha)._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,hl)}hide(){var t;l(this,hl).classList.add("hidden"),(t=l(this,dl))==null||t.hideDropdown()}show(){var t,e;l(this,hl).classList.remove("hidden"),(t=l(this,hm))==null||t.shown(),(e=l(this,fl))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,ha),a=document.createElement("button");a.classList.add("basic","deleteButton"),a.tabIndex=0,a.setAttribute("data-l10n-id",l(Ws,dm)[t]),E(this,Li,Uu).call(this,a)&&a.addEventListener("click",s=>{e.delete()},{signal:e._signal}),l(this,da).append(a)}async addAltText(t){const e=await t.render();E(this,Li,Uu).call(this,e),l(this,da).append(e,l(this,Li,Bf)),A(this,hm,t)}addComment(t,e=null){if(l(this,fl))return;const a=t.renderForToolbar();if(!a)return;E(this,Li,Uu).call(this,a);const s=A(this,ih,l(this,Li,Bf));e?(l(this,da).insertBefore(a,e),l(this,da).insertBefore(s,e)):l(this,da).append(a,s),A(this,fl,t),t.toolbar=this}addColorPicker(t){if(l(this,dl))return;A(this,dl,t);const e=t.renderButton();E(this,Li,Uu).call(this,e),l(this,da).append(e,l(this,Li,Bf))}async addEditSignatureButton(t){const e=A(this,nh,await t.renderEditButton(l(this,ha)));E(this,Li,Uu).call(this,e),l(this,da).append(e,l(this,Li,Bf))}removeButton(t){var e,a;switch(t){case"comment":(e=l(this,fl))==null||e.removeToolbarCommentButton(),A(this,fl,null),(a=l(this,ih))==null||a.remove(),A(this,ih,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,a){const s=l(this,da).querySelector(a);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){l(this,nh)&&(l(this,nh).title=t)}remove(){var t;l(this,hl).remove(),(t=l(this,dl))==null||t.destroy(),A(this,dl,null)}};hl=new WeakMap,dl=new WeakMap,ha=new WeakMap,da=new WeakMap,hm=new WeakMap,fl=new WeakMap,ih=new WeakMap,nh=new WeakMap,dm=new WeakMap,b0=new WeakSet,S_=function(t){t.stopPropagation()},Li=new WeakSet,x_=function(t){l(this,ha)._focusEventsAllowed=!1,Le(t)},w_=function(t){l(this,ha)._focusEventsAllowed=!0,Le(t)},Uu=function(t){const e=l(this,ha)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",E(this,Li,x_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,Li,w_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zn,{signal:e}),!0)},Bf=function(){const t=document.createElement("div");return t.className="divider",t},w(Ws,b0),w(Ws,dm,null);let wA=Ws;var fm,Bo,Qs,Br,E_,T_,EA;class HR{constructor(t){w(this,Br);w(this,fm,null);w(this,Bo,null);w(this,Qs);A(this,Qs,t)}show(t,e,a){const[s,o]=E(this,Br,T_).call(this,e,a),{style:u}=l(this,Bo)||A(this,Bo,E(this,Br,E_).call(this));t.append(l(this,Bo)),u.insetInlineEnd=`${100*s}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Bo).remove()}}fm=new WeakMap,Bo=new WeakMap,Qs=new WeakMap,Br=new WeakSet,E_=function(){const t=A(this,Bo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Qs)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Zn,{signal:e});const a=A(this,fm,document.createElement("div"));return a.className="buttons",t.append(a),l(this,Qs).hasCommentManager()&&E(this,Br,EA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Qs).commentSelection("floating_button")}),E(this,Br,EA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Qs).highlightSelection("floating_button")}),t},T_=function(t,e){let a=0,s=0;for(const o of t){const u=o.y+o.height;if(u<a)continue;const h=o.x+(e?o.width:0);if(u>a){s=h,a=u;continue}e?h>s&&(s=h):h<s&&(s=h)}return[e?1-s:s,a]},EA=function(t,e,a,s){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const u=document.createElement("span");o.append(u),u.className="visuallyHidden",u.setAttribute("data-l10n-id",a);const h=l(this,Qs)._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",Zn,{signal:h}),o.addEventListener("click",s,{signal:h})),l(this,fm).append(o)};function __(g,t,e){for(const a of e)t.addEventListener(a,g[a].bind(g))}var y0;class UR{constructor(){w(this,y0,0)}get id(){return`${im}${si(this,y0)._++}`}}y0=new WeakMap;var ah,mm,Bi,sh,Cb;const ux=class ux{constructor(){w(this,sh);w(this,ah,WS());w(this,mm,0);w(this,Bi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',a=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const o=s.decode().then(()=>(a.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(a.getImageData(0,0,1,1).data.buffer)[0]===0));return kt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:a,size:s,type:o}=t;return E(this,sh,Cb).call(this,`${e}_${a}_${s}_${o}`,t)}async getFromUrl(t){return E(this,sh,Cb).call(this,t,t)}async getFromBlob(t,e){const a=await e;return E(this,sh,Cb).call(this,t,a)}async getFromId(t){l(this,Bi)||A(this,Bi,new Map);const e=l(this,Bi).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:a}=e;return delete e.blobPromise,this.getFromBlob(e.id,a)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Bi)||A(this,Bi,new Map);let a=l(this,Bi).get(t);if(a!=null&&a.bitmap)return a.refCounter+=1,a;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),a={bitmap:s.transferToImageBitmap(),id:`image_${l(this,ah)}_${si(this,mm)._++}`,refCounter:1,isSvg:!1},l(this,Bi).set(t,a),l(this,Bi).set(a.id,a),a}getSvgUrl(t){const e=l(this,Bi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;l(this,Bi)||A(this,Bi,new Map);const e=l(this,Bi).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:a}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(a.width,a.height);o.getContext("bitmaprenderer").transferFromImageBitmap(a),e.blobPromise=o.convertToBlob()}(s=a.close)==null||s.call(a),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,ah)}_`)}};ah=new WeakMap,mm=new WeakMap,Bi=new WeakMap,sh=new WeakSet,Cb=async function(t,e){l(this,Bi)||A(this,Bi,new Map);let a=l(this,Bi).get(t);if(a===null)return null;if(a!=null&&a.bitmap)return a.refCounter+=1,a;try{a||(a={bitmap:null,id:`image_${l(this,ah)}_${si(this,mm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(a.url=e,s=await Nd(e,"blob")):e instanceof File?s=a.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const o=ux._isSVGFittingCanvas,u=new FileReader,h=new Image,d=new Promise((m,b)=>{h.onload=()=>{a.bitmap=h,a.isSvg=!0,m()},u.onload=async()=>{const y=a.svgUrl=u.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=b});u.readAsDataURL(s),await d}else a.bitmap=await createImageBitmap(s);a.refCounter=1}catch(s){_t(s),a=null}return l(this,Bi).set(t,a),a&&l(this,Bi).set(a.id,a),a};let TA=ux;var We,ml,gm,Ne;class IR{constructor(t=128){w(this,We,[]);w(this,ml,!1);w(this,gm);w(this,Ne,-1);A(this,gm,t)}add({cmd:t,undo:e,post:a,mustExec:s,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(s&&t(),l(this,ml))return;const d={cmd:t,undo:e,post:a,type:o};if(l(this,Ne)===-1){l(this,We).length>0&&(l(this,We).length=0),A(this,Ne,0),l(this,We).push(d);return}if(u&&l(this,We)[l(this,Ne)].type===o){h&&(d.undo=l(this,We)[l(this,Ne)].undo),l(this,We)[l(this,Ne)]=d;return}const m=l(this,Ne)+1;m===l(this,gm)?l(this,We).splice(0,1):(A(this,Ne,m),m<l(this,We).length&&l(this,We).splice(m)),l(this,We).push(d)}undo(){if(l(this,Ne)===-1)return;A(this,ml,!0);const{undo:t,post:e}=l(this,We)[l(this,Ne)];t(),e==null||e(),A(this,ml,!1),A(this,Ne,l(this,Ne)-1)}redo(){if(l(this,Ne)<l(this,We).length-1){A(this,Ne,l(this,Ne)+1),A(this,ml,!0);const{cmd:t,post:e}=l(this,We)[l(this,Ne)];t(),e==null||e(),A(this,ml,!1)}}hasSomethingToUndo(){return l(this,Ne)!==-1}hasSomethingToRedo(){return l(this,Ne)<l(this,We).length-1}cleanType(t){if(l(this,Ne)!==-1){for(let e=l(this,Ne);e>=0;e--)if(l(this,We)[e].type!==t){l(this,We).splice(e+1,l(this,Ne)-e),A(this,Ne,e);return}l(this,We).length=0,A(this,Ne,-1)}}destroy(){A(this,We,null)}}We=new WeakMap,ml=new WeakMap,gm=new WeakMap,Ne=new WeakMap;var v0,C_;class Kg{constructor(t){w(this,v0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=vi.platform;for(const[a,s,o={}]of t)for(const u of a){const h=u.startsWith("mac+");e&&h?(this.callbacks.set(u.slice(4),{callback:s,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!h&&(this.callbacks.set(u,{callback:s,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const a=this.callbacks.get(E(this,v0,C_).call(this,e));if(!a)return;const{callback:s,options:{bubbles:o=!1,args:u=[],checker:h=null}}=a;h&&!h(t,e)||(s.bind(t,...u,e)(),o||Le(e))}}v0=new WeakSet,C_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const A0=class A0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return FR(t),kt(this,"_colors",t)}convert(t){const e=kd(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[a,s]of this._colors)if(s.every((o,u)=>o===e[u]))return A0._colorsMapping.get(a);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}};it(A0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _A=A0;var rh,Nn,lh,Pe,li,oh,fa,ch,ma,zi,gl,pl,uh,bl,es,ga,zo,pm,bm,hh,ym,is,yl,dh,vl,ns,S0,Al,fh,vm,Sl,jo,mh,xl,Am,ii,ae,Zs,wl,El,Sm,gh,xm,Tl,as,Js,wm,Em,pa,rt,Mb,CA,M_,D_,zf,R_,N_,k_,MA,L_,DA,RA,O_,qi,Xs,B_,z_,NA,j_,jf,kA;const Wu=class Wu{constructor(t,e,a,s,o,u,h,d,m,b,y,v,x,_,T,R){w(this,rt);w(this,rh,new AbortController);w(this,Nn,null);w(this,lh,null);w(this,Pe,new Map);w(this,li,new Map);w(this,oh,null);w(this,fa,null);w(this,ch,null);w(this,ma,new IR);w(this,zi,null);w(this,gl,null);w(this,pl,null);w(this,uh,0);w(this,bl,new Set);w(this,es,null);w(this,ga,null);w(this,zo,new Set);it(this,"_editorUndoBar",null);w(this,pm,!1);w(this,bm,!1);w(this,hh,!1);w(this,ym,null);w(this,is,null);w(this,yl,null);w(this,dh,null);w(this,vl,!1);w(this,ns,null);w(this,S0,new UR);w(this,Al,!1);w(this,fh,!1);w(this,vm,!1);w(this,Sl,null);w(this,jo,null);w(this,mh,null);w(this,xl,null);w(this,Am,null);w(this,ii,Tt.NONE);w(this,ae,new Set);w(this,Zs,null);w(this,wl,null);w(this,El,null);w(this,Sm,null);w(this,gh,null);w(this,xm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Tl,[0,0]);w(this,as,null);w(this,Js,null);w(this,wm,null);w(this,Em,null);w(this,pa,null);const M=this._signal=l(this,rh).signal;A(this,Js,t),A(this,wm,e),A(this,Em,a),A(this,oh,s),A(this,zi,o),A(this,wl,u),A(this,gh,d),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:M}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:M}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:M}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:M}),h._on("setpreference",this.onSetPreference.bind(this),{signal:M}),h._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:M}),window.addEventListener("pointerdown",()=>{A(this,fh,!0)},{capture:!0,signal:M}),window.addEventListener("pointerup",()=>{A(this,fh,!1)},{capture:!0,signal:M}),E(this,rt,R_).call(this),E(this,rt,O_).call(this),E(this,rt,MA).call(this),A(this,fa,d.annotationStorage),A(this,ym,d.filterFactory),A(this,El,m),A(this,dh,b||null),A(this,pm,y),A(this,bm,v),A(this,hh,x),A(this,Am,_||null),this.viewParameters={realScale:Or.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=T||null,this._supportsPinchToZoom=R!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Wu.prototype,e=u=>l(u,Js).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),a=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return kt(this,"_keyboardManager",new Kg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],t.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:a}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&l(u,Js).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&l(u,Js).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,a,s,o,u,h,d,m;(t=l(this,pa))==null||t.resolve(),A(this,pa,null),(e=l(this,rh))==null||e.abort(),A(this,rh,null),this._signal=null;for(const b of l(this,li).values())b.destroy();l(this,li).clear(),l(this,Pe).clear(),l(this,zo).clear(),(a=l(this,xl))==null||a.clear(),A(this,Nn,null),l(this,ae).clear(),l(this,ma).destroy(),(s=l(this,oh))==null||s.destroy(),(o=l(this,zi))==null||o.destroy(),(u=l(this,wl))==null||u.destroy(),(h=l(this,ns))==null||h.hide(),A(this,ns,null),(d=l(this,mh))==null||d.destroy(),A(this,mh,null),A(this,lh,null),l(this,is)&&(clearTimeout(l(this,is)),A(this,is,null)),l(this,as)&&(clearTimeout(l(this,as)),A(this,as,null)),(m=this._editorUndoBar)==null||m.destroy(),A(this,gh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,Am)}get useNewAltTextFlow(){return l(this,bm)}get useNewAltTextWhenAddingImage(){return l(this,hh)}get hcmFilter(){return kt(this,"hcmFilter",l(this,El)?l(this,ym).addHCMFilter(l(this,El).foreground,l(this,El).background):"none")}get direction(){return kt(this,"direction",getComputedStyle(l(this,Js)).direction)}get _highlightColors(){return kt(this,"_highlightColors",l(this,dh)?new Map(l(this,dh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return kt(this,"highlightColors",null);const e=new Map,a=!!l(this,El);for(const[s,o]of t){const u=s.endsWith("_HCM");if(a&&u){e.set(s.replace("_HCM",""),o);continue}!a&&!u&&e.set(s,o)}return kt(this,"highlightColors",e)}get highlightColorNames(){return kt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,pl,t)}setMainHighlightColorPicker(t){A(this,mh,t)}editAltText(t,e=!1){var a;(a=l(this,oh))==null||a.editAltText(this,t,e)}hasCommentManager(){return!!l(this,zi)}editComment(t,e,a,s){var o;(o=l(this,zi))==null||o.showDialog(this,t,e,a,s)}selectComment(t,e){const a=l(this,li).get(t),s=a==null?void 0:a.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=l(this,zi))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=l(this,zi))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=l(this,zi))==null||e.removeComments([t.uid])}toggleComment(t,e,a=void 0){var s;(s=l(this,zi))==null||s.toggleCommentPopup(t,e,a)}makeCommentColor(t,e){var a;return t&&((a=l(this,zi))==null?void 0:a.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=l(this,zi))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(l(this,li).has(t-1))return;const{resolve:e,promise:a}=Promise.withResolvers(),s=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await a}getSignature(t){var e;(e=l(this,wl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,wl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,hh,e);break}}onPageChanging({pageNumber:t}){A(this,uh,t-1)}focusMainContainer(){l(this,Js).focus()}findParent(t,e){for(const a of l(this,li).values()){const{x:s,y:o,width:u,height:h}=a.div.getBoundingClientRect();if(t>=s&&t<=s+u&&e>=o&&e<=o+h)return a}return null}disableUserSelect(t=!1){l(this,wm).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,zo).add(t)}removeShouldRescale(t){l(this,zo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Or.PDF_TO_CSS_UNITS;for(const a of l(this,zo))a.onScaleChanging();(e=l(this,pl))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const a=document.getSelection();if(!a||a.isCollapsed)return;const{anchorNode:s,anchorOffset:o,focusNode:u,focusOffset:h}=a,d=a.toString(),b=E(this,rt,Mb).call(this,a).closest(".textLayer"),y=this.getSelectionBoxes(b);if(!y)return;a.empty();const v=E(this,rt,CA).call(this,b),x=l(this,ii)===Tt.NONE,_=()=>{const T=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:s,anchorOffset:o,focusNode:u,focusOffset:h,text:d});x&&this.showAllEditors("highlight",!0,!0),e&&(T==null||T.editComment())};if(x){this.switchToMode(Tt.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,fa))return null;const e=`${im}${t}`,a=l(this,fa).getRawValue(e);return a&&l(this,fa).remove(e),a}addToAnnotationStorage(t){!t.isEmpty()&&l(this,fa)&&!l(this,fa).has(t.id)&&l(this,fa).setValue(t.id,t)}a11yAlert(t,e=null){const a=l(this,Em);a&&(a.setAttribute("data-l10n-id",t),e?a.setAttribute("data-l10n-args",JSON.stringify(e)):a.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,vl)&&(A(this,vl,!1),E(this,rt,zf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,ae))if(e.div.contains(t)){A(this,jo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,jo))return;const[t,e]=l(this,jo);A(this,jo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,rt,MA).call(this),E(this,rt,DA).call(this)}removeEditListeners(){E(this,rt,L_).call(this),E(this,rt,RA).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const a of l(this,ga))if(a.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const a of l(this,ga))if(a.isHandlingMimeForPasting(e.type)){a.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var a;if(t.preventDefault(),(a=l(this,Nn))==null||a.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of l(this,ae)){const o=s.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of l(this,ga))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let a=e.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(o){_t(`paste: "${o.message}".`);return}if(!Array.isArray(a))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const d of a){const m=await s.deserialize(d);if(!m)return;o.push(m)}const u=()=>{for(const d of o)E(this,rt,NA).call(this,d);E(this,rt,kA).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(o){_t(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,ii)!==Tt.NONE&&!this.isEditorHandlingKeyboard&&Wu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,vl)&&(A(this,vl,!1),E(this,rt,zf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(E(this,rt,N_).call(this),E(this,rt,DA).call(this),E(this,rt,qi).call(this,{isEditing:l(this,ii)!==Tt.NONE,isEmpty:E(this,rt,jf).call(this),hasSomethingToUndo:l(this,ma).hasSomethingToUndo(),hasSomethingToRedo:l(this,ma).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,rt,k_).call(this),E(this,rt,RA).call(this),E(this,rt,qi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,ga)){A(this,ga,t);for(const e of l(this,ga))E(this,rt,Xs).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,S0).id}get currentLayer(){return l(this,li).get(l(this,uh))}getLayer(t){return l(this,li).get(t)}get currentPageIndex(){return l(this,uh)}addLayer(t){l(this,li).set(t.pageIndex,t),l(this,Al)?t.enable():t.disable()}removeLayer(t){l(this,li).delete(t.pageIndex)}async updateMode(t,e=null,a=!1,s=!1,o=!1){var u,h,d,m,b,y;if(l(this,ii)!==t&&!(l(this,pa)&&(await l(this,pa).promise,!l(this,pa)))){if(A(this,pa,Promise.withResolvers()),(u=l(this,pl))==null||u.commitOrRemove(),l(this,ii)===Tt.POPUP&&((h=l(this,zi))==null||h.hideSidebar()),(d=l(this,zi))==null||d.destroyPopup(),A(this,ii,t),t===Tt.NONE){this.setEditingState(!1),E(this,rt,z_).call(this);for(const v of l(this,Pe).values())v.hideStandaloneCommentButton();(m=this._editorUndoBar)==null||m.hide(),this.toggleComment(null),l(this,pa).resolve();return}for(const v of l(this,Pe).values())v.addStandaloneCommentButton();t===Tt.SIGNATURE&&await((b=l(this,wl))==null?void 0:b.loadSignatures()),this.setEditingState(!0),await E(this,rt,B_).call(this),this.unselectAll();for(const v of l(this,li).values())v.updateMode(t);if(t===Tt.POPUP){l(this,lh)||A(this,lh,await l(this,gh).getAnnotationsByType(new Set(l(this,ga).map(_=>_._editorType))));const v=new Set,x=[];for(const _ of l(this,Pe).values()){const{annotationElementId:T,hasComment:R,deleted:M}=_;T&&v.add(T),R&&!M&&x.push(_.getData())}for(const _ of l(this,lh)){const{id:T,popupRef:R,contentsObj:M}=_;R&&(M!=null&&M.str)&&!v.has(T)&&!l(this,bl).has(T)&&x.push(_)}(y=l(this,zi))==null||y.showSidebar(x)}if(!e){a&&this.addNewEditorFromKeyboard(),l(this,pa).resolve();return}for(const v of l(this,Pe).values())v.uid===e?(this.setSelected(v),o?v.editComment():s?v.enterInEditMode():v.focus()):v.unselect();l(this,pa).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,ii)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,ga)){switch(t){case Ut.CREATE:this.currentLayer.addNewEditor(e);return;case Ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Sm)||A(this,Sm,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const a of l(this,ae))a.updateParams(t,e);else for(const a of l(this,ga))a.updateDefaultParams(t,e)}}showAllEditors(t,e,a=!1){var o;for(const u of l(this,Pe).values())u.editorType===t&&u.show(e);(((o=l(this,Sm))==null?void 0:o.get(Ut.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,rt,Xs).call(this,[[Ut.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,vm)!==t){A(this,vm,t);for(const e of l(this,li).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,Pe).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,Pe).get(t)}addEditor(t){l(this,Pe).set(t.id,t)}removeEditor(t){var e,a;t.div.contains(document.activeElement)&&(l(this,is)&&clearTimeout(l(this,is)),A(this,is,setTimeout(()=>{this.focusMainContainer(),A(this,is,null)},0))),l(this,Pe).delete(t.id),t.annotationElementId&&((e=l(this,xl))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,bl).has(t.annotationElementId))&&((a=l(this,fa))==null||a.remove(t.id))}addDeletedAnnotationElement(t){l(this,bl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,bl).has(t)}removeDeletedAnnotationElement(t){l(this,bl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Nn)!==t&&(A(this,Nn,t),t&&E(this,rt,Xs).call(this,t.propertiesToUpdate))}updateUI(t){l(this,rt,j_)===t&&E(this,rt,Xs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,rt,Xs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,ae).has(t)){l(this,ae).delete(t),t.unselect(),E(this,rt,qi).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ae).add(t),t.select(),E(this,rt,Xs).call(this,t.propertiesToUpdate),E(this,rt,qi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=l(this,pl))==null||e.commitOrRemove();for(const a of l(this,ae))a!==t&&a.unselect();l(this,ae).clear(),l(this,ae).add(t),t.select(),E(this,rt,Xs).call(this,t.propertiesToUpdate),E(this,rt,qi).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,ae).has(t)}get firstSelectedEditor(){return l(this,ae).values().next().value}unselect(t){t.unselect(),l(this,ae).delete(t),E(this,rt,qi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ae).size!==0}get isEnterHandled(){return l(this,ae).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,ma).undo(),E(this,rt,qi).call(this,{hasSomethingToUndo:l(this,ma).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,rt,jf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,ma).redo(),E(this,rt,qi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ma).hasSomethingToRedo(),isEmpty:E(this,rt,jf).call(this)})}addCommands(t){l(this,ma).add(t),E(this,rt,qi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,rt,jf).call(this)})}cleanUndoStack(t){l(this,ma).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,ae)],a=()=>{var u;(u=this._editorUndoBar)==null||u.show(s,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},s=()=>{for(const u of e)E(this,rt,NA).call(this,u)};this.addCommands({cmd:a,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=l(this,Nn))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,Nn)||this.hasSelection}selectAll(){for(const t of l(this,ae))t.commit();E(this,rt,kA).call(this,l(this,Pe).values())}unselectAll(){var t;if(!(l(this,Nn)&&(l(this,Nn).commitOrRemove(),l(this,ii)!==Tt.NONE))&&!((t=l(this,pl))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,ae))e.unselect();l(this,ae).clear(),E(this,rt,qi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;l(this,Tl)[0]+=t,l(this,Tl)[1]+=e;const[s,o]=l(this,Tl),u=[...l(this,ae)],h=1e3;l(this,as)&&clearTimeout(l(this,as)),A(this,as,setTimeout(()=>{A(this,as,null),l(this,Tl)[0]=l(this,Tl)[1]=0,this.addCommands({cmd:()=>{for(const d of u)l(this,Pe).has(d.id)&&(d.translateInPage(s,o),d.translationDone())},undo:()=>{for(const d of u)l(this,Pe).has(d.id)&&(d.translateInPage(-s,-o),d.translationDone())},mustExec:!1})},h));for(const d of u)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,es,new Map);for(const t of l(this,ae))l(this,es).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,es))return!1;this.disableUserSelect(!1);const t=l(this,es);A(this,es,null);let e=!1;for(const[{x:s,y:o,pageIndex:u},h]of t)h.newX=s,h.newY=o,h.newPageIndex=u,e||(e=s!==h.savedX||o!==h.savedY||u!==h.savedPageIndex);if(!e)return!1;const a=(s,o,u,h)=>{if(l(this,Pe).has(s.id)){const d=l(this,li).get(h);d?s._setParentAndPosition(d,o,u):(s.pageIndex=h,s.x=o,s.y=u)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:u,newPageIndex:h}]of t)a(s,o,u,h)},undo:()=>{for(const[s,{savedX:o,savedY:u,savedPageIndex:h}]of t)a(s,o,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,es))for(const a of l(this,es).keys())a.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,ae).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Nn)===t}getActive(){return l(this,Nn)}getMode(){return l(this,ii)}isEditingMode(){return l(this,ii)!==Tt.NONE}get imageManager(){return kt(this,"imageManager",new TA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let m=0,b=e.rangeCount;m<b;m++)if(!t.contains(e.getRangeAt(m).commonAncestorContainer))return null;const{x:a,y:s,width:o,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(m,b,y,v)=>({x:(b-s)/u,y:1-(m+y-a)/o,width:v/u,height:y/o});break;case"180":h=(m,b,y,v)=>({x:1-(m+y-a)/o,y:1-(b+v-s)/u,width:y/o,height:v/u});break;case"270":h=(m,b,y,v)=>({x:1-(b+v-s)/u,y:(m-a)/o,width:v/u,height:y/o});break;default:h=(m,b,y,v)=>({x:(m-a)/o,y:(b-s)/u,width:y/o,height:v/u});break}const d=[];for(let m=0,b=e.rangeCount;m<b;m++){const y=e.getRangeAt(m);if(!y.collapsed)for(const{x:v,y:x,width:_,height:T}of y.getClientRects())_===0||T===0||d.push(h(v,x,_,T))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,ch)||A(this,ch,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,ch))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=l(this,ch))==null?void 0:s.get(t.data.id);if(!e)return;const a=l(this,fa).getRawValue(e);a&&(l(this,ii)===Tt.NONE&&!a.hasBeenModified||a.renderAnnotationElement(t))}setMissingCanvas(t,e,a){var o;const s=(o=l(this,xl))==null?void 0:o.get(t);s&&(s.setCanvas(e,a),l(this,xl).delete(t))}addMissingCanvas(t,e){(l(this,xl)||A(this,xl,new Map)).set(t,e)}};rh=new WeakMap,Nn=new WeakMap,lh=new WeakMap,Pe=new WeakMap,li=new WeakMap,oh=new WeakMap,fa=new WeakMap,ch=new WeakMap,ma=new WeakMap,zi=new WeakMap,gl=new WeakMap,pl=new WeakMap,uh=new WeakMap,bl=new WeakMap,es=new WeakMap,ga=new WeakMap,zo=new WeakMap,pm=new WeakMap,bm=new WeakMap,hh=new WeakMap,ym=new WeakMap,is=new WeakMap,yl=new WeakMap,dh=new WeakMap,vl=new WeakMap,ns=new WeakMap,S0=new WeakMap,Al=new WeakMap,fh=new WeakMap,vm=new WeakMap,Sl=new WeakMap,jo=new WeakMap,mh=new WeakMap,xl=new WeakMap,Am=new WeakMap,ii=new WeakMap,ae=new WeakMap,Zs=new WeakMap,wl=new WeakMap,El=new WeakMap,Sm=new WeakMap,gh=new WeakMap,xm=new WeakMap,Tl=new WeakMap,as=new WeakMap,Js=new WeakMap,wm=new WeakMap,Em=new WeakMap,pa=new WeakMap,rt=new WeakSet,Mb=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},CA=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const a of l(this,li).values())if(a.hasTextLayer(t))return a;return null},M_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const a=E(this,rt,Mb).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(a);s&&(l(this,ns)||A(this,ns,new HR(this)),l(this,ns).show(a,s,this.direction==="ltr"))},D_=function(){var o,u,h;const t=document.getSelection();if(!t||t.isCollapsed){l(this,Zs)&&((o=l(this,ns))==null||o.hide(),A(this,Zs,null),E(this,rt,qi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,Zs))return;const s=E(this,rt,Mb).call(this,t).closest(".textLayer");if(!s){l(this,Zs)&&((u=l(this,ns))==null||u.hide(),A(this,Zs,null),E(this,rt,qi).call(this,{hasSelectedText:!1}));return}if((h=l(this,ns))==null||h.hide(),A(this,Zs,e),E(this,rt,qi).call(this,{hasSelectedText:!0}),!(l(this,ii)!==Tt.HIGHLIGHT&&l(this,ii)!==Tt.NONE)&&(l(this,ii)===Tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,vl,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,ii)===Tt.HIGHLIGHT?E(this,rt,CA).call(this,s):null;if(d==null||d.toggleDrawing(),l(this,fh)){const m=new AbortController,b=this.combinedSignal(m),y=v=>{v.type==="pointerup"&&v.button!==0||(m.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&E(this,rt,zf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("blur",y,{signal:b})}else d==null||d.toggleDrawing(!0),E(this,rt,zf).call(this,"main_toolbar")}},zf=function(t=""){l(this,ii)===Tt.HIGHLIGHT?this.highlightSelection(t):l(this,pm)&&E(this,rt,M_).call(this)},R_=function(){document.addEventListener("selectionchange",E(this,rt,D_).bind(this),{signal:this._signal})},N_=function(){if(l(this,yl))return;A(this,yl,new AbortController);const t=this.combinedSignal(l(this,yl));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},k_=function(){var t;(t=l(this,yl))==null||t.abort(),A(this,yl,null)},MA=function(){if(l(this,Sl))return;A(this,Sl,new AbortController);const t=this.combinedSignal(l(this,Sl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},L_=function(){var t;(t=l(this,Sl))==null||t.abort(),A(this,Sl,null)},DA=function(){if(l(this,gl))return;A(this,gl,new AbortController);const t=this.combinedSignal(l(this,gl));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},RA=function(){var t;(t=l(this,gl))==null||t.abort(),A(this,gl,null)},O_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},qi=function(t){Object.entries(t).some(([a,s])=>l(this,xm)[a]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,xm),t)}),l(this,ii)===Tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,rt,Xs).call(this,[[Ut.HIGHLIGHT_FREE,!0]]))},Xs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},B_=async function(){if(!l(this,Al)){A(this,Al,!0);const t=[];for(const e of l(this,li).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Pe).values())e.enable()}},z_=function(){if(this.unselectAll(),l(this,Al)){A(this,Al,!1);for(const t of l(this,li).values())t.disable();for(const t of l(this,Pe).values())t.disable()}},NA=function(t){const e=l(this,li).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},j_=function(){let t=null;for(t of l(this,ae));return t},jf=function(){if(l(this,Pe).size===0)return!0;if(l(this,Pe).size===1)for(const t of l(this,Pe).values())return t.isEmpty();return!1},kA=function(t){for(const e of l(this,ae))e.unselect();l(this,ae).clear();for(const e of t)e.isEmpty()||(l(this,ae).add(e),e.select());E(this,rt,qi).call(this,{hasSelectedEditor:this.hasSelection})},it(Wu,"TRANSLATE_SMALL",1),it(Wu,"TRANSLATE_BIG",10);let ro=Wu;var di,ss,Ra,ph,rs,kn,bh,ls,hn,tr,Fo,os,_l,Ia,Ff,Db;const Vi=class Vi{constructor(t){w(this,Ia);w(this,di,null);w(this,ss,!1);w(this,Ra,null);w(this,ph,null);w(this,rs,null);w(this,kn,null);w(this,bh,!1);w(this,ls,null);w(this,hn,null);w(this,tr,null);w(this,Fo,null);w(this,os,!1);A(this,hn,t),A(this,os,t._uiManager.useNewAltTextFlow),l(Vi,_l)||A(Vi,_l,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Vi._l10n??(Vi._l10n=t)}async render(){const t=A(this,Ra,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,ph,document.createElement("span"));t.append(e),l(this,os)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Vi,_l).missing),e.setAttribute("data-l10n-id",l(Vi,_l)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const a=l(this,hn)._uiManager._signal;t.addEventListener("contextmenu",Zn,{signal:a}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:a});const s=o=>{o.preventDefault(),l(this,hn)._uiManager.editAltText(l(this,hn)),l(this,os)&&l(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Ia,Ff)}})};return t.addEventListener("click",s,{capture:!0,signal:a}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,bh,!0),s(o))},{signal:a}),await E(this,Ia,Db).call(this),t}finish(){l(this,Ra)&&(l(this,Ra).focus({focusVisible:l(this,bh)}),A(this,bh,!1))}isEmpty(){return l(this,os)?l(this,di)===null:!l(this,di)&&!l(this,ss)}hasData(){return l(this,os)?l(this,di)!==null||!!l(this,tr):this.isEmpty()}get guessedText(){return l(this,tr)}async setGuessedText(t){l(this,di)===null&&(A(this,tr,t),A(this,Fo,await Vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Ia,Db).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,os)||l(this,di)){(e=l(this,ls))==null||e.remove(),A(this,ls,null);return}if(!l(this,ls)){const a=A(this,ls,document.createElement("div"));a.className="noAltTextBadge",l(this,hn).div.append(a)}l(this,ls).classList.toggle("hidden",!t)}serialize(t){let e=l(this,di);return!t&&l(this,tr)===e&&(e=l(this,Fo)),{altText:e,decorative:l(this,ss),guessedText:l(this,tr),textWithDisclaimer:l(this,Fo)}}get data(){return{altText:l(this,di),decorative:l(this,ss)}}set data({altText:t,decorative:e,guessedText:a,textWithDisclaimer:s,cancel:o=!1}){a&&(A(this,tr,a),A(this,Fo,s)),!(l(this,di)===t&&l(this,ss)===e)&&(o||(A(this,di,t),A(this,ss,e)),E(this,Ia,Db).call(this))}toggle(t=!1){l(this,Ra)&&(!t&&l(this,kn)&&(clearTimeout(l(this,kn)),A(this,kn,null)),l(this,Ra).disabled=!t)}shown(){l(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Ia,Ff)}})}destroy(){var t,e;(t=l(this,Ra))==null||t.remove(),A(this,Ra,null),A(this,ph,null),A(this,rs,null),(e=l(this,ls))==null||e.remove(),A(this,ls,null)}};di=new WeakMap,ss=new WeakMap,Ra=new WeakMap,ph=new WeakMap,rs=new WeakMap,kn=new WeakMap,bh=new WeakMap,ls=new WeakMap,hn=new WeakMap,tr=new WeakMap,Fo=new WeakMap,os=new WeakMap,_l=new WeakMap,Ia=new WeakSet,Ff=function(){return l(this,di)&&"added"||l(this,di)===null&&this.guessedText&&"review"||"missing"},Db=async function(){var s,o,u;const t=l(this,Ra);if(!t)return;if(l(this,os)){if(t.classList.toggle("done",!!l(this,di)),t.setAttribute("data-l10n-id",l(Vi,_l)[l(this,Ia,Ff)]),(s=l(this,ph))==null||s.setAttribute("data-l10n-id",l(Vi,_l)[`${l(this,Ia,Ff)}-label`]),!l(this,di)){(o=l(this,rs))==null||o.remove();return}}else{if(!l(this,di)&&!l(this,ss)){t.classList.remove("done"),(u=l(this,rs))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,rs);if(!e){A(this,rs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,hn).id}`;const h=100,d=l(this,hn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,kn)),A(this,kn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,kn,setTimeout(()=>{A(this,kn,null),l(this,rs).classList.add("show"),l(this,hn)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),t.addEventListener("mouseleave",()=>{var m;l(this,kn)&&(clearTimeout(l(this,kn)),A(this,kn,null)),(m=l(this,rs))==null||m.classList.remove("show")},{signal:d})}l(this,ss)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,di)),e.parentNode||t.append(e);const a=l(this,hn).getElementForAltText();a==null||a.setAttribute("aria-describedby",e.id)},w(Vi,_l,null),it(Vi,"_l10n",null);let l0=Vi;var _i,ba,Po,Ae,Tm,Ho,Na,Uo,Io,Go,_m,LA;class bb{constructor(t){w(this,_m);w(this,_i,null);w(this,ba,null);w(this,Po,!1);w(this,Ae,null);w(this,Tm,null);w(this,Ho,null);w(this,Na,null);w(this,Uo,null);w(this,Io,!1);w(this,Go,null);A(this,Ae,t)}renderForToolbar(){const t=A(this,ba,document.createElement("button"));return t.className="comment",E(this,_m,LA).call(this,t,!1)}renderForStandalone(){const t=A(this,_i,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,Ae).commentButtonPosition;if(e){const{style:a}=t;a.insetInlineEnd=`calc(${100*(l(this,Ae)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,a.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=l(this,Ae).commentButtonColor;s&&(a.backgroundColor=s)}return E(this,_m,LA).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=l(this,_i)??l(this,ba))==null||t.focus()},0)}onUpdatedColor(){if(!l(this,_i))return;const t=l(this,Ae).commentButtonColor;t&&(l(this,_i).style.backgroundColor=t),l(this,Ae)._uiManager.updatePopupColor(l(this,Ae))}get commentButtonWidth(){var t;return(((t=l(this,_i))==null?void 0:t.getBoundingClientRect().width)??0)/l(this,Ae).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Go))return l(this,Go);if(!l(this,_i))return null;const{x:t,y:e,height:a}=l(this,_i).getBoundingClientRect(),{x:s,y:o,width:u,height:h}=l(this,Ae).parent.boundingClientRect;return[(t-s)/u,(e+a-o)/h]}set commentPopupPositionInLayer(t){A(this,Go,t)}hasDefaultPopupPosition(){return l(this,Go)===null}removeStandaloneCommentButton(){var t;(t=l(this,_i))==null||t.remove(),A(this,_i,null)}removeToolbarCommentButton(){var t;(t=l(this,ba))==null||t.remove(),A(this,ba,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,_i)&&(l(this,_i).classList.toggle("selected",t),l(this,_i).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let a,s;if(e)[a,s]=e;else{[a,s]=l(this,Ae).commentButtonPosition;const{width:b,height:y,x:v,y:x}=l(this,Ae);a=v+a*b,s=x+s*y}const o=l(this,Ae).parent.boundingClientRect,{x:u,y:h,width:d,height:m}=o;l(this,Ae)._uiManager.editComment(l(this,Ae),u+a*d,h+s*m,{...t,parentDimensions:o})}finish(){l(this,ba)&&(l(this,ba).focus({focusVisible:l(this,Po)}),A(this,Po,!1))}isDeleted(){return l(this,Io)||l(this,Na)===""}isEmpty(){return l(this,Na)===null}hasBeenEdited(){return this.isDeleted()||l(this,Na)!==l(this,Tm)}serialize(){return this.data}get data(){return{text:l(this,Na),richText:l(this,Ho),date:l(this,Uo),deleted:this.isDeleted()}}set data(t){if(t!==l(this,Na)&&A(this,Ho,null),t===null){A(this,Na,""),A(this,Io,!0);return}A(this,Na,t),A(this,Uo,new Date),A(this,Io,!1)}setInitialText(t,e=null){A(this,Tm,t),this.data=t,A(this,Uo,null),A(this,Ho,e)}shown(){}destroy(){var t,e;(t=l(this,ba))==null||t.remove(),A(this,ba,null),(e=l(this,_i))==null||e.remove(),A(this,_i,null),A(this,Na,""),A(this,Ho,null),A(this,Uo,null),A(this,Ae,null),A(this,Po,!1),A(this,Io,!1)}}_i=new WeakMap,ba=new WeakMap,Po=new WeakMap,Ae=new WeakMap,Tm=new WeakMap,Ho=new WeakMap,Na=new WeakMap,Uo=new WeakMap,Io=new WeakMap,Go=new WeakMap,_m=new WeakSet,LA=function(t,e){if(!l(this,Ae)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,Ae)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const a=l(this,Ae)._uiManager._signal;if(!(a instanceof AbortSignal)||a.aborted)return t;t.addEventListener("contextmenu",Zn,{signal:a}),e&&(t.addEventListener("focusin",o=>{l(this,Ae)._focusEventsAllowed=!1,Le(o)},{capture:!0,signal:a}),t.addEventListener("focusout",o=>{l(this,Ae)._focusEventsAllowed=!0,Le(o)},{capture:!0,signal:a})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:a});const s=o=>{o.preventDefault(),t===l(this,ba)?this.edit():l(this,Ae).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:a}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,Po,!0),s(o))},{signal:a}),t.addEventListener("pointerenter",()=>{l(this,Ae).toggleComment(!1,!0)},{signal:a}),t.addEventListener("pointerleave",()=>{l(this,Ae).toggleComment(!1,!1)},{signal:a}),t};var yh,qo,Cm,Mm,Dm,Rm,Nm,er,Vo,ir,Yo,nr,lo,F_,P_,H_;const hx=class hx{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:a=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:u=null,signal:h}){w(this,lo);w(this,yh);w(this,qo,!1);w(this,Cm,null);w(this,Mm);w(this,Dm);w(this,Rm);w(this,Nm);w(this,er,null);w(this,Vo);w(this,ir,null);w(this,Yo);w(this,nr,null);A(this,yh,t),A(this,Cm,a),A(this,Mm,e),A(this,Dm,s),A(this,Rm,o),A(this,Nm,u),A(this,Yo,new AbortController),A(this,Vo,AbortSignal.any([h,l(this,Yo).signal])),t.addEventListener("touchstart",E(this,lo,F_).bind(this),{passive:!1,signal:l(this,Vo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ga.pixelRatio}destroy(){var t,e;(t=l(this,Yo))==null||t.abort(),A(this,Yo,null),(e=l(this,er))==null||e.abort(),A(this,er,null)}};yh=new WeakMap,qo=new WeakMap,Cm=new WeakMap,Mm=new WeakMap,Dm=new WeakMap,Rm=new WeakMap,Nm=new WeakMap,er=new WeakMap,Vo=new WeakMap,ir=new WeakMap,Yo=new WeakMap,nr=new WeakMap,lo=new WeakSet,F_=function(t){var s,o,u;if((s=l(this,Mm))!=null&&s.call(this))return;if(t.touches.length===1){if(l(this,er))return;const h=A(this,er,new AbortController),d=AbortSignal.any([l(this,Vo),h.signal]),m=l(this,yh),b={capture:!0,signal:d,passive:!1},y=v=>{var x;v.pointerType==="touch"&&((x=l(this,er))==null||x.abort(),A(this,er,null))};m.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Le(v),y(v))},b),m.addEventListener("pointerup",y,b),m.addEventListener("pointercancel",y,b);return}if(!l(this,nr)){A(this,nr,new AbortController);const h=AbortSignal.any([l(this,Vo),l(this,nr).signal]),d=l(this,yh),m={signal:h,capture:!1,passive:!1};d.addEventListener("touchmove",E(this,lo,P_).bind(this),m);const b=E(this,lo,H_).bind(this);d.addEventListener("touchend",b,m),d.addEventListener("touchcancel",b,m),m.capture=!0,d.addEventListener("pointerdown",Le,m),d.addEventListener("pointermove",Le,m),d.addEventListener("pointercancel",Le,m),d.addEventListener("pointerup",Le,m),(o=l(this,Dm))==null||o.call(this)}if(Le(t),t.touches.length!==2||(u=l(this,Cm))!=null&&u.call(this)){A(this,ir,null);return}let[e,a]=t.touches;e.identifier>a.identifier&&([e,a]=[a,e]),A(this,ir,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:a.screenX,touch1Y:a.screenY})},P_=function(t){var O;if(!l(this,ir)||t.touches.length!==2)return;Le(t);let[e,a]=t.touches;e.identifier>a.identifier&&([e,a]=[a,e]);const{screenX:s,screenY:o}=e,{screenX:u,screenY:h}=a,d=l(this,ir),{touch0X:m,touch0Y:b,touch1X:y,touch1Y:v}=d,x=y-m,_=v-b,T=u-s,R=h-o,M=Math.hypot(T,R)||1,k=Math.hypot(x,_)||1;if(!l(this,qo)&&Math.abs(k-M)<=hx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=s,d.touch0Y=o,d.touch1X=u,d.touch1Y=h,!l(this,qo)){A(this,qo,!0);return}const N=[(s+u)/2,(o+h)/2];(O=l(this,Rm))==null||O.call(this,N,k,M)},H_=function(t){var e;t.touches.length>=2||(l(this,nr)&&(l(this,nr).abort(),A(this,nr,null),(e=l(this,Nm))==null||e.call(this)),l(this,ir)&&(Le(t),A(this,ir,null),A(this,qo,!1)))};let rm=hx;var Xo,ka,Me,ge,ar,vh,Cl,km,Ci,Ko,sr,cs,Ml,Lm,Wo,Ln,Om,$o,rr,us,Ah,Sh,ya,Qo,Bm,x0,Et,OA,zm,BA,Rb,U_,I_,zA,Nb,jA,G_,q_,V_,FA,Y_,PA,X_,K_,W_,HA,Pf;const Ct=class Ct{constructor(t){w(this,Et);w(this,Xo,null);w(this,ka,null);w(this,Me,null);w(this,ge,null);w(this,ar,null);w(this,vh,!1);w(this,Cl,null);w(this,km,"");w(this,Ci,null);w(this,Ko,null);w(this,sr,null);w(this,cs,null);w(this,Ml,null);w(this,Lm,"");w(this,Wo,!1);w(this,Ln,null);w(this,Om,!1);w(this,$o,!1);w(this,rr,!1);w(this,us,null);w(this,Ah,0);w(this,Sh,0);w(this,ya,null);w(this,Qo,null);it(this,"isSelected",!1);it(this,"_isCopy",!1);it(this,"_editToolbar",null);it(this,"_initialOptions",Object.create(null));it(this,"_initialData",null);it(this,"_isVisible",!0);it(this,"_uiManager",null);it(this,"_focusEventsAllowed",!0);w(this,Bm,!1);w(this,x0,Ct._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,s],this.pageTranslation=[o,u];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ct.prototype._resizeWithKeyboard,e=ro.TRANSLATE_SMALL,a=ro.TRANSLATE_BIG;return kt(this,"_resizerKeyboardManager",new Kg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-a,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[a,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-a]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,a]}],[["Escape","mac+Escape"],Ct.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return kt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new GR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ct._l10n??(Ct._l10n=t),Ct._l10nResizer||(Ct._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ct._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);Ct._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Bm)}set _isDraggable(t){var e;A(this,Bm,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,x0)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(E(this,Et,Pf).call(this),(e=l(this,cs))==null||e.remove(),A(this,cs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Wo)?A(this,Wo,!1):this.parent.setSelected(this))}focusout(t){var a;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,a,s){const[o,u]=this.parentDimensions;[a,s]=this.screenToPageTranslation(a,s),this.x=(t+a)/o,this.y=(e+s)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[a,s]=this.parentDimensions;this.setAt(t*a,e*s,this.width*a,this.height*s),this._onTranslated()}translate(t,e){E(this,Et,OA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Ln)||A(this,Ln,[this.x,this.y,this.width,this.height]),E(this,Et,OA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,Ln)||A(this,Ln,[this.x,this.y,this.width,this.height]);const{div:a,parentDimensions:[s,o]}=this;if(this.x+=t/s,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[d,m]=this.getBaseTranslation();u+=d,h+=m;const{style:b}=a;b.left=`${(100*u).toFixed(2)}%`,b.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),a.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,Ln)&&(l(this,Ln)[0]!==this.x||l(this,Ln)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Ln)&&(l(this,Ln)[2]!==this.width||l(this,Ln)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:a}=Ct,s=a/t,o=a/e;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[a,s]}=this;let{x:o,y:u,width:h,height:d}=this;if(h*=a,d*=s,o*=a,u*=s,this._mustFixPosition)switch(t){case 0:o=Ui(o,0,a-h),u=Ui(u,0,s-d);break;case 90:o=Ui(o,0,a-d),u=Ui(u,h,s);break;case 180:o=Ui(o,h,a),u=Ui(u,d,s);break;case 270:o=Ui(o,d,a),u=Ui(u,0,s-h);break}this.x=o/=a,this.y=u/=s;const[m,b]=this.getBaseTranslation();o+=m,u+=b,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var a;return E(a=Ct,zm,BA).call(a,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var a;return E(a=Ct,zm,BA).call(a,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,a]}=this;return[e*t,a*t]}setDims(){const{div:{style:t},width:e,height:a}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*a).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Me))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,$o))return this._editToolbar;this._editToolbar=new wA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,a]of t)await this._editToolbar.addButton(e,a);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=l(this,Me))==null||e.destroy()}addContainer(t){var a;const e=(a=this._editToolbar)==null?void 0:a.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Me)||(l0.initialize(Ct._l10n),A(this,Me,new l0(this)),l(this,Xo)&&(l(this,Me).data=l(this,Xo),A(this,Xo,null))),l(this,Me)}get altTextData(){var t;return(t=l(this,Me))==null?void 0:t.data}set altTextData(t){l(this,Me)&&(l(this,Me).data=t)}get guessedAltText(){var t;return(t=l(this,Me))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Me))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Me))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Me)&&!l(this,Me).isEmpty()}hasAltTextData(){var t;return((t=l(this,Me))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=l(this,ge))==null||t.focusButton()}addCommentButton(){return l(this,ge)||A(this,ge,new bb(this))}addStandaloneCommentButton(){if(l(this,ar)){this._uiManager.isEditingMode()&&l(this,ar).classList.remove("hidden");return}this.hasComment&&(A(this,ar,l(this,ge).renderForStandalone()),this.div.append(l(this,ar)))}removeStandaloneCommentButton(){l(this,ge).removeStandaloneCommentButton(),A(this,ar,null)}hideStandaloneCommentButton(){var t;(t=l(this,ar))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:a,deleted:s}}=l(this,ge);return{text:e,richText:t,date:a,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,ge)||A(this,ge,new bb(this)),l(this,ge).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:a}){if(!e||(l(this,ge)||A(this,ge,new bb(this)),l(this,ge).setInitialText(t,a),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=l(this,ge))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=l(this,ge))==null?void 0:t.isDeleted()}get hasComment(){return!!l(this,ge)&&!l(this,ge).isEmpty()&&!l(this,ge).isDeleted()}async editComment(t){l(this,ge)||A(this,ge,new bb(this)),l(this,ge).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,ge).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[o]=this.pageDimensions,[u]=this.pageTranslation,h=u+o+1,d=s-100,m=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,m,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,ge).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,vh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,Et,PA).call(this);const[e,a]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*a/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/a).toFixed(2)}%`);const[s,o]=this.getInitialTranslation();return this.translate(s,o),__(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Qo)||A(this,Qo,new rm({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,Et,G_).bind(this),onPinching:E(this,Et,q_).bind(this),onPinchEnd:E(this,Et,V_).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Wo,!0),this._isDraggable){E(this,Et,Y_).call(this,t);return}E(this,Et,FA).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,us)&&clearTimeout(l(this,us)),A(this,us,setTimeout(()=>{var t;A(this,us,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,a){t.changeParent(this),this.x=e,this.y=a,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,a=this.rotation){const s=this.parentScale,[o,u]=this.pageDimensions,[h,d]=this.pageTranslation,m=t/s,b=e/s,y=this.x*o,v=this.y*u,x=this.width*o,_=this.height*u;switch(a){case 0:return[y+m+h,u-v-b-_+d,y+m+x+h,u-v-b+d];case 90:return[y+b+h,u-v+m+d,y+b+_+h,u-v+m+x+d];case 180:return[y-m-x+h,u-v+b+d,y-m+h,u-v+b+_+d];case 270:return[y-b-_+h,u-v-m-x+d,y-b+h,u-v-m+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[a,s,o,u]=t,h=o-a,d=u-s;switch(this.rotation){case 0:return[a,e-u,h,d];case 90:return[a,e-s,d,h];case 180:return[o,e-s,h,d];case 270:return[o,e-u,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=l(this,ge))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:a,opacity:s,deleted:o,richText:u},uid:h,pageIndex:d,creationDate:m,modificationDate:b}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:u,contentsObj:{str:t},creationDate:m,modificationDate:a||b,popupRef:!o,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,$o,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,$o,!1),!0):!1}isInEditMode(){return l(this,$o)}shouldGetKeyboardEvents(){return l(this,rr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:a,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&s>0&&t<o&&a>0}rebuild(){E(this,Et,PA).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var a;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((a=this._initialData)==null?void 0:a.popupRef)||""}}static async deserialize(t,e,a){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:a,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,A(s,Xo,t.accessibilityData),s._isCopy=t.isCopy||!1;const[o,u]=s.pageDimensions,[h,d,m,b]=s.getRectInCurrentCoords(t.rect,u);return s.x=h/o,s.y=d/u,s.width=m/o,s.height=b/u,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,Ml))==null||t.abort(),A(this,Ml,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,us)&&(clearTimeout(l(this,us)),A(this,us,null)),E(this,Et,Pf).call(this),this.removeEditToolbar(),l(this,ya)){for(const a of l(this,ya).values())clearTimeout(a);A(this,ya,null)}this.parent=null,(e=l(this,Qo))==null||e.destroy(),A(this,Qo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Et,U_).call(this),l(this,Ci).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[a,s,o,u]=this.getPDFRect();return[Ct._round(a+(o-a)*t),Ct._round(s+(u-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,ge).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,ge).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,ge).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,ge).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){l(this,ge).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Ci).children;if(!l(this,ka)){A(this,ka,Array.from(e));const u=E(this,Et,X_).bind(this),h=E(this,Et,K_).bind(this),d=this._uiManager._signal;for(const m of l(this,ka)){const b=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",u,{signal:d}),m.addEventListener("blur",h,{signal:d}),m.addEventListener("focus",E(this,Et,W_).bind(this,b),{signal:d}),m.setAttribute("data-l10n-id",Ct._l10nResizer[b])}}const a=l(this,ka)[0];let s=0;for(const u of e){if(u===a)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(l(this,ka).length/4);if(o!==s){if(o<s)for(let h=0;h<s-o;h++)l(this,Ci).append(l(this,Ci).firstChild);else if(o>s)for(let h=0;h<o-s;h++)l(this,Ci).firstChild.before(l(this,Ci).lastChild);let u=0;for(const h of e){const m=l(this,ka)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Ct._l10nResizer[m])}}E(this,Et,HA).call(this,0),A(this,rr,!0),l(this,Ci).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,rr)&&E(this,Et,jA).call(this,l(this,Lm),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,Et,Pf).call(this),this.div.focus()}select(){var t,e,a;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,o;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(a=l(this,Me))==null||a.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,a,s,o;this.isSelected&&(this.isSelected=!1,(t=l(this,Ci))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(a=this.div)!=null&&a.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(o=l(this,Me))==null||o.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Om)}set isEditing(t){A(this,Om,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,ya)||A(this,ya,new Map);const{action:a}=t;let s=l(this,ya).get(a);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),l(this,ya).delete(a),l(this,ya).size===0&&A(this,ya,null)},Ct._telemetryTimeout),l(this,ya).set(a,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,vh,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,vh,!0)}updateFakeAnnotationElement(t){if(!l(this,cs)&&!this.deleted){A(this,cs,t.addFakeAnnotation(this));return}if(this.deleted){l(this,cs).remove(),A(this,cs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,cs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const a=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),a.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Xo=new WeakMap,ka=new WeakMap,Me=new WeakMap,ge=new WeakMap,ar=new WeakMap,vh=new WeakMap,Cl=new WeakMap,km=new WeakMap,Ci=new WeakMap,Ko=new WeakMap,sr=new WeakMap,cs=new WeakMap,Ml=new WeakMap,Lm=new WeakMap,Wo=new WeakMap,Ln=new WeakMap,Om=new WeakMap,$o=new WeakMap,rr=new WeakMap,us=new WeakMap,Ah=new WeakMap,Sh=new WeakMap,ya=new WeakMap,Qo=new WeakMap,Bm=new WeakMap,x0=new WeakMap,Et=new WeakSet,OA=function([t,e],a,s){[a,s]=this.screenToPageTranslation(a,s),this.x+=a/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},zm=new WeakSet,BA=function(t,e,a){switch(a){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Rb=function(t){switch(t){case 90:{const[e,a]=this.pageDimensions;return[0,-e/a,a/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,a]=this.pageDimensions;return[0,e/a,-a/e,0]}default:return[1,0,0,1]}},U_=function(){if(l(this,Ci))return;A(this,Ci,document.createElement("div")),l(this,Ci).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const a of t){const s=document.createElement("div");l(this,Ci).append(s),s.classList.add("resizer",a),s.setAttribute("data-resizer-name",a),s.addEventListener("pointerdown",E(this,Et,I_).bind(this,a),{signal:e}),s.addEventListener("contextmenu",Zn,{signal:e}),s.tabIndex=-1}this.div.prepend(l(this,Ci))},I_=function(t,e){var b;e.preventDefault();const{isMac:a}=vi.platform;if(e.button!==0||e.ctrlKey&&a)return;(b=l(this,Me))==null||b.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,A(this,Ko,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Et,jA).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Le,{passive:!1,signal:u}),window.addEventListener("contextmenu",Zn,{signal:u}),A(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const m=()=>{var y;o.abort(),this.parent.togglePointerEvents(!0),(y=l(this,Me))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=h,this.div.style.cursor=d,E(this,Et,Nb).call(this)};window.addEventListener("pointerup",m,{signal:u}),window.addEventListener("blur",m,{signal:u})},zA=function(t,e,a,s){this.width=a,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Nb=function(){if(!l(this,sr))return;const{savedX:t,savedY:e,savedWidth:a,savedHeight:s}=l(this,sr);A(this,sr,null);const o=this.x,u=this.y,h=this.width,d=this.height;o===t&&u===e&&h===a&&d===s||this.addCommands({cmd:E(this,Et,zA).bind(this,o,u,h,d),undo:E(this,Et,zA).bind(this,t,e,a,s),mustExec:!0})},jA=function(t,e){const[a,s]=this.parentDimensions,o=this.x,u=this.y,h=this.width,d=this.height,m=Ct.MIN_SIZE/a,b=Ct.MIN_SIZE/s,y=E(this,Et,Rb).call(this,this.rotation),v=(B,P)=>[y[0]*B+y[2]*P,y[1]*B+y[3]*P],x=E(this,Et,Rb).call(this,360-this.rotation),_=(B,P)=>[x[0]*B+x[2]*P,x[1]*B+x[3]*P];let T,R,M=!1,k=!1;switch(t){case"topLeft":M=!0,T=(B,P)=>[0,0],R=(B,P)=>[B,P];break;case"topMiddle":T=(B,P)=>[B/2,0],R=(B,P)=>[B/2,P];break;case"topRight":M=!0,T=(B,P)=>[B,0],R=(B,P)=>[0,P];break;case"middleRight":k=!0,T=(B,P)=>[B,P/2],R=(B,P)=>[0,P/2];break;case"bottomRight":M=!0,T=(B,P)=>[B,P],R=(B,P)=>[0,0];break;case"bottomMiddle":T=(B,P)=>[B/2,P],R=(B,P)=>[B/2,0];break;case"bottomLeft":M=!0,T=(B,P)=>[0,P],R=(B,P)=>[B,0];break;case"middleLeft":k=!0,T=(B,P)=>[0,P/2],R=(B,P)=>[B,P/2];break}const N=T(h,d),O=R(h,d);let z=v(...O);const j=Ct._round(o+z[0]),H=Ct._round(u+z[1]);let U=1,X=1,J,tt;if(e.fromKeyboard)({deltaX:J,deltaY:tt}=e);else{const{screenX:B,screenY:P}=e,[W,at]=l(this,Ko);[J,tt]=this.screenToPageTranslation(B-W,P-at),l(this,Ko)[0]=B,l(this,Ko)[1]=P}if([J,tt]=_(J/a,tt/s),M){const B=Math.hypot(h,d);U=X=Math.max(Math.min(Math.hypot(O[0]-N[0]-J,O[1]-N[1]-tt)/B,1/h,1/d),m/h,b/d)}else k?U=Ui(Math.abs(O[0]-N[0]-J),m,1)/h:X=Ui(Math.abs(O[1]-N[1]-tt),b,1)/d;const nt=Ct._round(h*U),bt=Ct._round(d*X);z=v(...R(nt,bt));const st=j-z[0],gt=H-z[1];l(this,Ln)||A(this,Ln,[this.x,this.y,this.width,this.height]),this.width=nt,this.height=bt,this.x=st,this.y=gt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},G_=function(){var t;A(this,sr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Me))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},q_=function(t,e,a){let o=.7*(a/e)+1-.7;if(o===1)return;const u=E(this,Et,Rb).call(this,this.rotation),h=(j,H)=>[u[0]*j+u[2]*H,u[1]*j+u[3]*H],[d,m]=this.parentDimensions,b=this.x,y=this.y,v=this.width,x=this.height,_=Ct.MIN_SIZE/d,T=Ct.MIN_SIZE/m;o=Math.max(Math.min(o,1/v,1/x),_/v,T/x);const R=Ct._round(v*o),M=Ct._round(x*o);if(R===v&&M===x)return;l(this,Ln)||A(this,Ln,[b,y,v,x]);const k=h(v/2,x/2),N=Ct._round(b+k[0]),O=Ct._round(y+k[1]),z=h(R/2,M/2);this.x=N-z[0],this.y=O-z[1],this.width=R,this.height=M,this.setDims(),this.fixAndSetPosition(),this._onResizing()},V_=function(){var t;(t=l(this,Me))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,Et,Nb).call(this)},FA=function(t){const{isMac:e}=vi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Y_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let a=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),u={capture:!0,passive:!1,signal:o},h=m=>{s.abort(),A(this,Cl,null),A(this,Wo,!1),this._uiManager.endDragSession()||E(this,Et,FA).call(this,m),a&&this._onStopDragging()};e&&(A(this,Ah,t.clientX),A(this,Sh,t.clientY),A(this,Cl,t.pointerId),A(this,km,t.pointerType),window.addEventListener("pointermove",m=>{a||(a=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:b,clientY:y,pointerId:v}=m;if(v!==l(this,Cl)){Le(m);return}const[x,_]=this.screenToPageTranslation(b-l(this,Ah),y-l(this,Sh));A(this,Ah,b),A(this,Sh,y),this._uiManager.dragSelectedEditors(x,_)},u),window.addEventListener("touchmove",Le,u),window.addEventListener("pointerdown",m=>{m.pointerType===l(this,km)&&(l(this,Qo)||m.isPrimary)&&h(m),Le(m)},u));const d=m=>{if(!l(this,Cl)||l(this,Cl)===m.pointerId){h(m);return}Le(m)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},PA=function(){if(l(this,Ml)||!this.div)return;A(this,Ml,new AbortController);const t=this._uiManager.combinedSignal(l(this,Ml));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},X_=function(t){Ct._resizerKeyboardManager.exec(this,t)},K_=function(t){var e;l(this,rr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,Ci)&&E(this,Et,Pf).call(this)},W_=function(t){A(this,Lm,l(this,rr)?t:"")},HA=function(t){if(l(this,ka))for(const e of l(this,ka))e.tabIndex=t},Pf=function(){A(this,rr,!1),E(this,Et,HA).call(this,-1),E(this,Et,Nb).call(this)},w(Ct,zm),it(Ct,"_l10n",null),it(Ct,"_l10nResizer",null),it(Ct,"_borderLineWidth",-1),it(Ct,"_colorManager",new _A),it(Ct,"_zIndex",1),it(Ct,"_telemetryTimeout",1e3);let Se=Ct;class GR extends Se{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const MT=3285377520,ca=4294901760,Ja=65535;class $_{constructor(t){this.h1=t?t&4294967295:MT,this.h2=t?t&4294967295:MT}update(t){let e,a;if(typeof t=="string"){e=new Uint8Array(t.length*2),a=0;for(let T=0,R=t.length;T<R;T++){const M=t.charCodeAt(T);M<=255?e[a++]=M:(e[a++]=M>>>8,e[a++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),a=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=a>>2,o=a-s*4,u=new Uint32Array(e.buffer,0,s);let h=0,d=0,m=this.h1,b=this.h2;const y=3432918353,v=461845907,x=y&Ja,_=v&Ja;for(let T=0;T<s;T++)T&1?(h=u[T],h=h*y&ca|h*x&Ja,h=h<<15|h>>>17,h=h*v&ca|h*_&Ja,m^=h,m=m<<13|m>>>19,m=m*5+3864292196):(d=u[T],d=d*y&ca|d*x&Ja,d=d<<15|d>>>17,d=d*v&ca|d*_&Ja,b^=d,b=b<<13|b>>>19,b=b*5+3864292196);switch(h=0,o){case 3:h^=e[s*4+2]<<16;case 2:h^=e[s*4+1]<<8;case 1:h^=e[s*4],h=h*y&ca|h*x&Ja,h=h<<15|h>>>17,h=h*v&ca|h*_&Ja,s&1?m^=h:b^=h}this.h1=m,this.h2=b}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ca|t*36045&Ja,e=e*4283543511&ca|((e<<16|t>>>16)*2950163797&ca)>>>16,t^=e>>>1,t=t*444984403&ca|t*60499&Ja,e=e*3301882366&ca|((e<<16|t>>>16)*3120437893&ca)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const UA=Object.freeze({map:null,hash:"",transfer:void 0});var Zo,Jo,lr,Mi,w0,Q_;class JS{constructor(){w(this,w0);w(this,Zo,!1);w(this,Jo,null);w(this,lr,null);w(this,Mi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const a=l(this,Mi).get(t);return a===void 0?e:Object.assign(e,a)}getRawValue(t){return l(this,Mi).get(t)}remove(t){const e=l(this,Mi).get(t);if(e!==void 0&&(e instanceof Se&&l(this,lr).delete(e.annotationElementId),l(this,Mi).delete(t),l(this,Mi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const a of l(this,Mi).values())if(a instanceof Se)return;this.onAnnotationEditor(null)}}setValue(t,e){const a=l(this,Mi).get(t);let s=!1;if(a!==void 0)for(const[o,u]of Object.entries(e))a[o]!==u&&(s=!0,a[o]=u);else s=!0,l(this,Mi).set(t,e);s&&E(this,w0,Q_).call(this),e instanceof Se&&((l(this,lr)||A(this,lr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,Mi).has(t)}get size(){return l(this,Mi).size}resetModified(){l(this,Zo)&&(A(this,Zo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Z_(this)}get serializable(){if(l(this,Mi).size===0)return UA;const t=new Map,e=new $_,a=[],s=Object.create(null);let o=!1;for(const[u,h]of l(this,Mi)){const d=h instanceof Se?h.serialize(!1,s):h;d&&(t.set(u,d),e.update(`${u}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const u of t.values())u.bitmap&&a.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:a}:UA}get editorStats(){let t=null;const e=new Map;let a=0,s=0;for(const o of l(this,Mi).values()){if(!(o instanceof Se)){o.popup&&(o.popup.deleted?s+=1:a+=1);continue}o.isCommentDeleted?s+=1:o.hasEditedComment&&(a+=1);const u=o.telemetryFinalData;if(!u)continue;const{type:h}=u;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const d=t[h]||(t[h]=new Map);for(const[m,b]of Object.entries(u)){if(m==="type")continue;let y=d.get(m);y||(y=new Map,d.set(m,y));const v=y.get(b)??0;y.set(b,v+1)}}if((s>0||a>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:a}),!t)return null;for(const[o,u]of e)t[o]=u.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){A(this,Jo,null)}updateEditor(t,e){var s;const a=(s=l(this,lr))==null?void 0:s.get(t);return a?(a.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=l(this,lr))==null?void 0:e.get(t))||null}get modifiedIds(){if(l(this,Jo))return l(this,Jo);const t=[];if(l(this,lr))for(const e of l(this,lr).values())e.serialize()&&t.push(e.annotationElementId);return A(this,Jo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,Mi).entries()}}Zo=new WeakMap,Jo=new WeakMap,lr=new WeakMap,Mi=new WeakMap,w0=new WeakSet,Q_=function(){l(this,Zo)||(A(this,Zo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var jm;class Z_ extends JS{constructor(e){super();w(this,jm);const{map:a,hash:s,transfer:o}=e.serializable,u=structuredClone(a,o?{transfer:o}:null);A(this,jm,{map:u,hash:s,transfer:o})}get print(){ve("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,jm)}get modifiedIds(){return kt(this,"modifiedIds",{ids:new Set,hash:""})}}jm=new WeakMap;var xh;class qR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,xh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,xh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:a}){if(!(!t||l(this,xh).has(t.loadedName))){if(Gt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:o,style:u}=t,h=new FontFace(s,o,u);this.addNativeFontFace(h);try{await h.load(),l(this,xh).add(s),a==null||a(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const a=t.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(s){throw _t(`Failed to load font '${a.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const s=this._queueLoadingCallback(a);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return kt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return kt(this,"isSyncFontLoadingSupported",Wi||vi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Gt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;a.length>0&&a[0].done;){const o=a.shift();setTimeout(o.callback,0)}}const{loadingRequests:a}=this,s={done:!1,complete:e,callback:t};return a.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return kt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function a(O,z){return O.charCodeAt(z)<<24|O.charCodeAt(z+1)<<16|O.charCodeAt(z+2)<<8|O.charCodeAt(z+3)&255}function s(O,z,j,H){const U=O.substring(0,z),X=O.substring(z+j);return U+H+X}let o,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let m=0;function b(O,z){if(++m>30){_t("Load test font never loaded."),z();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(b.bind(null,O,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,y.length,y);const _=16,T=1482184792;let R=a(v,_);for(o=0,u=y.length-3;o<u;o+=4)R=R-T+a(y,o)|0;o<y.length&&(R=R-T+a(y+"XXX",o)|0),v=s(v,_,4,NR(R));const M=`url(data:font/opentype;base64,${btoa(v)});`,k=`@font-face {font-family:"${y}";src:${M}}`;this.insertRule(k);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const O of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=O,N.append(z)}this._document.body.append(N),b(y,()=>{N.remove(),e.complete()})}}xh=new WeakMap;var ce;class VR{constructor(t,e=null,a,s){w(this,ce);this.compiledGlyphs=Object.create(null),A(this,ce,t),this._inspectFont=e,a&&Object.assign(this,a),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var a;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${m_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(a=this._inspectFont)==null||a.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const a=this.loadedName+"_path_"+e;let s;try{s=t.get(a)}catch(u){_t(`getPathGenerator - ignoring character: "${u}".`)}const o=new Path2D(s||"");return this.fontExtraProperties||t.delete(a),this.compiledGlyphs[e]=o}get black(){return l(this,ce).black}get bold(){return l(this,ce).bold}get disableFontFace(){return l(this,ce).disableFontFace??!1}get fontExtraProperties(){return l(this,ce).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,ce).isInvalidPDFjsFont}get isType3Font(){return l(this,ce).isType3Font}get italic(){return l(this,ce).italic}get missingFile(){return l(this,ce).missingFile}get remeasure(){return l(this,ce).remeasure}get vertical(){return l(this,ce).vertical}get ascent(){return l(this,ce).ascent}get defaultWidth(){return l(this,ce).defaultWidth}get descent(){return l(this,ce).descent}get bbox(){return l(this,ce).bbox}get fontMatrix(){return l(this,ce).fontMatrix}get fallbackName(){return l(this,ce).fallbackName}get loadedName(){return l(this,ce).loadedName}get mimetype(){return l(this,ce).mimetype}get name(){return l(this,ce).name}get data(){return l(this,ce).data}clearData(){l(this,ce).clearData()}get cssFontInfo(){return l(this,ce).cssFontInfo}get systemFontInfo(){return l(this,ce).systemFontInfo}get defaultVMetrics(){return l(this,ce).defaultVMetrics}}ce=new WeakMap;function YR(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(Wi)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function XR(g){if(Wi&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return Vg(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yb(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const IA=g=>typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0,KR=g=>typeof g=="object"&&typeof(g==null?void 0:g.name)=="string",J_=BR.bind(null,IA,KR);var or,E0;class WR{constructor(){w(this,or,new Map);w(this,E0,Promise.resolve())}postMessage(t,e){const a={data:structuredClone(t,e?{transfer:e}:null)};l(this,E0).then(()=>{for(const[s]of l(this,or))s.call(this,a)})}addEventListener(t,e,a=null){let s=null;if((a==null?void 0:a.signal)instanceof AbortSignal){const{signal:o}=a;if(o.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);s=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}l(this,or).set(e,s)}removeEventListener(t,e){const a=l(this,or).get(e);a==null||a(),l(this,or).delete(e)}terminate(){for(const[,t]of l(this,or))t==null||t();l(this,or).clear()}}or=new WeakMap,E0=new WeakMap;const vb={DATA:1,ERROR:2},ei={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function DT(){}function cn(g){if(g instanceof Lr||g instanceof s0||g instanceof ST||g instanceof nm||g instanceof uA)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new Lr(g.message);case"InvalidPDFException":return new s0(g.message);case"PasswordException":return new ST(g.message,g.code);case"ResponseException":return new nm(g.message,g.status,g.missing);case"UnknownErrorException":return new uA(g.message,g.details)}return new uA(g.message,g.toString())}var wh,Ea,tC,eC,iC,kb;class Hf{constructor(t,e,a){w(this,Ea);w(this,wh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),a.addEventListener("message",E(this,Ea,tC).bind(this),{signal:l(this,wh).signal})}on(t,e){const a=this.actionHandler;if(a[t])throw new Error(`There is already an actionName called "${t}"`);a[t]=e}send(t,e,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},a)}sendWithPromise(t,e,a){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},a)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,a,s){const o=this.streamId++,u=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:m=>{const b=Promise.withResolvers();return this.streamControllers[o]={controller:m,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:h,action:t,streamId:o,data:e,desiredSize:m.desiredSize},s),b.promise},pull:m=>{const b=Promise.withResolvers();return this.streamControllers[o].pullCall=b,d.postMessage({sourceName:u,targetName:h,stream:ei.PULL,streamId:o,desiredSize:m.desiredSize}),b.promise},cancel:m=>{Gt(m instanceof Error,"cancel must have a valid reason");const b=Promise.withResolvers();return this.streamControllers[o].cancelCall=b,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:u,targetName:h,stream:ei.CANCEL,streamId:o,reason:cn(m)}),b.promise}},a)}destroy(){var t;(t=l(this,wh))==null||t.abort(),A(this,wh,null)}}wh=new WeakMap,Ea=new WeakSet,tC=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,Ea,iC).call(this,t);return}if(t.callback){const a=t.callbackId,s=this.callbackCapabilities[a];if(!s)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],t.callback===vb.DATA)s.resolve(t.data);else if(t.callback===vb.ERROR)s.reject(cn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const a=this.sourceName,s=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:a,targetName:s,callback:vb.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:a,targetName:s,callback:vb.ERROR,callbackId:t.callbackId,reason:cn(u)})});return}if(t.streamId){E(this,Ea,eC).call(this,t);return}e(t.data)},eC=function(t){const e=t.streamId,a=this.sourceName,s=t.sourceName,o=this.comObj,u=this,h=this.actionHandler[t.action],d={enqueue(m,b=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=b,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:a,targetName:s,stream:ei.ENQUEUE,streamId:e,chunk:m},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:a,targetName:s,stream:ei.CLOSE,streamId:e}),delete u.streamSinks[e])},error(m){Gt(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:a,targetName:s,stream:ei.ERROR,streamId:e,reason:cn(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:a,targetName:s,stream:ei.START_COMPLETE,streamId:e,success:!0})},function(m){o.postMessage({sourceName:a,targetName:s,stream:ei.START_COMPLETE,streamId:e,reason:cn(m)})})},iC=function(t){const e=t.streamId,a=this.sourceName,s=t.sourceName,o=this.comObj,u=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case ei.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(cn(t.reason));break;case ei.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(cn(t.reason));break;case ei.PULL:if(!h){o.postMessage({sourceName:a,targetName:s,stream:ei.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||DT).then(function(){o.postMessage({sourceName:a,targetName:s,stream:ei.PULL_COMPLETE,streamId:e,success:!0})},function(m){o.postMessage({sourceName:a,targetName:s,stream:ei.PULL_COMPLETE,streamId:e,reason:cn(m)})});break;case ei.ENQUEUE:if(Gt(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case ei.CLOSE:if(Gt(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,Ea,kb).call(this,u,e);break;case ei.ERROR:Gt(u,"error should have stream controller"),u.controller.error(cn(t.reason)),E(this,Ea,kb).call(this,u,e);break;case ei.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(cn(t.reason)),E(this,Ea,kb).call(this,u,e);break;case ei.CANCEL:if(!h)break;const d=cn(t.reason);Promise.try(h.onCancel||DT,d).then(function(){o.postMessage({sourceName:a,targetName:s,stream:ei.CANCEL_COMPLETE,streamId:e,success:!0})},function(m){o.postMessage({sourceName:a,targetName:s,stream:ei.CANCEL_COMPLETE,streamId:e,reason:cn(m)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},kb=async function(t,e){var a,s,o;await Promise.allSettled([(a=t.startCall)==null?void 0:a.promise,(s=t.pullCall)==null?void 0:s.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Fm;class nC{constructor({enableHWA:t=!1}){w(this,Fm,!1);A(this,Fm,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(t,e);return{canvas:a,context:a.getContext("2d",{willReadFrequently:!l(this,Fm)})}}reset(t,e,a){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||a<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=a}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ve("Abstract method `_createCanvas` called.")}}Fm=new WeakMap;class $R extends nC{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const a=this._document.createElement("canvas");return a.width=t,a.height=e,a}}class aC{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(a=>({cMapData:a,isCompressed:this.isCompressed})).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ve("Abstract method `_fetch` called.")}}class RT extends aC{async _fetch(t){const e=await Nd(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Vg(e)}}class sC{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,a,s,o){return"none"}destroy(t=!1){}}var tc,Eh,cr,ur,ji,ec,ic,ct,Oi,Uf,Iu,Lb,Gu,rC,GA,qu,If,Gf,qA,qf;class QR extends sC{constructor({docId:e,ownerDocument:a=globalThis.document}){super();w(this,ct);w(this,tc);w(this,Eh);w(this,cr);w(this,ur);w(this,ji);w(this,ec);w(this,ic,0);A(this,ur,e),A(this,ji,a)}addFilter(e){if(!e)return"none";let a=l(this,ct,Oi).get(e);if(a)return a;const[s,o,u]=E(this,ct,Lb).call(this,e),h=e.length===1?s:`${s}${o}${u}`;if(a=l(this,ct,Oi).get(h),a)return l(this,ct,Oi).set(e,a),a;const d=`g_${l(this,ur)}_transfer_map_${si(this,ic)._++}`,m=E(this,ct,Gu).call(this,d);l(this,ct,Oi).set(e,m),l(this,ct,Oi).set(h,m);const b=E(this,ct,qu).call(this,d);return E(this,ct,Gf).call(this,s,o,u,b),m}addHCMFilter(e,a){var _;const s=`${e}-${a}`,o="base";let u=l(this,ct,Uf).get(o);if((u==null?void 0:u.key)===s||(u?((_=u.filter)==null||_.remove(),u.key=s,u.url="none",u.filter=null):(u={key:s,url:"none",filter:null},l(this,ct,Uf).set(o,u)),!e||!a))return u.url;const h=E(this,ct,qf).call(this,e);e=ht.makeHexColor(...h);const d=E(this,ct,qf).call(this,a);if(a=ht.makeHexColor(...d),l(this,ct,Iu).style.color="",e==="#000000"&&a==="#ffffff"||e===a)return u.url;const m=new Array(256);for(let T=0;T<=255;T++){const R=T/255;m[T]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const b=m.join(","),y=`g_${l(this,ur)}_hcm_filter`,v=u.filter=E(this,ct,qu).call(this,y);E(this,ct,Gf).call(this,b,b,b,v),E(this,ct,GA).call(this,v);const x=(T,R)=>{const M=h[T]/255,k=d[T]/255,N=new Array(R+1);for(let O=0;O<=R;O++)N[O]=M+O/R*(k-M);return N.join(",")};return E(this,ct,Gf).call(this,x(0,5),x(1,5),x(2,5),v),u.url=E(this,ct,Gu).call(this,y),u.url}addAlphaFilter(e){let a=l(this,ct,Oi).get(e);if(a)return a;const[s]=E(this,ct,Lb).call(this,[e]),o=`alpha_${s}`;if(a=l(this,ct,Oi).get(o),a)return l(this,ct,Oi).set(e,a),a;const u=`g_${l(this,ur)}_alpha_map_${si(this,ic)._++}`,h=E(this,ct,Gu).call(this,u);l(this,ct,Oi).set(e,h),l(this,ct,Oi).set(o,h);const d=E(this,ct,qu).call(this,u);return E(this,ct,qA).call(this,s,d),h}addLuminosityFilter(e){let a=l(this,ct,Oi).get(e||"luminosity");if(a)return a;let s,o;if(e?([s]=E(this,ct,Lb).call(this,[e]),o=`luminosity_${s}`):o="luminosity",a=l(this,ct,Oi).get(o),a)return l(this,ct,Oi).set(e,a),a;const u=`g_${l(this,ur)}_luminosity_map_${si(this,ic)._++}`,h=E(this,ct,Gu).call(this,u);l(this,ct,Oi).set(e,h),l(this,ct,Oi).set(o,h);const d=E(this,ct,qu).call(this,u);return E(this,ct,rC).call(this,d),e&&E(this,ct,qA).call(this,s,d),h}addHighlightHCMFilter(e,a,s,o,u){var k;const h=`${a}-${s}-${o}-${u}`;let d=l(this,ct,Uf).get(e);if((d==null?void 0:d.key)===h||(d?((k=d.filter)==null||k.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},l(this,ct,Uf).set(e,d)),!a||!s))return d.url;const[m,b]=[a,s].map(E(this,ct,qf).bind(this));let y=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),v=Math.round(.2126*b[0]+.7152*b[1]+.0722*b[2]),[x,_]=[o,u].map(E(this,ct,qf).bind(this));v<y&&([y,v,x,_]=[v,y,_,x]),l(this,ct,Iu).style.color="";const T=(N,O,z)=>{const j=new Array(256),H=(v-y)/z,U=N/255,X=(O-N)/(255*z);let J=0;for(let tt=0;tt<=z;tt++){const nt=Math.round(y+tt*H),bt=U+tt*X;for(let st=J;st<=nt;st++)j[st]=bt;J=nt+1}for(let tt=J;tt<256;tt++)j[tt]=j[J-1];return j.join(",")},R=`g_${l(this,ur)}_hcm_${e}_filter`,M=d.filter=E(this,ct,qu).call(this,R);return E(this,ct,GA).call(this,M),E(this,ct,Gf).call(this,T(x[0],_[0],5),T(x[1],_[1],5),T(x[2],_[2],5),M),d.url=E(this,ct,Gu).call(this,R),d.url}destroy(e=!1){var a,s,o,u;e&&((a=l(this,ec))!=null&&a.size)||((s=l(this,cr))==null||s.parentNode.parentNode.remove(),A(this,cr,null),(o=l(this,Eh))==null||o.clear(),A(this,Eh,null),(u=l(this,ec))==null||u.clear(),A(this,ec,null),A(this,ic,0))}}tc=new WeakMap,Eh=new WeakMap,cr=new WeakMap,ur=new WeakMap,ji=new WeakMap,ec=new WeakMap,ic=new WeakMap,ct=new WeakSet,Oi=function(){return l(this,Eh)||A(this,Eh,new Map)},Uf=function(){return l(this,ec)||A(this,ec,new Map)},Iu=function(){if(!l(this,cr)){const e=l(this,ji).createElement("div"),{style:a}=e;a.visibility="hidden",a.contain="strict",a.width=a.height=0,a.position="absolute",a.top=a.left=0,a.zIndex=-1;const s=l(this,ji).createElementNS(Ys,"svg");s.setAttribute("width",0),s.setAttribute("height",0),A(this,cr,l(this,ji).createElementNS(Ys,"defs")),e.append(s),s.append(l(this,cr)),l(this,ji).body.append(e)}return l(this,cr)},Lb=function(e){if(e.length===1){const m=e[0],b=new Array(256);for(let v=0;v<256;v++)b[v]=m[v]/255;const y=b.join(",");return[y,y,y]}const[a,s,o]=e,u=new Array(256),h=new Array(256),d=new Array(256);for(let m=0;m<256;m++)u[m]=a[m]/255,h[m]=s[m]/255,d[m]=o[m]/255;return[u.join(","),h.join(","),d.join(",")]},Gu=function(e){if(l(this,tc)===void 0){A(this,tc,"");const a=l(this,ji).URL;a!==l(this,ji).baseURI&&(Xg(a)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,tc,KS(a,"")))}return`url(${l(this,tc)}#${e})`},rC=function(e){const a=l(this,ji).createElementNS(Ys,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(a)},GA=function(e){const a=l(this,ji).createElementNS(Ys,"feColorMatrix");a.setAttribute("type","matrix"),a.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(a)},qu=function(e){const a=l(this,ji).createElementNS(Ys,"filter");return a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("id",e),l(this,ct,Iu).append(a),a},If=function(e,a,s){const o=l(this,ji).createElementNS(Ys,a);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),e.append(o)},Gf=function(e,a,s,o){const u=l(this,ji).createElementNS(Ys,"feComponentTransfer");o.append(u),E(this,ct,If).call(this,u,"feFuncR",e),E(this,ct,If).call(this,u,"feFuncG",a),E(this,ct,If).call(this,u,"feFuncB",s)},qA=function(e,a){const s=l(this,ji).createElementNS(Ys,"feComponentTransfer");a.append(s),E(this,ct,If).call(this,s,"feFuncA",e)},qf=function(e){return l(this,ct,Iu).style.color=e,kd(getComputedStyle(l(this,ct,Iu)).getPropertyValue("color"))};class lC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(a=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ve("Abstract method `_fetch` called.")}}class NT extends lC{async _fetch(t){const e=await Nd(t,"arraybuffer");return new Uint8Array(e)}}class oC{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(a=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ve("Abstract method `_fetch` called.")}}class kT extends oC{async _fetch(t){const e=await Nd(t,"arraybuffer");return new Uint8Array(e)}}Wi&&_t("Please use the `legacy` build in Node.js environments.");async function tx(g){const e=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(e)}class ZR extends sC{}class JR extends nC{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class tN extends aC{async _fetch(t){return tx(t)}}class eN extends lC{async _fetch(t){return tx(t)}}class iN extends oC{async _fetch(t){return tx(t)}}const Pu="__forcedDependency",{floor:LT,ceil:OT}=Math;function Ab(g,t,e,a,s,o){g[t*4+0]=Math.min(g[t*4+0],e),g[t*4+1]=Math.min(g[t*4+1],a),g[t*4+2]=Math.max(g[t*4+2],s),g[t*4+3]=Math.max(g[t*4+3],o)}const VA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Th,Dl;class nN{constructor(t,e){w(this,Th);w(this,Dl);A(this,Th,t),A(this,Dl,e)}get length(){return l(this,Th).length}isEmpty(t){return l(this,Th)[t]===VA}minX(t){return l(this,Dl)[t*4+0]/256}minY(t){return l(this,Dl)[t*4+1]/256}maxX(t){return(l(this,Dl)[t*4+2]+1)/256}maxY(t){return(l(this,Dl)[t*4+3]+1)/256}}Th=new WeakMap,Dl=new WeakMap;const Sb=(g,t)=>{if(!g)return;let e=g.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},g.set(t,e)),e};var dn,fn,nc,La,ac,hr,se,ue,dr,mn,Pm,_h,sc,rc,fr,Fi,hs,Hm,YA;class aN{constructor(t,e,a=!1){w(this,Hm);w(this,dn,{__proto__:null});w(this,fn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Pu]:[]});w(this,nc,new Map);w(this,La,[]);w(this,ac,[]);w(this,hr,[[1,0,0,1,0,0]]);w(this,se,[-1/0,-1/0,1/0,1/0]);w(this,ue,new Float64Array([1/0,1/0,-1/0,-1/0]));w(this,dr,-1);w(this,mn,new Set);w(this,Pm,new Map);w(this,_h,new Map);w(this,sc);w(this,rc);w(this,fr);w(this,Fi);w(this,hs);A(this,sc,t.width),A(this,rc,t.height),E(this,Hm,YA).call(this,e),a&&A(this,hs,new Map)}growOperationsCount(t){t>=l(this,Fi).length&&E(this,Hm,YA).call(this,t,l(this,Fi))}save(t){return A(this,dn,{__proto__:l(this,dn)}),A(this,fn,{__proto__:l(this,fn),transform:{__proto__:l(this,fn).transform},moveText:{__proto__:l(this,fn).moveText},sameLineText:{__proto__:l(this,fn).sameLineText},[Pu]:{__proto__:l(this,fn)[Pu]}}),A(this,se,{__proto__:l(this,se)}),l(this,La).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(l(this,dn));if(e===null)return this;A(this,dn,e),A(this,fn,Object.getPrototypeOf(l(this,fn))),A(this,se,Object.getPrototypeOf(l(this,se)));const a=l(this,La).pop();return a!==void 0&&((s=Sb(l(this,hs),t))==null||s.dependencies.add(a),l(this,Fi)[t]=l(this,Fi)[a]),this}recordOpenMarker(t){return l(this,La).push(t),this}getOpenMarker(){return l(this,La).length===0?null:l(this,La).at(-1)}recordCloseMarker(t){var a;const e=l(this,La).pop();return e!==void 0&&((a=Sb(l(this,hs),t))==null||a.dependencies.add(e),l(this,Fi)[t]=l(this,Fi)[e]),this}beginMarkedContent(t){return l(this,ac).push(t),this}endMarkedContent(t){var a;const e=l(this,ac).pop();return e!==void 0&&((a=Sb(l(this,hs),t))==null||a.dependencies.add(e),l(this,Fi)[t]=l(this,Fi)[e]),this}pushBaseTransform(t){return l(this,hr).push(ht.multiplyByDOMMatrix(l(this,hr).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,hr).length>1&&l(this,hr).pop(),this}recordSimpleData(t,e){return l(this,dn)[t]=e,this}recordIncrementalData(t,e){return l(this,fn)[t].push(e),this}resetIncrementalData(t,e){return l(this,fn)[t].length=0,this}recordNamedData(t,e){return l(this,nc).set(t,e),this}recordSimpleDataFromNamed(t,e,a){l(this,dn)[t]=l(this,nc).get(e)??a}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Pu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,dn)&&this.recordFutureForcedDependency(e,l(this,dn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,mn))this.recordFutureForcedDependency(Pu,t);return this}resetBBox(t){return l(this,dr)!==t&&(A(this,dr,t),l(this,ue)[0]=1/0,l(this,ue)[1]=1/0,l(this,ue)[2]=-1/0,l(this,ue)[3]=-1/0),this}recordClipBox(t,e,a,s,o,u){const h=ht.multiplyByDOMMatrix(l(this,hr).at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([a,o,s,u],h,d);const m=ht.intersect(l(this,se),d);return m?(l(this,se)[0]=m[0],l(this,se)[1]=m[1],l(this,se)[2]=m[2],l(this,se)[3]=m[3]):(l(this,se)[0]=l(this,se)[1]=1/0,l(this,se)[2]=l(this,se)[3]=-1/0),this}recordBBox(t,e,a,s,o,u){const h=l(this,se);if(h[0]===1/0)return this;const d=ht.multiplyByDOMMatrix(l(this,hr).at(-1),e.getTransform());if(h[0]===-1/0)return ht.axialAlignedBoundingBox([a,o,s,u],d,l(this,ue)),this;const m=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([a,o,s,u],d,m),l(this,ue)[0]=Math.min(l(this,ue)[0],Math.max(m[0],h[0])),l(this,ue)[1]=Math.min(l(this,ue)[1],Math.max(m[1],h[1])),l(this,ue)[2]=Math.max(l(this,ue)[2],Math.min(m[2],h[2])),l(this,ue)[3]=Math.max(l(this,ue)[3],Math.min(m[3],h[3])),this}recordCharacterBBox(t,e,a,s=1,o=0,u=0,h){const d=a.bbox;let m,b;if(d&&(m=d[2]!==d[0]&&d[3]!==d[1]&&l(this,_h).get(a),m!==!1&&(b=[0,0,0,0],ht.axialAlignedBoundingBox(d,a.fontMatrix,b),(s!==1||o!==0||u!==0)&&ht.scaleMinMax([s,0,0,-s,o,u],b),m)))return this.recordBBox(t,e,b[0],b[2],b[1],b[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&b&&m===void 0&&(m=b[0]<=o-y.actualBoundingBoxLeft&&b[2]>=o+y.actualBoundingBoxRight&&b[1]<=u-y.actualBoundingBoxAscent&&b[3]>=u+y.actualBoundingBoxDescent,l(this,_h).set(a,m),m)?this.recordBBox(t,e,b[0],b[2],b[1],b[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,u-y.actualBoundingBoxAscent,u+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,ue)[0]=Math.max(0,l(this,se)[0]),l(this,ue)[1]=Math.max(0,l(this,se)[1]),l(this,ue)[2]=Math.min(l(this,sc),l(this,se)[2]),l(this,ue)[3]=Math.min(l(this,rc),l(this,se)[3]),this}getSimpleIndex(t){return l(this,dn)[t]}recordDependencies(t,e){const a=l(this,mn),s=l(this,dn),o=l(this,fn);for(const u of e)u in l(this,dn)?a.add(s[u]):u in o&&o[u].forEach(a.add,a);return this}recordNamedDependency(t,e){return l(this,nc).has(e)&&l(this,mn).add(l(this,nc).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Pu]),l(this,hs)){const a=Sb(l(this,hs),t),{dependencies:s}=a;l(this,mn).forEach(s.add,s),l(this,La).forEach(s.add,s),l(this,ac).forEach(s.add,s),s.delete(t),a.isRenderingOperation=!0}if(l(this,dr)===t){const a=LT(l(this,ue)[0]*256/l(this,sc)),s=LT(l(this,ue)[1]*256/l(this,rc)),o=OT(l(this,ue)[2]*256/l(this,sc)),u=OT(l(this,ue)[3]*256/l(this,rc));Ab(l(this,fr),t,a,s,o,u);for(const h of l(this,mn))h!==t&&Ab(l(this,fr),h,a,s,o,u);for(const h of l(this,La))h!==t&&Ab(l(this,fr),h,a,s,o,u);for(const h of l(this,ac))h!==t&&Ab(l(this,fr),h,a,s,o,u);e||(l(this,mn).clear(),A(this,dr,-1))}return this}recordShowTextOperation(t,e=!1){const a=Array.from(l(this,mn));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of a)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,dr)===t&&(A(this,dr,-1),l(this,se)[0]=Math.max(l(this,se)[0],l(this,ue)[0]),l(this,se)[1]=Math.max(l(this,se)[1],l(this,ue)[1]),l(this,se)[2]=Math.min(l(this,se)[2],l(this,ue)[2]),l(this,se)[3]=Math.min(l(this,se)[3],l(this,ue)[3]),e||l(this,mn).clear()),this}_takePendingDependencies(){const t=l(this,mn);return A(this,mn,new Set),t}_extractOperation(t){const e=l(this,Pm).get(t);return l(this,Pm).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,mn).add(e)}take(){return l(this,_h).clear(),new nN(l(this,Fi),l(this,fr))}takeDebugMetadata(){return l(this,hs)}}dn=new WeakMap,fn=new WeakMap,nc=new WeakMap,La=new WeakMap,ac=new WeakMap,hr=new WeakMap,se=new WeakMap,ue=new WeakMap,dr=new WeakMap,mn=new WeakMap,Pm=new WeakMap,_h=new WeakMap,sc=new WeakMap,rc=new WeakMap,fr=new WeakMap,Fi=new WeakMap,hs=new WeakMap,Hm=new WeakSet,YA=function(t,e){const a=new ArrayBuffer(t*4);A(this,fr,new Uint8ClampedArray(a)),A(this,Fi,new Uint32Array(a)),e&&e.length>0?(l(this,Fi).set(e),l(this,Fi).fill(VA,e.length)):l(this,Fi).fill(VA)};var pe,He,Oa,Ch,Mh;const dx=class dx{constructor(t,e,a){w(this,pe);w(this,He);w(this,Oa);w(this,Ch,0);w(this,Mh,0);if(t instanceof dx&&l(t,Oa)===!!a)return t;A(this,pe,t),A(this,He,e),A(this,Oa,!!a)}growOperationsCount(){throw new Error("Unreachable")}save(t){return si(this,Mh)._++,l(this,pe).save(l(this,He)),this}restore(t){return l(this,Mh)>0&&(l(this,pe).restore(l(this,He)),si(this,Mh)._--),this}recordOpenMarker(t){return si(this,Ch)._++,this}getOpenMarker(){return l(this,Ch)>0?l(this,He):l(this,pe).getOpenMarker()}recordCloseMarker(t){return si(this,Ch)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,pe).pushBaseTransform(t),this}popBaseTransform(){return l(this,pe).popBaseTransform(),this}recordSimpleData(t,e){return l(this,pe).recordSimpleData(t,l(this,He)),this}recordIncrementalData(t,e){return l(this,pe).recordIncrementalData(t,l(this,He)),this}resetIncrementalData(t,e){return l(this,pe).resetIncrementalData(t,l(this,He)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,a){return l(this,pe).recordSimpleDataFromNamed(t,e,l(this,He)),this}recordFutureForcedDependency(t,e){return l(this,pe).recordFutureForcedDependency(t,l(this,He)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,pe).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,pe).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,Oa)||l(this,pe).resetBBox(l(this,He)),this}recordClipBox(t,e,a,s,o,u){return l(this,Oa)||l(this,pe).recordClipBox(l(this,He),e,a,s,o,u),this}recordBBox(t,e,a,s,o,u){return l(this,Oa)||l(this,pe).recordBBox(l(this,He),e,a,s,o,u),this}recordCharacterBBox(t,e,a,s,o,u,h){return l(this,Oa)||l(this,pe).recordCharacterBBox(l(this,He),e,a,s,o,u,h),this}recordFullPageBBox(t){return l(this,Oa)||l(this,pe).recordFullPageBBox(l(this,He)),this}getSimpleIndex(t){return l(this,pe).getSimpleIndex(t)}recordDependencies(t,e){return l(this,pe).recordDependencies(l(this,He),e),this}recordNamedDependency(t,e){return l(this,pe).recordNamedDependency(l(this,He),e),this}recordOperation(t){return l(this,pe).recordOperation(l(this,He),!0),this}recordShowTextOperation(t){return l(this,pe).recordShowTextOperation(l(this,He),!0),this}bboxToClipBoxDropOperation(t){return l(this,Oa)||l(this,pe).bboxToClipBoxDropOperation(l(this,He),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};pe=new WeakMap,He=new WeakMap,Oa=new WeakMap,Ch=new WeakMap,Mh=new WeakMap;let o0=dx;const ua={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ni={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function XA(g,t){if(!t)return;const e=t[2]-t[0],a=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,a),g.clip(s)}class ex{isModifyingCurrentTransform(){return!1}getPattern(){ve("Abstract method `getPattern` called.")}}class sN extends ex{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const a of this._colorStops)e.addColorStop(a[0],a[1]);return e}getPattern(t,e,a,s){let o;if(s===Ni.STROKE||s===Ni.FILL){const u=e.current.getClippedPathBoundingBox(s,ke(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,m=e.cachedCanvases.getCanvas("pattern",h,d),b=m.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-u[0],-u[1]),a=ht.transform(a,[1,0,0,1,u[0],u[1]]),b.transform(...e.baseTransform),this.matrix&&b.transform(...this.matrix),XA(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),o=t.createPattern(m.canvas,"no-repeat");const y=new DOMMatrix(a);o.setTransform(y)}else XA(t,this._bbox),o=this._createGradient(t);return o}}function fA(g,t,e,a,s,o,u,h){const d=t.coords,m=t.colors,b=g.data,y=g.width*4;let v;d[e+1]>d[a+1]&&(v=e,e=a,a=v,v=o,o=u,u=v),d[a+1]>d[s+1]&&(v=a,a=s,s=v,v=u,u=h,h=v),d[e+1]>d[a+1]&&(v=e,e=a,a=v,v=o,o=u,u=v);const x=(d[e]+t.offsetX)*t.scaleX,_=(d[e+1]+t.offsetY)*t.scaleY,T=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY,M=(d[s]+t.offsetX)*t.scaleX,k=(d[s+1]+t.offsetY)*t.scaleY;if(_>=k)return;const N=m[o],O=m[o+1],z=m[o+2],j=m[u],H=m[u+1],U=m[u+2],X=m[h],J=m[h+1],tt=m[h+2],nt=Math.round(_),bt=Math.round(k);let st,gt,B,P,W,at,pt,At;for(let ot=nt;ot<=bt;ot++){if(ot<R){const Mt=ot<_?0:(_-ot)/(_-R);st=x-(x-T)*Mt,gt=N-(N-j)*Mt,B=O-(O-H)*Mt,P=z-(z-U)*Mt}else{let Mt;ot>k?Mt=1:R===k?Mt=0:Mt=(R-ot)/(R-k),st=T-(T-M)*Mt,gt=j-(j-X)*Mt,B=H-(H-J)*Mt,P=U-(U-tt)*Mt}let lt;ot<_?lt=0:ot>k?lt=1:lt=(_-ot)/(_-k),W=x-(x-M)*lt,at=N-(N-X)*lt,pt=O-(O-J)*lt,At=z-(z-tt)*lt;const xt=Math.round(Math.min(st,W)),zt=Math.round(Math.max(st,W));let qt=y*ot+xt*4;for(let Mt=xt;Mt<=zt;Mt++)lt=(st-Mt)/(st-W),lt<0?lt=0:lt>1&&(lt=1),b[qt++]=gt-(gt-at)*lt|0,b[qt++]=B-(B-pt)*lt|0,b[qt++]=P-(P-At)*lt|0,b[qt++]=255}}function rN(g,t,e){const a=t.coords,s=t.colors;let o,u;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(a.length/h)-1,m=h-1;for(o=0;o<d;o++){let b=o*h;for(let y=0;y<m;y++,b++)fA(g,e,a[b],a[b+1],a[b+h],s[b],s[b+1],s[b+h]),fA(g,e,a[b+h+1],a[b+1],a[b+h],s[b+h+1],s[b+1],s[b+h])}break;case"triangles":for(o=0,u=a.length;o<u;o+=3)fA(g,e,a[o],a[o+1],a[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class lN extends ex{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,a){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-h,b=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(m*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(b*t[1]*1.1)),3e3),x=m/y,_=b/v,T={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/x,scaleY:1/_},R=y+4,M=v+4,k=a.getCanvas("mesh",R,M),N=k.context,O=N.createImageData(y,v);if(e){const j=O.data;for(let H=0,U=j.length;H<U;H+=4)j[H]=e[0],j[H+1]=e[1],j[H+2]=e[2],j[H+3]=255}for(const j of this._figures)rN(O,j,T);return N.putImageData(O,2,2),{canvas:k.canvas,offsetX:h-2*x,offsetY:d-2*_,scaleX:x,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,a,s){XA(t,this._bbox);const o=new Float32Array(2);if(s===Ni.SHADING)ht.singularValueDecompose2dScale(ke(t),o);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;ht.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=d}else ht.singularValueDecompose2dScale(e.baseTransform,o);const u=this._createMeshCanvas(o,s===Ni.SHADING?null:this._background,e.cachedCanvases);return s!==Ni.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class oN extends ex{getPattern(){return"hotpink"}}function cN(g){switch(g[0]){case"RadialAxial":return new sN(g);case"Mesh":return new lN(g);case"Dummy":return new oN}throw new Error(`Unknown IR type: ${g[0]}`)}const BT={COLORED:1,UNCOLORED:2},T0=class T0{constructor(t,e,a,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=a,this.baseTransform=s}createPatternCanvas(t,e){var at,pt;const{bbox:a,operatorList:s,paintType:o,tilingType:u,color:h,canvasGraphicsFactory:d}=this;let{xstep:m,ystep:b}=this;m=Math.abs(m),b=Math.abs(b),j0("TilingType: "+u);const y=a[0],v=a[1],x=a[2],_=a[3],T=x-y,R=_-v,M=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,M);const[k,N]=M;ht.singularValueDecompose2dScale(this.baseTransform,M);const O=k*M[0],z=N*M[1];let j=T,H=R,U=!1,X=!1;const J=Math.ceil(m*O),tt=Math.ceil(b*z),nt=Math.ceil(T*O),bt=Math.ceil(R*z);J>=nt?j=m:U=!0,tt>=bt?H=b:X=!0;const st=this.getSizeAndScale(j,this.ctx.canvas.width,O),gt=this.getSizeAndScale(H,this.ctx.canvas.height,z),B=t.cachedCanvases.getCanvas("pattern",st.size,gt.size),P=B.context,W=d.createCanvasGraphics(P,e);if(W.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(W,o,h),P.translate(-st.scale*y,-gt.scale*v),W.transform(0,st.scale,0,0,gt.scale,0,0),P.save(),(at=W.dependencyTracker)==null||at.save(),this.clipBbox(W,y,v,x,_),W.baseTransform=ke(W.ctx),W.executeOperatorList(s),W.endDrawing(),(pt=W.dependencyTracker)==null||pt.restore(),P.restore(),U||X){const At=B.canvas;U&&(j=m),X&&(H=b);const ot=this.getSizeAndScale(j,this.ctx.canvas.width,O),lt=this.getSizeAndScale(H,this.ctx.canvas.height,z),xt=ot.size,zt=lt.size,qt=t.cachedCanvases.getCanvas("pattern-workaround",xt,zt),Mt=qt.context,Be=U?Math.floor(T/m):0,qe=X?Math.floor(R/b):0;for(let Zi=0;Zi<=Be;Zi++)for(let Re=0;Re<=qe;Re++)Mt.drawImage(At,xt*Zi,zt*Re,xt,zt,0,0,xt,zt);return{canvas:qt.canvas,scaleX:ot.scale,scaleY:lt.scale,offsetX:y,offsetY:v}}return{canvas:B.canvas,scaleX:st.scale,scaleY:gt.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,a){const s=Math.max(T0.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*a);return o>=s?o=s:a=o/t,{scale:a,size:o}}clipBbox(t,e,a,s,o){const u=s-e,h=o-a;t.ctx.rect(e,a,u,h),ht.axialAlignedBoundingBox([e,a,s,o],ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,a){const s=t.ctx,o=t.current;switch(e){case BT.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;s.fillStyle=o.fillColor=u,s.strokeStyle=o.strokeColor=h;break;case BT.UNCOLORED:s.fillStyle=s.strokeStyle=a,o.fillColor=o.strokeColor=a;break;default:throw new RR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,a,s,o){let u=a;s!==Ni.SHADING&&(u=ht.transform(u,e.baseTransform),this.matrix&&(u=ht.transform(u,this.matrix)));const h=this.createPatternCanvas(e,o);let d=new DOMMatrix(u);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const m=t.createPattern(h.canvas,"repeat");return m.setTransform(d),m}};it(T0,"MAX_PATTERN_SIZE",3e3);let KA=T0;function uN({src:g,srcPos:t=0,dest:e,width:a,height:s,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const h=vi.isLittleEndian?4278190080:255,[d,m]=u?[o,h]:[h,o],b=a>>3,y=a&7,v=g.length;e=new Uint32Array(e.buffer);let x=0;for(let _=0;_<s;_++){for(const R=t+b;t<R;t++){const M=t<v?g[t]:255;e[x++]=M&128?m:d,e[x++]=M&64?m:d,e[x++]=M&32?m:d,e[x++]=M&16?m:d,e[x++]=M&8?m:d,e[x++]=M&4?m:d,e[x++]=M&2?m:d,e[x++]=M&1?m:d}if(y===0)continue;const T=t<v?g[t++]:255;for(let R=0;R<y;R++)e[x++]=T&1<<7-R?m:d}return{srcPos:t,destPos:x}}const zT=16,jT=100,hN=15,FT=10,yn=16,mA=new DOMMatrix,Wn=new Float32Array(2),Ku=new Float32Array([1/0,1/0,-1/0,-1/0]);function dN(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(e,a){t.translate(e,a),this.__originalTranslate(e,a)},g.scale=function(e,a){t.scale(e,a),this.__originalScale(e,a)},g.transform=function(e,a,s,o,u,h){t.transform(e,a,s,o,u,h),this.__originalTransform(e,a,s,o,u,h)},g.setTransform=function(e,a,s,o,u,h){t.setTransform(e,a,s,o,u,h),this.__originalSetTransform(e,a,s,o,u,h)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(e){t.rotate(e),this.__originalRotate(e)},g.clip=function(e){t.clip(e),this.__originalClip(e)},g.moveTo=function(e,a){t.moveTo(e,a),this.__originalMoveTo(e,a)},g.lineTo=function(e,a){t.lineTo(e,a),this.__originalLineTo(e,a)},g.bezierCurveTo=function(e,a,s,o,u,h){t.bezierCurveTo(e,a,s,o,u,h),this.__originalBezierCurveTo(e,a,s,o,u,h)},g.rect=function(e,a,s,o){t.rect(e,a,s,o),this.__originalRect(e,a,s,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class fN{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,a){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,a)):(s=this.canvasFactory.create(e,a),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function xb(g,t,e,a,s,o,u,h,d,m){const[b,y,v,x,_,T]=ke(g);if(y===0&&v===0){const k=u*b+_,N=Math.round(k),O=h*x+T,z=Math.round(O),j=(u+d)*b+_,H=Math.abs(Math.round(j)-N)||1,U=(h+m)*x+T,X=Math.abs(Math.round(U)-z)||1;return g.setTransform(Math.sign(b),0,0,Math.sign(x),N,z),g.drawImage(t,e,a,s,o,0,0,H,X),g.setTransform(b,y,v,x,_,T),[H,X]}if(b===0&&x===0){const k=h*v+_,N=Math.round(k),O=u*y+T,z=Math.round(O),j=(h+m)*v+_,H=Math.abs(Math.round(j)-N)||1,U=(u+d)*y+T,X=Math.abs(Math.round(U)-z)||1;return g.setTransform(0,Math.sign(y),Math.sign(v),0,N,z),g.drawImage(t,e,a,s,o,0,0,X,H),g.setTransform(b,y,v,x,_,T),[X,H]}g.drawImage(t,e,a,s,o,u,h,d,m);const R=Math.hypot(b,y),M=Math.hypot(v,x);return[R*d,M*m]}class PT{constructor(t,e,a){it(this,"alphaIsShape",!1);it(this,"fontSize",0);it(this,"fontSizeScale",1);it(this,"textMatrix",null);it(this,"textMatrixScale",1);it(this,"fontMatrix",AA);it(this,"leading",0);it(this,"x",0);it(this,"y",0);it(this,"lineX",0);it(this,"lineY",0);it(this,"charSpacing",0);it(this,"wordSpacing",0);it(this,"textHScale",1);it(this,"textRenderingMode",Ti.FILL);it(this,"textRise",0);it(this,"fillColor","#000000");it(this,"strokeColor","#000000");it(this,"patternFill",!1);it(this,"patternStroke",!1);it(this,"fillAlpha",1);it(this,"strokeAlpha",1);it(this,"lineWidth",1);it(this,"activeSMask",null);it(this,"transferMaps","none");a==null||a(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ku.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ni.FILL,e=null){const a=this.minMax.slice();if(t===Ni.STROKE){e||ve("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(e,Wn);const s=Wn[0]*this.lineWidth/2,o=Wn[1]*this.lineWidth/2;a[0]-=s,a[1]-=o,a[2]+=s,a[3]+=o}return a}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ku,0)}getClippedPathBoundingBox(t=Ni.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function HT(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,a=t.width,s=e%yn,o=(e-s)/yn,u=s===0?o:o+1,h=g.createImageData(a,yn);let d=0,m;const b=t.data,y=h.data;let v,x,_,T;if(t.kind===em.GRAYSCALE_1BPP){const R=b.byteLength,M=new Uint32Array(y.buffer,0,y.byteLength>>2),k=M.length,N=a+7>>3,O=4294967295,z=vi.isLittleEndian?4278190080:255;for(v=0;v<u;v++){for(_=v<o?yn:s,m=0,x=0;x<_;x++){const j=R-d;let H=0;const U=j>N?a:j*8-7,X=U&-8;let J=0,tt=0;for(;H<X;H+=8)tt=b[d++],M[m++]=tt&128?O:z,M[m++]=tt&64?O:z,M[m++]=tt&32?O:z,M[m++]=tt&16?O:z,M[m++]=tt&8?O:z,M[m++]=tt&4?O:z,M[m++]=tt&2?O:z,M[m++]=tt&1?O:z;for(;H<U;H++)J===0&&(tt=b[d++],J=128),M[m++]=tt&J?O:z,J>>=1}for(;m<k;)M[m++]=0;g.putImageData(h,0,v*yn)}}else if(t.kind===em.RGBA_32BPP){for(x=0,T=a*yn*4,v=0;v<o;v++)y.set(b.subarray(d,d+T)),d+=T,g.putImageData(h,0,x),x+=yn;v<u&&(T=a*s*4,y.set(b.subarray(d,d+T)),g.putImageData(h,0,x))}else if(t.kind===em.RGB_24BPP)for(_=yn,T=a*_,v=0;v<u;v++){for(v>=o&&(_=s,T=a*_),m=0,x=T;x--;)y[m++]=b[d++],y[m++]=b[d++],y[m++]=b[d++],y[m++]=255;g.putImageData(h,0,v*yn)}else throw new Error(`bad image kind: ${t.kind}`)}function UT(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,a=t.width,s=e%yn,o=(e-s)/yn,u=s===0?o:o+1,h=g.createImageData(a,yn);let d=0;const m=t.data,b=h.data;for(let y=0;y<u;y++){const v=y<o?yn:s;({srcPos:d}=uN({src:m,srcPos:d,dest:b,width:a,height:v,nonBlackColor:0})),g.putImageData(h,0,y*yn)}}function Df(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of e)g[a]!==void 0&&(t[a]=g[a]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function wb(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function IT(g,t){if(t)return!0;ht.singularValueDecompose2dScale(g,Wn);const e=Math.fround(Ga.pixelRatio*Or.PDF_TO_CSS_UNITS);return Wn[0]<=e&&Wn[1]<=e}const mN=["butt","round","square"],gN=["miter","round","bevel"],pN={},GT={};var qa,WA,$A,QA;const fx=class fx{constructor(t,e,a,s,o,{optionalContentConfig:u,markedContentStack:h=null},d,m,b){w(this,qa);this.ctx=t,this.current=new PT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=a,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new fN(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=b??null}getObject(t,e,a=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):a}beginDrawing({transform:t,viewport:e,transparency:a=!1,background:s=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=h,a){const d=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ke(this.compositeCtx))}this.ctx.save(),wb(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ke(this.ctx)}executeOperatorList(t,e,a,s,o){var M;const u=t.argsArray,h=t.fnArray;let d=e||0;const m=u.length;if(m===d)return d;const b=m-d>FT&&typeof a=="function",y=b?Date.now()+hN:0;let v=0;const x=this.commonObjs,_=this.objs;let T,R;for(;;){if(s!==void 0&&d===s.nextBreakPoint)return s.breakIt(d,a),d;if(!o||o(d))if(T=h[d],R=u[d]??null,T!==Md.dependency)R===null?this[T](d):this[T](d,...R);else for(const k of R){(M=this.dependencyTracker)==null||M.recordNamedData(k,d);const N=k.startsWith("g_")?x:_;if(!N.has(k))return N.get(k,a),d}if(d++,d===m)return d;if(b&&++v>FT){if(Date.now()>y)return a(),d;v=0}}}endDrawing(){E(this,qa,WA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,qa,$A).call(this)}_scaleImage(t,e){const a=t.width??t.displayWidth,s=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),h=a,d=s,m="prescale1",b,y;for(;o>2&&h>1||u>2&&d>1;){let v=h,x=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),u>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/x),b=this.cachedCanvases.getCanvas(m,v,x),y=b.context,y.clearRect(0,0,v,x),y.drawImage(t,0,0,h,d,0,0,v,x),t=b.canvas,h=v,d=x,m=m==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){var J,tt;const a=this.ctx,{width:s,height:o}=e,u=this.current.fillColor,h=this.current.patternFill,d=ke(a);let m,b,y,v;if((e.bitmap||e.data)&&e.count>1){const nt=e.bitmap||e.data.buffer;b=JSON.stringify(h?d:[d.slice(0,4),u]),m=this._cachedBitmapsMap.get(nt),m||(m=new Map,this._cachedBitmapsMap.set(nt,m));const bt=m.get(b);if(bt&&!h){const st=Math.round(Math.min(d[0],d[2])+d[4]),gt=Math.round(Math.min(d[1],d[3])+d[5]);return(J=this.dependencyTracker)==null||J.recordDependencies(t,ua.transformAndFill),{canvas:bt,offsetX:st,offsetY:gt}}y=bt}y||(v=this.cachedCanvases.getCanvas("maskCanvas",s,o),UT(v.context,e));let x=ht.transform(d,[1/s,0,0,-1/o,0,0]);x=ht.transform(x,[1,0,0,1,0,-o]);const _=Ku.slice();ht.axialAlignedBoundingBox([0,0,s,o],x,_);const[T,R,M,k]=_,N=Math.round(M-T)||1,O=Math.round(k-R)||1,z=this.cachedCanvases.getCanvas("fillCanvas",N,O),j=z.context,H=T,U=R;j.translate(-H,-U),j.transform(...x),y||(y=this._scaleImage(v.canvas,Za(j)),y=y.img,m&&h&&m.set(b,y)),j.imageSmoothingEnabled=IT(ke(j),e.interpolate),xb(j,y,0,0,y.width,y.height,0,0,s,o),j.globalCompositeOperation="source-in";const X=ht.transform(Za(j),[1,0,0,1,-H,-U]);return j.fillStyle=h?u.getPattern(a,this,X,Ni.FILL,t):u,j.fillRect(0,0,s,o),m&&!h&&(this.cachedCanvases.delete("fillCanvas"),m.set(b,z.canvas)),(tt=this.dependencyTracker)==null||tt.recordDependencies(t,ua.transformAndFill),{canvas:z.canvas,offsetX:Math.round(H),offsetY:Math.round(U)}}setLineWidth(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("lineCap",t),this.ctx.lineCap=mN[e]}setLineJoin(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("lineJoin",t),this.ctx.lineJoin=gN[e]}setMiterLimit(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,a){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=a)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var a,s,o,u,h;for(const[d,m]of e)switch(d){case"LW":this.setLineWidth(t,m);break;case"LC":this.setLineCap(t,m);break;case"LJ":this.setLineJoin(t,m);break;case"ML":this.setMiterLimit(t,m);break;case"D":this.setDash(t,m[0],m[1]);break;case"RI":this.setRenderingIntent(t,m);break;case"FL":this.setFlatness(t,m);break;case"Font":this.setFont(t,m[0],m[1]);break;case"CA":(a=this.dependencyTracker)==null||a.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=m;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=m;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=m;break;case"SMask":(u=this.dependencyTracker)==null||u.recordSimpleData("SMask",t),this.current.activeSMask=m?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(m);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,a=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(s,e,a);this.suspendedCtx=this.ctx;const u=this.ctx=o.context;u.setTransform(this.suspendedCtx.getTransform()),Df(this.suspendedCtx,u),dN(u,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Df(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,a=this.suspendedCtx;this.composeSMask(a,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,a,s){const o=s[0],u=s[1],h=s[2]-o,d=s[3]-u;h===0||d===0||(this.genericComposeSMask(e.context,a,h,d,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(a.canvas,0,0),t.restore())}genericComposeSMask(t,e,a,s,o,u,h,d,m,b,y){let v=t.canvas,x=d-b,_=m-y;if(u)if(x<0||_<0||x+a>v.width||_+s>v.height){const R=this.cachedCanvases.getCanvas("maskExtension",a,s),M=R.context;M.drawImage(v,-x,-_),M.globalCompositeOperation="destination-atop",M.fillStyle=u,M.fillRect(0,0,a,s),M.globalCompositeOperation="source-over",v=R.canvas,x=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(x,_,a,s),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(x,_,a,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const T=new Path2D;T.rect(d,m,a,s),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(v,x,_,a,s,d,m,a,s),e.restore()}save(t){var a;this.inSMaskMode&&Df(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(a=this.dependencyTracker)==null||a.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Df(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,a,s,o,u,h){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",t),this.ctx.transform(e,a,s,o,u,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,a,s){let[o]=a;if(!s){o||(o=a[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const u=e===Md.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-u,s[2]+u,s[1]-u,s[3]+u).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const u=a[0]=new Path2D;for(let h=0,d=o.length;h<d;)switch(o[h++]){case pb.moveTo:u.moveTo(o[h++],o[h++]);break;case pb.lineTo:u.lineTo(o[h++],o[h++]);break;case pb.curveTo:u.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);break;case pb.closePath:u.closePath();break;default:_t(`Unrecognized drawing path operator: ${o[h-1]}`);break}o=u}ht.axialAlignedBoundingBox(s,ke(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,a=!0){var u;const s=this.ctx,o=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const h=o.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=o.getPattern(s,this,Za(s),Ni.STROKE,t),h){const d=new Path2D;d.addPath(e,s.getTransform().invertSelf().multiplySelf(h)),e=d}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(u=this.dependencyTracker)==null||u.recordDependencies(t,ua.stroke),a&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ni.STROKE,ke(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,a=!0){var m,b,y;const s=this.ctx,o=this.current.fillColor,u=this.current.patternFill;let h=!1;if(u){const v=o.isModifyingCurrentTransform()?s.getTransform():null;if((m=this.dependencyTracker)==null||m.save(t),s.save(),s.fillStyle=o.getPattern(s,this,Za(s),Ni.FILL,t),v){const x=new Path2D;x.addPath(e,s.getTransform().invertSelf().multiplySelf(v)),e=x}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(b=this.dependencyTracker)==null||b.recordDependencies(t,ua.fill),h&&(s.restore(),(y=this.dependencyTracker)==null||y.restore(t)),a&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var a;this.ctx.fill(e),(a=this.dependencyTracker)==null||a.recordDependencies(t,ua.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=pN}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=GT}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,a=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,o=a.getTransform().invertSelf();for(const{transform:u,x:h,y:d,fontSize:m,path:b}of e)b&&s.addPath(b,new DOMMatrix(u).preMultiplySelf(o).translate(h,d).scale(m,-m));a.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,a){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),o=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=s.fontMatrix||AA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+e),a<0?(a=-a,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=a,s.isType3Font)return;const u=s.loadedName||"sans-serif",h=((v=s.systemFontInfo)==null?void 0:v.css)||`"${u}", ${s.fallbackName}`;let d="normal";s.black?d="900":s.bold&&(d="bold");const m=s.italic?"italic":"normal";let b=a;a<zT?b=zT:a>jT&&(b=jT),this.current.fontSizeScale=a/b,this.ctx.font=`${m} ${d} ${b}px ${h}`}setTextRenderingMode(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,a){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=a}setLeadingMoveText(t,e,a){this.setLeading(t,-a),this.moveText(t,e,a)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",t);const{current:a}=this;a.textMatrix=e,a.textMatrixScale=Math.hypot(e[0],e[1]),a.x=a.lineX=0,a.y=a.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,a,s,o,u){var M,k,N,O;const h=this.ctx,d=this.current,m=d.font,b=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,v=b&Ti.FILL_STROKE_MASK,x=!!(b&Ti.ADD_TO_PATH_FLAG),_=d.patternFill&&!m.missingFile,T=d.patternStroke&&!m.missingFile;let R;if((m.disableFontFace||x||_||T)&&!m.missingFile&&(R=m.getPathGenerator(this.commonObjs,e)),R&&(m.disableFontFace||_||T)){h.save(),h.translate(a,s),h.scale(y,-y),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,h,m);let z;if(v===Ti.FILL||v===Ti.FILL_STROKE)if(o){z=h.getTransform(),h.setTransform(...o);const j=E(this,qa,QA).call(this,R,z,o);h.fill(j)}else h.fill(R);if(v===Ti.STROKE||v===Ti.FILL_STROKE)if(u){z||(z=h.getTransform()),h.setTransform(...u);const{a:j,b:H,c:U,d:X}=z,J=ht.inverseTransform(u),tt=ht.transform([j,H,U,X,0,0],J);ht.singularValueDecompose2dScale(tt,Wn),h.lineWidth*=Math.max(Wn[0],Wn[1])/y,h.stroke(E(this,qa,QA).call(this,R,z,u))}else h.lineWidth/=y,h.stroke(R);h.restore()}else(v===Ti.FILL||v===Ti.FILL_STROKE)&&(h.fillText(e,a,s),(k=this.dependencyTracker)==null||k.recordCharacterBBox(t,h,m,y,a,s,()=>h.measureText(e))),(v===Ti.STROKE||v===Ti.FILL_STROKE)&&(this.dependencyTracker&&((N=this.dependencyTracker)==null||N.recordCharacterBBox(t,h,m,y,a,s,()=>h.measureText(e)).recordDependencies(t,ua.stroke)),h.strokeText(e,a,s));x&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ke(h),x:a,y:s,fontSize:y,path:R}),(O=this.dependencyTracker)==null||O.recordCharacterBBox(t,h,m,y,a,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let a=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){a=!0;break}return kt(this,"isFontSubpixelAAEnabled",a)}showText(t,e){var U,X,J,tt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ua.showText).resetBBox(t),this.current.textRenderingMode&Ti.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const a=this.current,s=a.font;if(s.isType3Font){this.showType3Text(t,e),(U=this.dependencyTracker)==null||U.recordShowTextOperation(t);return}const o=a.fontSize;if(o===0){(X=this.dependencyTracker)==null||X.recordOperation(t);return}const u=this.ctx,h=a.fontSizeScale,d=a.charSpacing,m=a.wordSpacing,b=a.fontDirection,y=a.textHScale*b,v=e.length,x=s.vertical,_=x?1:-1,T=s.defaultVMetrics,R=o*a.fontMatrix[0],M=a.textRenderingMode===Ti.FILL&&!s.disableFontFace&&!a.patternFill;u.save(),a.textMatrix&&u.transform(...a.textMatrix),u.translate(a.x,a.y+a.textRise),b>0?u.scale(y,-1):u.scale(y,1);let k,N;if(a.patternFill){u.save();const nt=a.fillColor.getPattern(u,this,Za(u),Ni.FILL,t);k=ke(u),u.restore(),u.fillStyle=nt}if(a.patternStroke){u.save();const nt=a.strokeColor.getPattern(u,this,Za(u),Ni.STROKE,t);N=ke(u),u.restore(),u.strokeStyle=nt}let O=a.lineWidth;const z=a.textMatrixScale;if(z===0||O===0){const nt=a.textRenderingMode&Ti.FILL_STROKE_MASK;(nt===Ti.STROKE||nt===Ti.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=z;if(h!==1&&(u.scale(h,h),O/=h),u.lineWidth=O,s.isInvalidPDFjsFont){const nt=[];let bt=0;for(const gt of e)nt.push(gt.unicode),bt+=gt.width;const st=nt.join("");if(u.fillText(st,0,0),this.dependencyTracker!==null){const gt=u.measureText(st);this.dependencyTracker.recordBBox(t,this.ctx,-gt.actualBoundingBoxLeft,gt.actualBoundingBoxRight,-gt.actualBoundingBoxAscent,gt.actualBoundingBoxDescent).recordShowTextOperation(t)}a.x+=bt*R*y,u.restore(),this.compose();return}let j=0,H;for(H=0;H<v;++H){const nt=e[H];if(typeof nt=="number"){j+=_*nt*o/1e3;continue}let bt=!1;const st=(nt.isSpace?m:0)+d,gt=nt.fontChar,B=nt.accent;let P,W,at=nt.width;if(x){const ot=nt.vmetric||T,lt=-(nt.vmetric?ot[1]:at*.5)*R,xt=ot[2]*R;at=ot?-ot[0]:at,P=lt/h,W=(j+xt)/h}else P=j/h,W=0;let pt;if(s.remeasure&&at>0){pt=u.measureText(gt);const ot=pt.width*1e3/o*h;if(at<ot&&this.isFontSubpixelAAEnabled){const lt=at/ot;bt=!0,u.save(),u.scale(lt,1),P/=lt}else at!==ot&&(P+=(at-ot)/2e3*o/h)}if(this.contentVisible&&(nt.isInFont||s.missingFile)){if(M&&!B)u.fillText(gt,P,W),(J=this.dependencyTracker)==null||J.recordCharacterBBox(t,u,pt?{bbox:null}:s,o/h,P,W,()=>pt??u.measureText(gt));else if(this.paintChar(t,gt,P,W,k,N),B){const ot=P+o*B.offset.x/h,lt=W-o*B.offset.y/h;this.paintChar(t,B.fontChar,ot,lt,k,N)}}const At=x?at*R-st*b:at*R+st*b;j+=At,bt&&u.restore()}x?a.y-=j:a.x+=j*y,u.restore(),this.compose(),(tt=this.dependencyTracker)==null||tt.recordShowTextOperation(t)}showType3Text(t,e){const a=this.ctx,s=this.current,o=s.font,u=s.fontSize,h=s.fontDirection,d=o.vertical?1:-1,m=s.charSpacing,b=s.wordSpacing,y=s.textHScale*h,v=s.fontMatrix||AA,x=e.length,_=s.textRenderingMode===Ti.INVISIBLE;let T,R,M,k;if(_||u===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),s.textMatrix&&a.transform(...s.textMatrix),a.translate(s.x,s.y+s.textRise),a.scale(y,h);const N=this.dependencyTracker;for(this.dependencyTracker=N?new o0(N,t):null,T=0;T<x;++T){if(R=e[T],typeof R=="number"){k=d*R*u/1e3,this.ctx.translate(k,0),s.x+=k*y;continue}const O=(R.isSpace?b:0)+m,z=o.charProcOperatorList[R.operatorListId];z?this.contentVisible&&(this.save(),a.scale(u,u),a.transform(...v),this.executeOperatorList(z),this.restore()):_t(`Type3 character "${R.operatorListId}" is not available.`);const j=[R.width,0];ht.applyTransform(j,v),M=j[0]*u+O,a.translate(M,0),s.x+=M*y}a.restore(),N&&(this.dependencyTracker=N)}setCharWidth(t,e,a){}setCharWidthAndBounds(t,e,a,s,o,u,h){var m;const d=new Path2D;d.rect(s,o,u-s,h-o),this.ctx.clip(d),(m=this.dependencyTracker)==null||m.recordBBox(t,this.ctx,s,u,o,h).recordClipBox(t,this.ctx,s,u,o,h),this.endPath(t)}getColorN_Pattern(t,e){let a;if(e[0]==="TilingPattern"){const s=this.baseTransform||ke(this.ctx),o={createCanvasGraphics:(u,h)=>new fx(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new o0(this.dependencyTracker,h,!0):null)};a=new KA(e,this.ctx,o,s)}else a=this._getPattern(t,e[1],e[2]);return a}setStrokeColorN(t,...e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,a=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=cN(this.getObject(t,e)),this.cachedPatterns.set(e,s)),a&&(s.matrix=a),s}shadingFill(t,e){var u;if(!this.contentVisible)return;const a=this.ctx;this.save(t);const s=this._getPattern(t,e);a.fillStyle=s.getPattern(a,this,Za(a),Ni.SHADING,t);const o=Za(a);if(o){const{width:h,height:d}=a.canvas,m=Ku.slice();ht.axialAlignedBoundingBox([0,0,h,d],o,m);const[b,y,v,x]=m;this.ctx.fillRect(b,y,v-b,x-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(u=this.dependencyTracker)==null||u.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ua.transform).recordDependencies(t,ua.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ve("Should not call beginInlineImage")}beginImageData(){ve("Should not call beginImageData")}paintFormXObjectBegin(t,e,a){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ke(this.ctx),a)){ht.axialAlignedBoundingBox(a,this.baseTransform,this.current.minMax);const[o,u,h,d]=a,m=new Path2D;m.rect(o,u,h-o,d-u),this.ctx.clip(m),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,o,h,u,d),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var N;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;e.isolated||j0("TODO: Support non-isolated groups."),e.knockout&&_t("Knockout groups not supported.");const s=ke(a);if(e.matrix&&a.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Ku.slice();ht.axialAlignedBoundingBox(e.bbox,ke(a),o);const u=[0,0,a.canvas.width,a.canvas.height];o=ht.intersect(o,u)||[0,0,0,0];const h=Math.floor(o[0]),d=Math.floor(o[1]),m=Math.max(Math.ceil(o[2])-h,1),b=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,m,b]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,m,b),x=v.context;x.translate(-h,-d),x.transform(...s);let _=new Path2D;const[T,R,M,k]=e.bbox;if(_.rect(T,R,M-T,k-R),e.matrix){const O=new Path2D;O.addPath(_,new DOMMatrix(e.matrix)),_=O}x.clip(_),e.smask&&this.smaskStack.push({canvas:v.canvas,context:x,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(a.setTransform(1,0,0,1,0,0),a.translate(h,d),a.save()),Df(a,x),this.ctx=x,(N=this.dependencyTracker)==null||N.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(a),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const u=ke(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...u);const h=Ku.slice();ht.axialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],u,h),this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,a,s,o,u){if(E(this,qa,WA).call(this),wb(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),a){const h=a[2]-a[0],d=a[3]-a[1];if(u&&this.annotationCanvasMap){s=s.slice(),s[4]-=a[0],s[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=h,a[3]=d,ht.singularValueDecompose2dScale(ke(this.ctx),Wn);const{viewportScale:m}=this,b=Math.ceil(h*this.outputScaleX*m),y=Math.ceil(d*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(b,y);const{canvas:v,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Wn[0],0,0,-Wn[1],0,d*Wn[1]),wb(this.ctx)}else{wb(this.ctx),this.endPath(t);const m=new Path2D;m.rect(a[0],a[1],h,d),this.ctx.clip(m)}}this.current=new PT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),E(this,qa,$A).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const a=e.count;e=this.getObject(t,e.data,e),e.count=a;const s=this.ctx,o=this._createMaskCanvas(t,e),u=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(u,o.offsetX,o.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+u.width,o.offsetY,o.offsetY+u.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,a,s=0,o=0,u,h){var y,v,x;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const m=ke(d);d.transform(a,s,o,u,0,0);const b=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,b.offsetX-m[4],b.offsetY-m[5]),(y=this.dependencyTracker)==null||y.resetBBox(t);for(let _=0,T=h.length;_<T;_+=2){const R=ht.transform(m,[a,s,o,u,h[_],h[_+1]]);d.drawImage(b.canvas,R[4],R[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,R[4],R[4]+b.canvas.width,R[5],R[5]+b.canvas.height)}d.restore(),this.compose(),(x=this.dependencyTracker)==null||x.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var u,h,d;if(!this.contentVisible)return;const a=this.ctx,s=this.current.fillColor,o=this.current.patternFill;(u=this.dependencyTracker)==null||u.resetBBox(t).recordDependencies(t,ua.transformAndFill);for(const m of e){const{data:b,width:y,height:v,transform:x}=m,_=this.cachedCanvases.getCanvas("maskCanvas",y,v),T=_.context;T.save();const R=this.getObject(t,b,m);UT(T,R),T.globalCompositeOperation="source-in",T.fillStyle=o?s.getPattern(T,this,Za(a),Ni.FILL,t):s,T.fillRect(0,0,y,v),T.restore(),a.save(),a.transform(...x),a.scale(1,-1),xb(a,_.canvas,0,0,y,v,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,a,0,y,0,v),a.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const a=this.getObject(t,e);if(!a){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,a)}paintImageXObjectRepeat(t,e,a,s,o){if(!this.contentVisible)return;const u=this.getObject(t,e);if(!u){_t("Dependent image isn't ready yet");return}const h=u.width,d=u.height,m=[];for(let b=0,y=o.length;b<y;b+=2)m.push({transform:[a,0,0,s,o[b],o[b+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,u,m)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:a,height:s}=t,o=this.cachedCanvases.getCanvas("inlineImage",a,s),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t,e){var m;if(!this.contentVisible)return;const a=e.width,s=e.height,o=this.ctx;this.save(t);const{filter:u}=o;u!=="none"&&u!==""&&(o.filter="none"),o.scale(1/a,-1/s);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const y=this.cachedCanvases.getCanvas("inlineImage",a,s).context;HT(y,e),h=this.applyTransferMapsToCanvas(y)}const d=this._scaleImage(h,Za(o));o.imageSmoothingEnabled=IT(ke(o),e.interpolate),(m=this.dependencyTracker)==null||m.resetBBox(t).recordBBox(t,o,0,a,-s,0).recordDependencies(t,ua.imageXObject).recordOperation(t),xb(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-s,a,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,a){var u,h,d;if(!this.contentVisible)return;const s=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const m=e.width,b=e.height,v=this.cachedCanvases.getCanvas("inlineImage",m,b).context;HT(v,e),o=this.applyTransferMapsToCanvas(v)}(u=this.dependencyTracker)==null||u.resetBBox(t);for(const m of a)s.save(),s.transform(...m.transform),s.scale(1,-1),xb(s,o,m.x,m.y,m.w,m.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,s,0,1,-1,0),s.restore();(d=this.dependencyTracker)==null||d.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ua.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,a){}beginMarkedContent(t,e){var a;(a=this.dependencyTracker)==null||a.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,a){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,a){var u,h;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const o=this.ctx;this.pendingClip?(s||(this.pendingClip===GT?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(u=this.dependencyTracker)==null||u.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),a=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(a,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:a,c:s,d:o}=this.ctx.getTransform();let u,h;if(a===0&&s===0){const d=Math.abs(e),m=Math.abs(o);if(d===m)if(t===0)u=h=1/d;else{const b=d*t;u=h=b<1?1/b:1}else if(t===0)u=1/d,h=1/m;else{const b=d*t,y=m*t;u=b<1?1/b:1,h=y<1?1/y:1}}else{const d=Math.abs(e*o-a*s),m=Math.hypot(e,a),b=Math.hypot(s,o);if(t===0)u=b/d,h=m/d;else{const y=t*d;u=b>y?b/y:1,h=m>y?m/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:a,current:{lineWidth:s}}=this,[o,u]=this.getScaleForStroking();if(o===u){a.lineWidth=(s||1)*o,a.stroke(t);return}const h=a.getLineDash();e&&a.save(),a.scale(o,u),mA.a=1/o,mA.d=1/u;const d=new Path2D;if(d.addPath(t,mA),h.length>0){const m=Math.max(o,u);a.setLineDash(h.map(b=>b/m)),a.lineDashOffset/=m}a.lineWidth=s||1,a.stroke(d),e&&a.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};qa=new WeakSet,WA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$A=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},QA=function(t,e,a){const s=new Path2D;return s.addPath(t,new DOMMatrix(a).invertSelf().multiplySelf(e)),s};let Ju=fx;for(const g in Md)Ju.prototype[g]!==void 0&&(Ju.prototype[Md[g]]=Ju.prototype[g]);var Dh,Rh,Um,Nh,Ob;const $u=class $u{constructor(t){w(this,Nh);w(this,Dh);w(this,Rh);w(this,Um);A(this,Dh,t),A(this,Rh,new DataView(l(this,Dh))),A(this,Um,new TextDecoder)}static write(t){const e=new TextEncoder,a={};let s=0;for(const m of $u.strings){const b=e.encode(t[m]);a[m]=b,s+=4+b.length}const o=new ArrayBuffer(s),u=new Uint8Array(o),h=new DataView(o);let d=0;for(const m of $u.strings){const b=a[m],y=b.length;h.setUint32(d,y),u.set(b,d+4),d+=4+y}return Gt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return E(this,Nh,Ob).call(this,0)}get fontWeight(){return E(this,Nh,Ob).call(this,1)}get italicAngle(){return E(this,Nh,Ob).call(this,2)}};Dh=new WeakMap,Rh=new WeakMap,Um=new WeakMap,Nh=new WeakSet,Ob=function(t){Gt(t<$u.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=l(this,Rh).getUint32(e)+4;const a=l(this,Rh).getUint32(e);return l(this,Um).decode(new Uint8Array(l(this,Dh),e+4,a))},it($u,"strings",["fontFamily","fontWeight","italicAngle"]);let c0=$u;var Rl,ds,lc,oc,Vf;const Qu=class Qu{constructor(t){w(this,oc);w(this,Rl);w(this,ds);w(this,lc);A(this,Rl,t),A(this,ds,new DataView(l(this,Rl))),A(this,lc,new TextDecoder)}static write(t){const e=new TextEncoder,a={};let s=0;for(const v of Qu.strings){const x=e.encode(t[v]);a[v]=x,s+=4+x.length}s+=4;let o,u,h=1+s;t.style&&(o=e.encode(t.style.style),u=e.encode(t.style.weight),h+=4+o.length+4+u.length);const d=new ArrayBuffer(h),m=new Uint8Array(d),b=new DataView(d);let y=0;b.setUint8(y++,t.guessFallback?1:0),b.setUint32(y,0),y+=4,s=0;for(const v of Qu.strings){const x=a[v],_=x.length;s+=4+_,b.setUint32(y,_),m.set(x,y+4),y+=4+_}return b.setUint32(y-s-4,s),t.style&&(b.setUint32(y,o.length),m.set(o,y+4),y+=4+o.length,b.setUint32(y,u.length),m.set(u,y+4),y+=4+u.length),Gt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}get guessFallback(){return l(this,ds).getUint8(0)!==0}get css(){return E(this,oc,Vf).call(this,0)}get loadedName(){return E(this,oc,Vf).call(this,1)}get baseFontName(){return E(this,oc,Vf).call(this,2)}get src(){return E(this,oc,Vf).call(this,3)}get style(){let t=1;t+=4+l(this,ds).getUint32(t);const e=l(this,ds).getUint32(t),a=l(this,lc).decode(new Uint8Array(l(this,Rl),t+4,e));t+=4+e;const s=l(this,ds).getUint32(t),o=l(this,lc).decode(new Uint8Array(l(this,Rl),t+4,s));return{style:a,weight:o}}};Rl=new WeakMap,ds=new WeakMap,lc=new WeakMap,oc=new WeakSet,Vf=function(t){Gt(t<Qu.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=l(this,ds).getUint32(e)+4;const a=l(this,ds).getUint32(e);return l(this,lc).decode(new Uint8Array(l(this,Rl),e+4,a))},it(Qu,"strings",["css","loadedName","baseFontName","src"]);let u0=Qu;var kh,Lh,Oh,Bh,On,fs,Im,he,Ge,Ma,Bb,Yf;const Rt=class Rt{constructor({data:t,extra:e}){w(this,Ge);w(this,fs);w(this,Im);w(this,he);A(this,fs,t),A(this,Im,new TextDecoder),A(this,he,new DataView(l(this,fs))),e&&Object.assign(this,e)}get black(){return E(this,Ge,Ma).call(this,0)}get bold(){return E(this,Ge,Ma).call(this,1)}get disableFontFace(){return E(this,Ge,Ma).call(this,2)}get fontExtraProperties(){return E(this,Ge,Ma).call(this,3)}get isInvalidPDFjsFont(){return E(this,Ge,Ma).call(this,4)}get isType3Font(){return E(this,Ge,Ma).call(this,5)}get italic(){return E(this,Ge,Ma).call(this,6)}get missingFile(){return E(this,Ge,Ma).call(this,7)}get remeasure(){return E(this,Ge,Ma).call(this,8)}get vertical(){return E(this,Ge,Ma).call(this,9)}get ascent(){return E(this,Ge,Bb).call(this,0)}get defaultWidth(){return E(this,Ge,Bb).call(this,1)}get descent(){return E(this,Ge,Bb).call(this,2)}get bbox(){let t=l(Rt,Lh);if(l(this,he).getUint8(t)===0)return;t+=1;const a=[];for(let s=0;s<4;s++)a.push(l(this,he).getInt16(t,!0)),t+=2;return a}get fontMatrix(){let t=l(Rt,Oh);if(l(this,he).getUint8(t)===0)return;t+=1;const a=[];for(let s=0;s<6;s++)a.push(l(this,he).getFloat64(t,!0)),t+=8;return a}get defaultVMetrics(){let t=l(Rt,Bh);if(l(this,he).getUint8(t)===0)return;t+=1;const a=[];for(let s=0;s<3;s++)a.push(l(this,he).getInt16(t,!0)),t+=2;return a}get fallbackName(){return E(this,Ge,Yf).call(this,0)}get loadedName(){return E(this,Ge,Yf).call(this,1)}get mimetype(){return E(this,Ge,Yf).call(this,2)}get name(){return E(this,Ge,Yf).call(this,3)}get data(){let t=l(Rt,On);const e=l(this,he).getUint32(t);t+=4+e;const a=l(this,he).getUint32(t);t+=4+a;const s=l(this,he).getUint32(t);t+=4+s;const o=l(this,he).getUint32(t);if(o!==0)return new Uint8Array(l(this,fs),t+4,o)}clearData(){let t=l(Rt,On);const e=l(this,he).getUint32(t);t+=4+e;const a=l(this,he).getUint32(t);t+=4+a;const s=l(this,he).getUint32(t);t+=4+s;const o=l(this,he).getUint32(t);new Uint8Array(l(this,fs),t+4,o).fill(0),l(this,he).setUint32(t,0)}get cssFontInfo(){let t=l(Rt,On);const e=l(this,he).getUint32(t);t+=4+e;const a=l(this,he).getUint32(t);t+=4+a;const s=l(this,he).getUint32(t);if(s===0)return null;const o=new Uint8Array(s);return o.set(new Uint8Array(l(this,fs),t+4,s)),new c0(o.buffer)}get systemFontInfo(){let t=l(Rt,On);const e=l(this,he).getUint32(t);t+=4+e;const a=l(this,he).getUint32(t);if(a===0)return null;const s=new Uint8Array(a);return s.set(new Uint8Array(l(this,fs),t+4,a)),new u0(s.buffer)}static write(t){const e=t.systemFontInfo?u0.write(t.systemFontInfo):null,a=t.cssFontInfo?c0.write(t.cssFontInfo):null,s=new TextEncoder,o={};let u=0;for(const T of Rt.strings)o[T]=s.encode(t[T]),u+=4+o[T].length;const h=l(Rt,On)+4+u+4+(e?e.byteLength:0)+4+(a?a.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),m=new Uint8Array(d),b=new DataView(d);let y=0;const v=Rt.bools.length;let x=0,_=0;for(let T=0;T<v;T++){const R=t[Rt.bools[T]];x|=(R===void 0?0:R?2:1)<<_,_+=2,(_===8||T===v-1)&&(b.setUint8(y++,x),x=0,_=0)}Gt(y===l(Rt,kh),"FontInfo.write: Boolean properties offset mismatch");for(const T of Rt.numbers)b.setFloat64(y,t[T]),y+=8;if(Gt(y===l(Rt,Lh),"FontInfo.write: Number properties offset mismatch"),t.bbox){b.setUint8(y++,4);for(const T of t.bbox)b.setInt16(y,T,!0),y+=2}else b.setUint8(y++,0),y+=8;if(Gt(y===l(Rt,Oh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){b.setUint8(y++,6);for(const T of t.fontMatrix)b.setFloat64(y,T,!0),y+=8}else b.setUint8(y++,0),y+=48;if(Gt(y===l(Rt,Bh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){b.setUint8(y++,1);for(const T of t.defaultVMetrics)b.setInt16(y,T,!0),y+=2}else b.setUint8(y++,0),y+=6;Gt(y===l(Rt,On),"FontInfo.write: DefaultVMetrics properties offset mismatch"),b.setUint32(l(Rt,On),0),y+=4;for(const T of Rt.strings){const R=o[T],M=R.length;b.setUint32(y,M),m.set(R,y+4),y+=4+M}if(b.setUint32(l(Rt,On),y-l(Rt,On)-4),!e)b.setUint32(y,0),y+=4;else{const T=e.byteLength;b.setUint32(y,T),Gt(y+4+T<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),m.set(new Uint8Array(e),y+4),y+=4+T}if(!a)b.setUint32(y,0),y+=4;else{const T=a.byteLength;b.setUint32(y,T),Gt(y+4+T<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),m.set(new Uint8Array(a),y+4),y+=4+T}return t.data===void 0?(b.setUint32(y,0),y+=4):(b.setUint32(y,t.data.length),m.set(t.data,y+4),y+=4+t.data.length),Gt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}};kh=new WeakMap,Lh=new WeakMap,Oh=new WeakMap,Bh=new WeakMap,On=new WeakMap,fs=new WeakMap,Im=new WeakMap,he=new WeakMap,Ge=new WeakSet,Ma=function(t){Gt(t<Rt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),a=t*2%8,s=l(this,he).getUint8(e)>>a&3;return s===0?void 0:s===2},Bb=function(t){return Gt(t<Rt.numbers.length,"Invalid number index"),l(this,he).getFloat64(l(Rt,kh)+t*8)},Yf=function(t){Gt(t<Rt.strings.length,"Invalid string index");let e=l(Rt,On)+4;for(let o=0;o<t;o++)e+=l(this,he).getUint32(e)+4;const a=l(this,he).getUint32(e),s=new Uint8Array(a);return s.set(new Uint8Array(l(this,fs),e+4,a)),l(this,Im).decode(s)},it(Rt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),it(Rt,"numbers",["ascent","defaultWidth","descent"]),it(Rt,"strings",["fallbackName","loadedName","mimetype","name"]),w(Rt,kh,Math.ceil(Rt.bools.length*2/8)),w(Rt,Lh,l(Rt,kh)+Rt.numbers.length*8),w(Rt,Oh,l(Rt,Lh)+1+8),w(Rt,Bh,l(Rt,Oh)+1+48),w(Rt,On,l(Rt,Bh)+1+6);let ZA=Rt;var Gm,qm;class xa{static get workerPort(){return l(this,Gm)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,Gm,t)}static get workerSrc(){return l(this,qm)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,qm,t)}}Gm=new WeakMap,qm=new WeakMap,w(xa,Gm,null),w(xa,qm,"");var zh,Vm;class bN{constructor({parsedData:t,rawData:e}){w(this,zh);w(this,Vm);A(this,zh,t),A(this,Vm,e)}getRaw(){return l(this,Vm)}get(t){return l(this,zh).get(t)??null}[Symbol.iterator](){return l(this,zh).entries()}}zh=new WeakMap,Vm=new WeakMap;const Vu=Symbol("INTERNAL");var Ym,Xm,Km,jh;class yN{constructor(t,{name:e,intent:a,usage:s,rbGroups:o}){w(this,Ym,!1);w(this,Xm,!1);w(this,Km,!1);w(this,jh,!0);A(this,Ym,!!(t&Kn.DISPLAY)),A(this,Xm,!!(t&Kn.PRINT)),this.name=e,this.intent=a,this.usage=s,this.rbGroups=o}get visible(){if(l(this,Km))return l(this,jh);if(!l(this,jh))return!1;const{print:t,view:e}=this.usage;return l(this,Ym)?(e==null?void 0:e.viewState)!=="OFF":l(this,Xm)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,a=!1){t!==Vu&&ve("Internal method `_setVisible` called."),A(this,Km,a),A(this,jh,e)}}Ym=new WeakMap,Xm=new WeakMap,Km=new WeakMap,jh=new WeakMap;var Nl,de,Fh,Ph,Wm,JA;class vN{constructor(t,e=Kn.DISPLAY){w(this,Wm);w(this,Nl,null);w(this,de,new Map);w(this,Fh,null);w(this,Ph,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Ph,t.order);for(const a of t.groups)l(this,de).set(a.id,new yN(e,a));if(t.baseState==="OFF")for(const a of l(this,de).values())a._setVisible(Vu,!1);for(const a of t.on)l(this,de).get(a)._setVisible(Vu,!0);for(const a of t.off)l(this,de).get(a)._setVisible(Vu,!1);A(this,Fh,this.getHash())}}isVisible(t){if(l(this,de).size===0)return!0;if(!t)return j0("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,de).has(t.id)?l(this,de).get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,Wm,JA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,de).has(e))return _t(`Optional content group not found: ${e}`),!0;if(l(this,de).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,de).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!l(this,de).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,de).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!l(this,de).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,de).has(e))return _t(`Optional content group not found: ${e}`),!0;if(l(this,de).get(e).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,a=!0){var o;const s=l(this,de).get(t);if(!s){_t(`Optional content group not found: ${t}`);return}if(a&&e&&s.rbGroups.length)for(const u of s.rbGroups)for(const h of u)h!==t&&((o=l(this,de).get(h))==null||o._setVisible(Vu,!1,!0));s._setVisible(Vu,!!e,!0),A(this,Nl,null)}setOCGState({state:t,preserveRB:e}){let a;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":a=s;continue}const o=l(this,de).get(s);if(o)switch(a){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!o.visible,e);break}}A(this,Nl,null)}get hasInitialVisibility(){return l(this,Fh)===null||this.getHash()===l(this,Fh)}getOrder(){return l(this,de).size?l(this,Ph)?l(this,Ph).slice():[...l(this,de).keys()]:null}getGroup(t){return l(this,de).get(t)||null}getHash(){if(l(this,Nl)!==null)return l(this,Nl);const t=new $_;for(const[e,a]of l(this,de))t.update(`${e}:${a.visible}`);return A(this,Nl,t.hexdigest())}[Symbol.iterator](){return l(this,de).entries()}}Nl=new WeakMap,de=new WeakMap,Fh=new WeakMap,Ph=new WeakMap,Wm=new WeakSet,JA=function(t){const e=t.length;if(e<2)return!0;const a=t[0];for(let s=1;s<e;s++){const o=t[s];let u;if(Array.isArray(o))u=E(this,Wm,JA).call(this,o);else if(l(this,de).has(o))u=l(this,de).get(o).visible;else return _t(`Optional content group not found: ${o}`),!0;switch(a){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return a==="And"};class AN{constructor(t,{disableRange:e=!1,disableStream:a=!1}){Gt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:u,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!a,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,m)=>{this._onReceiveData({begin:d,chunk:m})}),t.addProgressListener((d,m)=>{this._onProgress({loaded:d,total:m})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const a=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(a):this._queuedChunks.push(a);else{const s=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(a),!0)});Gt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,a,s,o;t.total===void 0?(a=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||a.call(e,{loaded:t.loaded}):(o=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||o.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new SN(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new xN(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(a),a}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const a of this._rangeReaders.slice(0))a.cancel(t);this._pdfDataRangeTransport.abort()}}class SN{constructor(t,e,a=!1,s=null){this._stream=t,this._done=a||!1,this._filename=P0(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class xN{constructor(t,e,a){this._stream=t,this._begin=e,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wN(g){let t=!0,e=a("filename\\*","i").exec(g);if(e){e=e[1];let b=h(e);return b=unescape(b),b=d(b),b=m(b),o(b)}if(e=u(g),e){const b=m(e);return o(b)}if(e=a("filename","i").exec(g),e){e=e[1];let b=h(e);return b=m(b),o(b)}function a(b,y){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(b,y){if(b){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(b,{fatal:!0}),x=Vg(y);y=v.decode(x),t=!1}catch{}}return y}function o(b){return t&&/[\x80-\xff]/.test(b)&&(b=s("utf-8",b),t&&(b=s("iso-8859-1",b))),b}function u(b){const y=[];let v;const x=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=x.exec(b))!==null;){let[,T,R,M]=v;if(T=parseInt(T,10),T in y){if(T===0)break;continue}y[T]=[R,M]}const _=[];for(let T=0;T<y.length&&T in y;++T){let[R,M]=y[T];M=h(M),R&&(M=unescape(M),T===0&&(M=d(M))),_.push(M)}return _.join("")}function h(b){if(b.startsWith('"')){const y=b.slice(1).split('\\"');for(let v=0;v<y.length;++v){const x=y[v].indexOf('"');x!==-1&&(y[v]=y[v].slice(0,x),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}b=y.join('"')}return b}function d(b){const y=b.indexOf("'");if(y===-1)return b;const v=b.slice(0,y),_=b.slice(y+1).replace(/^[^']*'/,"");return s(v,_)}function m(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,x,_){if(x==="q"||x==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,R){return String.fromCharCode(parseInt(R,16))}),s(v,_);try{_=atob(_)}catch{}return s(v,_)})}return""}function cC(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const a in t){const s=t[a];s!==void 0&&e.append(a,s)}return e}function H0(g){var t;return((t=URL.parse(g))==null?void 0:t.origin)??null}function uC({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:a}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*e)||a||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function hC(g){const t=g.get("Content-Disposition");if(t){let e=wN(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(P0(e))return e}return null}function Wg(g,t){return new nm(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function dC(g){return g===200||g===206}function fC(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function mC(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(_t(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class EN{constructor(t){it(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=cC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new TN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new _N(this,t,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const a of this._rangeRequestReaders.slice(0))a.cancel(t)}}class TN{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const a=new Headers(t.headers),s=e.url;fetch(s,fC(a,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=H0(o.url),!dC(o.status))throw Wg(o.status,s);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:h,suggestedLength:d}=uC({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=hC(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Lr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:mC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class _N{constructor(t,e,a){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${a-1}`);const u=s.url;fetch(u,fC(o,this._withCredentials,this._abortController)).then(h=>{const d=H0(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!dC(h.status))throw Wg(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:mC(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const gA=200,pA=206;function CN(g){const t=g.response;return typeof t!="string"?t:Vg(t).buffer}class MN{constructor({url:t,httpHeaders:e,withCredentials:a}){it(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=cC(this.isHttp,e),this.withCredentials=a||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,a=this.currXhrId++,s=this.pendingRequests[a]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,u]of this.headers)e.setRequestHeader(o,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=pA):s.expectedStatus=gA,e.responseType="arraybuffer",Gt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,a),e.onprogress=this.onProgress.bind(this,a),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),a}onProgress(t,e){var s;const a=this.pendingRequests[t];a&&((s=a.onProgress)==null||s.call(a,e))}onStateChange(t,e){const a=this.pendingRequests[t];if(!a)return;const s=a.xhr;if(s.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){a.onError(s.status);return}const o=s.status||gA;if(!(o===gA&&a.expectedStatus===pA)&&o!==a.expectedStatus){a.onError(s.status);return}const h=CN(s);if(o===pA){const d=s.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);m?a.onDone({begin:parseInt(m[1],10),chunk:h}):(_t('Missing or invalid "Content-Range" header.'),a.onError(0))}else h?a.onDone({begin:0,chunk:h}):a.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class DN{constructor(t){this._source=t,this._manager=new MN(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new RN(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const a=new NN(this._manager,t,e);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const a of this._rangeRequestReaders.slice(0))a.cancel(t)}}class RN{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=H0(e.responseURL);const a=e.getAllResponseHeaders(),s=new Headers(a?a.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...m]=h.split(": ");return[d,m.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:u}=uC({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=hC(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class NN{constructor(t,e,a){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:a,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=H0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Wg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kN=/^[a-z][a-z0-9\-+.]+:/i;function LN(g){if(kN.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class ON{constructor(t){this.source=t,this.url=LN(t.url),Gt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new BN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const a=new zN(this,t,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const a of this._rangeRequestReaders.slice(0))a.cancel(t)}}class BN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const a=process.getBuiltinModule("fs");a.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(a.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Wg(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Lr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class zN{constructor(t,e,a){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:a-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Rf=Symbol("INITIAL_DATA");var Bn,$m,tS;class gC{constructor(){w(this,$m);w(this,Bn,Object.create(null))}get(t,e=null){if(e){const s=E(this,$m,tS).call(this,t);return s.promise.then(()=>e(s.data)),null}const a=l(this,Bn)[t];if(!a||a.data===Rf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return a.data}has(t){const e=l(this,Bn)[t];return!!e&&e.data!==Rf}delete(t){const e=l(this,Bn)[t];return!e||e.data===Rf?!1:(delete l(this,Bn)[t],!0)}resolve(t,e=null){const a=E(this,$m,tS).call(this,t);a.data=e,a.resolve()}clear(){var t;for(const e in l(this,Bn)){const{data:a}=l(this,Bn)[e];(t=a==null?void 0:a.bitmap)==null||t.close()}A(this,Bn,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Bn)){const{data:e}=l(this,Bn)[t];e!==Rf&&(yield[t,e])}}}Bn=new WeakMap,$m=new WeakSet,tS=function(t){var e;return(e=l(this,Bn))[t]||(e[t]={...Promise.withResolvers(),data:Rf})};const jN=1e5,qT=30;var a_,kl,gn,Qm,Zm,cc,mr,Jm,tg,uc,Hh,Uh,Ll,Ih,eg,Gh,hc,ig,ng,Ie,qh,dc,ag,Ol,Vh,zr,pC,bC,eS,Qn,zb,iS,yC,vC;let lm=(Ie=class{constructor({textContentSource:t,container:e,viewport:a}){w(this,zr);w(this,kl,Promise.withResolvers());w(this,gn,null);w(this,Qm,!1);w(this,Zm,!!((a_=globalThis.FontInspector)!=null&&a_.enabled));w(this,cc,null);w(this,mr,null);w(this,Jm,0);w(this,tg,0);w(this,uc,null);w(this,Hh,null);w(this,Uh,0);w(this,Ll,0);w(this,Ih,Object.create(null));w(this,eg,[]);w(this,Gh,null);w(this,hc,[]);w(this,ig,new WeakMap);w(this,ng,null);var d;if(t instanceof ReadableStream)A(this,Gh,t);else if(typeof t=="object")A(this,Gh,new ReadableStream({start(m){m.enqueue(t),m.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,gn,A(this,Hh,e)),A(this,Ll,a.scale*Ga.pixelRatio),A(this,Uh,a.rotation),A(this,mr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:u,pageY:h}=a.rawDims;A(this,ng,[1,0,0,-1,-u,h+o]),A(this,tg,s),A(this,Jm,o),E(d=Ie,Qn,yC).call(d),so(e,a),l(this,kl).promise.finally(()=>{l(Ie,Vh).delete(this),A(this,mr,null),A(this,Ih,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=vi.platform;return kt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,uc).read().then(({value:e,done:a})=>{if(a){l(this,kl).resolve();return}l(this,cc)??A(this,cc,e.lang),Object.assign(l(this,Ih),e.styles),E(this,zr,pC).call(this,e.items),t()},l(this,kl).reject)};return A(this,uc,l(this,Gh).getReader()),l(Ie,Vh).add(this),t(),l(this,kl).promise}update({viewport:t,onBefore:e=null}){var o;const a=t.scale*Ga.pixelRatio,s=t.rotation;if(s!==l(this,Uh)&&(e==null||e(),A(this,Uh,s),so(l(this,Hh),{rotation:s})),a!==l(this,Ll)){e==null||e(),A(this,Ll,a);const u={div:null,properties:null,ctx:E(o=Ie,Qn,zb).call(o,l(this,cc))};for(const h of l(this,hc))u.properties=l(this,ig).get(h),u.div=h,E(this,zr,eS).call(this,u)}}cancel(){var e;const t=new Lr("TextLayer task cancelled.");(e=l(this,uc))==null||e.cancel(t).catch(()=>{}),A(this,uc,null),l(this,kl).reject(t)}get textDivs(){return l(this,hc)}get textContentItemsStr(){return l(this,eg)}static cleanup(){if(!(l(this,Vh).size>0)){l(this,qh).clear();for(const{canvas:t}of l(this,dc).values())t.remove();l(this,dc).clear()}}},kl=new WeakMap,gn=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,cc=new WeakMap,mr=new WeakMap,Jm=new WeakMap,tg=new WeakMap,uc=new WeakMap,Hh=new WeakMap,Uh=new WeakMap,Ll=new WeakMap,Ih=new WeakMap,eg=new WeakMap,Gh=new WeakMap,hc=new WeakMap,ig=new WeakMap,ng=new WeakMap,qh=new WeakMap,dc=new WeakMap,ag=new WeakMap,Ol=new WeakMap,Vh=new WeakMap,zr=new WeakSet,pC=function(t){var s,o;if(l(this,Qm))return;(o=l(this,mr)).ctx??(o.ctx=E(s=Ie,Qn,zb).call(s,l(this,cc)));const e=l(this,hc),a=l(this,eg);for(const u of t){if(e.length>jN){_t("Ignoring additional textDivs for performance reasons."),A(this,Qm,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=l(this,gn);A(this,gn,document.createElement("span")),l(this,gn).classList.add("markedContent"),u.id&&l(this,gn).setAttribute("id",`${u.id}`),h.append(l(this,gn))}else u.type==="endMarkedContent"&&A(this,gn,l(this,gn).parentNode);continue}a.push(u.str),E(this,zr,bC).call(this,u)}},bC=function(t){var T;const e=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,hc).push(e);const s=ht.transform(l(this,ng),t.transform);let o=Math.atan2(s[1],s[0]);const u=l(this,Ih)[t.fontName];u.vertical&&(o+=Math.PI/2);let h=l(this,Zm)&&u.fontSubstitution||u.fontFamily;h=Ie.fontFamilyMap.get(h)||h;const d=Math.hypot(s[2],s[3]),m=d*E(T=Ie,Qn,vC).call(T,h,u,l(this,cc));let b,y;o===0?(b=s[4],y=s[5]-m):(b=s[4]+m*Math.sin(o),y=s[5]-m*Math.cos(o));const v="calc(var(--total-scale-factor) *",x=e.style;l(this,gn)===l(this,Hh)?(x.left=`${(100*b/l(this,tg)).toFixed(2)}%`,x.top=`${(100*y/l(this,Jm)).toFixed(2)}%`):(x.left=`${v}${b.toFixed(2)}px)`,x.top=`${v}${y.toFixed(2)}px)`),x.fontSize=`${v}${(l(Ie,Ol)*d).toFixed(2)}px)`,x.fontFamily=h,a.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Zm)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(a.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const R=Math.abs(t.transform[0]),M=Math.abs(t.transform[3]);R!==M&&Math.max(R,M)/Math.min(R,M)>1.5&&(_=!0)}if(_&&(a.canvasWidth=u.vertical?t.height:t.width),l(this,ig).set(e,a),l(this,mr).div=e,l(this,mr).properties=a,E(this,zr,eS).call(this,l(this,mr)),a.hasText&&l(this,gn).append(e),a.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),l(this,gn).append(R)}},eS=function(t){var h;const{div:e,properties:a,ctx:s}=t,{style:o}=e;let u="";if(l(Ie,Ol)>1&&(u=`scale(${1/l(Ie,Ol)})`),a.canvasWidth!==0&&a.hasText){const{fontFamily:d}=o,{canvasWidth:m,fontSize:b}=a;E(h=Ie,Qn,iS).call(h,s,b*l(this,Ll),d);const{width:y}=s.measureText(e.textContent);y>0&&(u=`scaleX(${m*l(this,Ll)/y}) ${u}`)}a.angle!==0&&(u=`rotate(${a.angle}deg) ${u}`),u.length>0&&(o.transform=u)},Qn=new WeakSet,zb=function(t=null){let e=l(this,dc).get(t||(t=""));if(!e){const a=document.createElement("canvas");a.className="hiddenCanvasElement",a.lang=t,document.body.append(a),e=a.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,dc).set(t,e),l(this,ag).set(e,{size:0,family:""})}return e},iS=function(t,e,a){const s=l(this,ag).get(t);e===s.size&&a===s.family||(t.font=`${e}px ${a}`,s.size=e,s.family=a)},yC=function(){if(l(this,Ol)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Ol,t.getBoundingClientRect().height),t.remove()},vC=function(t,e,a){const s=l(this,qh).get(t);if(s)return s;const o=E(this,Qn,zb).call(this,a);o.canvas.width=o.canvas.height=qT,E(this,Qn,iS).call(this,o,qT,t);const u=o.measureText(""),h=u.fontBoundingBoxAscent,d=Math.abs(u.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let m=.8;return h?m=h/(h+d):(vi.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?m=e.ascent:e.descent&&(m=1+e.descent)),l(this,qh).set(t,m),m},w(Ie,Qn),w(Ie,qh,new Map),w(Ie,dc,new Map),w(Ie,ag,new WeakMap),w(Ie,Ol,null),w(Ie,Vh,new Set),Ie);const FN=100;function ix(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new nS,{docId:e}=t,a=g.url?YR(g.url):null,s=g.data?XR(g.data):null,o=g.httpHeaders||null,u=g.withCredentials===!0,h=g.password??null,d=g.range instanceof nx?g.range:null,m=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let b=g.worker instanceof Dd?g.worker:null;const y=g.verbosity,v=typeof g.docBaseUrl=="string"&&!Xg(g.docBaseUrl)?g.docBaseUrl:null,x=yb(g.cMapUrl),_=g.cMapPacked!==!1,T=g.CMapReaderFactory||(Wi?tN:RT),R=yb(g.iccUrl),M=yb(g.standardFontDataUrl),k=g.StandardFontDataFactory||(Wi?eN:NT),N=yb(g.wasmUrl),O=g.WasmFactory||(Wi?iN:kT),z=g.stopAtErrors!==!0,j=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,H=g.isEvalSupported!==!1,U=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!Wi,X=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!Wi&&(vi.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,tt=typeof g.disableFontFace=="boolean"?g.disableFontFace:Wi,nt=g.fontExtraProperties===!0,bt=g.enableXfa===!0,st=g.ownerDocument||globalThis.document,gt=g.disableRange===!0,B=g.disableStream===!0,P=g.disableAutoFetch===!0,W=g.pdfBug===!0,at=g.CanvasFactory||(Wi?JR:$R),pt=g.FilterFactory||(Wi?ZR:QR),At=g.enableHWA===!0,ot=g.useWasm!==!1,lt=d?d.length:g.length??NaN,xt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!Wi&&!tt,zt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(T===RT&&k===NT&&O===kT&&x&&M&&N&&Of(x,document.baseURI)&&Of(M,document.baseURI)&&Of(N,document.baseURI)),qt=null;CR(y);const Mt={canvasFactory:new at({ownerDocument:st,enableHWA:At}),filterFactory:new pt({docId:e,ownerDocument:st}),cMapReaderFactory:zt?null:new T({baseUrl:x,isCompressed:_}),standardFontDataFactory:zt?null:new k({baseUrl:M}),wasmFactory:zt?null:new O({baseUrl:N})};b||(b=Dd.create({verbosity:y,port:xa.workerPort}),t._worker=b);const Be={docId:e,apiVersion:"5.4.296",data:s,password:h,disableAutoFetch:P,rangeChunkSize:m,length:lt,docBaseUrl:v,enableXfa:bt,evaluatorOptions:{maxImageSize:j,disableFontFace:tt,ignoreErrors:z,isEvalSupported:H,isOffscreenCanvasSupported:U,isImageDecoderSupported:X,canvasMaxAreaInBytes:J,fontExtraProperties:nt,useSystemFonts:xt,useWasm:ot,useWorkerFetch:zt,cMapUrl:x,iccUrl:R,standardFontDataUrl:M,wasmUrl:N}},qe={ownerDocument:st,pdfBug:W,styleElement:qt,loadingParams:{disableAutoFetch:P,enableXfa:bt}};return b.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(b.destroyed)throw new Error("Worker was destroyed");const Zi=b.messageHandler.sendWithPromise("GetDocRequest",Be,s?[s.buffer]:null);let Re;if(d)Re=new AN(d,{disableRange:gt,disableStream:B});else if(!s){if(!a)throw new Error("getDocument - no `url` parameter provided.");const Vt=Of(a)?EN:Wi?ON:DN;Re=new Vt({url:a,length:lt,httpHeaders:o,withCredentials:u,rangeChunkSize:m,disableRange:gt,disableStream:B})}return Zi.then(Vt=>{if(t.destroyed)throw new Error("Loading aborted");if(b.destroyed)throw new Error("Worker was destroyed");const Kt=new Hf(e,Vt,b.port),te=new UN(Kt,t,Re,qe,Mt,At);t._transport=te,Kt.send("Ready",null)})}).catch(t._capability.reject),t}var _0;const C0=class C0{constructor(){it(this,"_capability",Promise.withResolvers());it(this,"_transport",null);it(this,"_worker",null);it(this,"docId",`d${si(C0,_0)._++}`);it(this,"destroyed",!1);it(this,"onPassword",null);it(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,a,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(a=this._worker)!=null&&a.port&&delete this._worker._pendingDestroy,o}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};_0=new WeakMap,w(C0,_0,0);let nS=C0;var fc,sg,rg,lg,og,s_;let nx=(s_=class{constructor(t,e,a=!1,s=null){w(this,fc,Promise.withResolvers());w(this,sg,[]);w(this,rg,[]);w(this,lg,[]);w(this,og,[]);this.length=t,this.initialData=e,this.progressiveDone=a,this.contentDispositionFilename=s}addRangeListener(t){l(this,og).push(t)}addProgressListener(t){l(this,lg).push(t)}addProgressiveReadListener(t){l(this,rg).push(t)}addProgressiveDoneListener(t){l(this,sg).push(t)}onDataRange(t,e){for(const a of l(this,og))a(t,e)}onDataProgress(t,e){l(this,fc).promise.then(()=>{for(const a of l(this,lg))a(t,e)})}onDataProgressiveRead(t){l(this,fc).promise.then(()=>{for(const e of l(this,rg))e(t)})}onDataProgressiveDone(){l(this,fc).promise.then(()=>{for(const t of l(this,sg))t()})}transportReady(){l(this,fc).resolve()}requestDataRange(t,e){ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},fc=new WeakMap,sg=new WeakMap,rg=new WeakMap,lg=new WeakMap,og=new WeakMap,s_);class PN{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return kt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var gr,mc,Xf;class HN{constructor(t,e,a,s=!1){w(this,mc);w(this,gr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=a,this._stats=s?new wT:null,this._pdfBug=s,this.commonObjs=a.commonObjs,this.objs=new gC,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}={}){return new Yg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:a,offsetY:s,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return kt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:a,intent:s="display",annotationMode:o=Es.ENABLE,transform:u=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:m=null,pageColors:b=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:x=!1,operationsFilter:_=null}){var X,J,tt;(X=this._stats)==null||X.time("Overall");const T=this._transport.getRenderingIntent(s,o,y,v),{renderingIntent:R,cacheKey:M}=T;A(this,gr,!1),d||(d=this._transport.getOptionalContentConfig(R));let k=this._intentStates.get(M);k||(k=Object.create(null),this._intentStates.set(M,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const N=!!(R&Kn.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(T));const O=!!(this._pdfBug&&((tt=globalThis.StepperManager)!=null&&tt.enabled)),z=!this.recordedBBoxes&&(x||O),j=nt=>{var bt,st;if(k.renderTasks.delete(H),z){const gt=(bt=H.gfx)==null?void 0:bt.dependencyTracker.take();gt&&(H.stepper&&H.stepper.setOperatorBBoxes(gt,H.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=gt))}N&&A(this,gr,!0),E(this,mc,Xf).call(this),nt?(H.capability.reject(nt),this._abortOperatorList({intentState:k,reason:nt instanceof Error?nt:new Error(nt)})):H.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(st=globalThis.Stats)!=null&&st.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},H=new aS({callback:j,params:{canvas:e,canvasContext:t,dependencyTracker:z?new aN(e,k.operatorList.length,O):null,viewport:a,transform:u,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:m,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:b,enableHWA:this._transport.enableHWA,operationsFilter:_});(k.renderTasks||(k.renderTasks=new Set)).add(H);const U=H.task;return Promise.all([k.displayReadyCapability.promise,d]).then(([nt,bt])=>{var st;if(this.destroyed){j();return}if((st=this._stats)==null||st.time("Rendering"),!(bt.renderingIntent&R))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");H.initializeGraphics({transparency:nt,optionalContentConfig:bt}),H.operatorListChanged()}).catch(j),U}getOperatorList({intent:t="display",annotationMode:e=Es.ENABLE,printAnnotationStorage:a=null,isEditing:s=!1}={}){var m;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(t,e,a,s,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>am.textContent(a));const e=this.streamTextContent(t);return new Promise(function(a,s){function o(){u.read().then(function({value:d,done:m}){if(m){a(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},s)}const u=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const a of e.renderTasks)t.push(a.completed),a.cancel();return this.objs.clear(),A(this,gr,!1),Promise.all(t)}cleanup(t=!1){A(this,gr,!0);const e=E(this,mc,Xf).call(this);return t&&e&&this._stats&&(this._stats=new wT),e}_startRenderPage(t,e){var s,o;const a=this._intentStates.get(e);a&&((s=this._stats)==null||s.timeEnd("Page Request"),(o=a.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let a=0,s=t.length;a<s;a++)e.operatorList.fnArray.push(t.fnArray[a]),e.operatorList.argsArray.push(t.argsArray[a]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const a of e.renderTasks)a.operatorListChanged();t.lastChunk&&E(this,mc,Xf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:a,modifiedIds:s}){const{map:o,transfer:u}=a,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:s},u).getReader(),m=this._intentStates.get(e);m.streamReader=d;const b=()=>{d.read().then(({value:y,done:v})=>{if(v){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,m),b())},y=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const v of m.renderTasks)v.operatorListChanged();E(this,mc,Xf).call(this)}if(m.displayReadyCapability)m.displayReadyCapability.reject(y);else if(m.opListReadCapability)m.opListReadCapability.reject(y);else throw y}})};b()}_abortOperatorList({intentState:t,reason:e,force:a=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!a){if(t.renderTasks.size>0)return;if(e instanceof F0){let s=FN;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Lr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}gr=new WeakMap,mc=new WeakSet,Xf=function(){if(!l(this,gr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,gr,!1),!0};var Bl,Ba,pr,gc,M0,pc,bc,$i,jb,AC,SC,Kf,Yh,Fb;const Ce=class Ce{constructor({name:t=null,port:e=null,verbosity:a=MR()}={}){w(this,$i);w(this,Bl,Promise.withResolvers());w(this,Ba,null);w(this,pr,null);w(this,gc,null);if(this.name=t,this.destroyed=!1,this.verbosity=a,e){if(l(Ce,bc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(Ce,bc).set(e,this),E(this,$i,AC).call(this,e)}else E(this,$i,SC).call(this)}get promise(){return l(this,Bl).promise}get port(){return l(this,pr)}get messageHandler(){return l(this,Ba)}destroy(){var t,e;this.destroyed=!0,(t=l(this,gc))==null||t.terminate(),A(this,gc,null),l(Ce,bc).delete(l(this,pr)),A(this,pr,null),(e=l(this,Ba))==null||e.destroy(),A(this,Ba,null)}static create(t){const e=l(this,bc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ce(t)}static get workerSrc(){if(xa.workerSrc)return xa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return kt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Yh,Fb)?l(this,Yh,Fb):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bl=new WeakMap,Ba=new WeakMap,pr=new WeakMap,gc=new WeakMap,M0=new WeakMap,pc=new WeakMap,bc=new WeakMap,$i=new WeakSet,jb=function(){l(this,Bl).resolve(),l(this,Ba).send("configure",{verbosity:this.verbosity})},AC=function(t){A(this,pr,t),A(this,Ba,new Hf("main","worker",t)),l(this,Ba).on("ready",()=>{}),E(this,$i,jb).call(this)},SC=function(){if(l(Ce,pc)||l(Ce,Yh,Fb)){E(this,$i,Kf).call(this);return}let{workerSrc:t}=Ce;try{Ce._isSameOrigin(window.location,t)||(t=Ce._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),a=new Hf("main","worker",e),s=()=>{o.abort(),a.destroy(),e.terminate(),this.destroyed?l(this,Bl).reject(new Error("Worker was destroyed")):E(this,$i,Kf).call(this)},o=new AbortController;e.addEventListener("error",()=>{l(this,gc)||s()},{signal:o.signal}),a.on("test",h=>{if(o.abort(),this.destroyed||!h){s();return}A(this,Ba,a),A(this,pr,e),A(this,gc,e),E(this,$i,jb).call(this)}),a.on("ready",h=>{if(o.abort(),this.destroyed){s();return}try{u()}catch{E(this,$i,Kf).call(this)}});const u=()=>{const h=new Uint8Array;a.send("test",h,[h.buffer])};u();return}catch{j0("The worker has been disabled.")}E(this,$i,Kf).call(this)},Kf=function(){l(Ce,pc)||(_t("Setting up fake worker."),A(Ce,pc,!0)),Ce._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,Bl).reject(new Error("Worker was destroyed"));return}const e=new WR;A(this,pr,e);const a=`fake${si(Ce,M0)._++}`,s=new Hf(a+"_worker",a,e);t.setup(s,e),A(this,Ba,new Hf(a,a+"_worker",e)),E(this,$i,jb).call(this)}).catch(t=>{l(this,Bl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Yh=new WeakSet,Fb=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Ce,Yh),w(Ce,M0,0),w(Ce,pc,!1),w(Ce,bc,new WeakMap),Wi&&(A(Ce,pc,!0),xa.workerSrc||(xa.workerSrc="./pdf.worker.mjs")),Ce._isSameOrigin=(t,e)=>{const a=URL.parse(t);if(!(a!=null&&a.origin)||a.origin==="null")return!1;const s=new URL(e,a);return a.origin===s.origin},Ce._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ce.fromPort=t=>{if(jR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ce.create(t)};let Dd=Ce;var br,ms,Xh,Kh,yr,yc,Wf;class UN{constructor(t,e,a,s,o,u){w(this,yc);w(this,br,new Map);w(this,ms,new Map);w(this,Xh,new Map);w(this,Kh,new Map);w(this,yr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new gC,this.fontLoader=new qR({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=u,this.setupMessageHandler()}get annotationStorage(){return kt(this,"annotationStorage",new JS)}getRenderingIntent(t,e=Es.ENABLE,a=null,s=!1,o=!1){let u=Kn.DISPLAY,h=UA;switch(t){case"any":u=Kn.ANY;break;case"display":break;case"print":u=Kn.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const d=u&Kn.PRINT&&a instanceof Z_?a:this.annotationStorage;switch(e){case Es.DISABLE:u+=Kn.ANNOTATIONS_DISABLE;break;case Es.ENABLE:break;case Es.ENABLE_FORMS:u+=Kn.ANNOTATIONS_FORMS;break;case Es.ENABLE_STORAGE:u+=Kn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(u+=Kn.IS_EDITING),o&&(u+=Kn.OPLIST);const{ids:m,hash:b}=d.modifiedIds,y=[u,h.hash,b];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:m}}destroy(){var a;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(a=l(this,yr))==null||a.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of l(this,ms).values())t.push(s._destroy());l(this,ms).clear(),l(this,Xh).clear(),l(this,Kh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,o;this.commonObjs.clear(),this.fontLoader.clear(),l(this,br).clear(),this.filterFactory.destroy(),lm.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Lr("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(a,s)=>{Gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){s.close();return}Gt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async a=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:u}=this._fullReader;return(!s||!o)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var m;(m=e.onProgress)==null||m.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:s,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(a,s)=>{Gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(a.begin,a.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:u,done:h}){if(h){s.close();return}Gt(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{s.error(u)})},s.onCancel=u=>{o.cancel(u),s.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,e._capability.resolve(new PN(a,this))}),t.on("DocException",a=>{e._capability.reject(cn(a))}),t.on("PasswordRequest",a=>{A(this,yr,Promise.withResolvers());try{if(!e.onPassword)throw cn(a);const s=o=>{o instanceof Error?l(this,yr).reject(o):l(this,yr).resolve({password:o})};e.onPassword(s,a.code)}catch(s){l(this,yr).reject(s)}return l(this,yr).promise}),t.on("DataLoaded",a=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),t.on("StartRenderPage",a=>{if(this.destroyed)return;l(this,ms).get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),t.on("commonobj",([a,s,o])=>{var u;if(this.destroyed||this.commonObjs.has(a))return null;switch(s){case"Font":if("error"in o){const y=o.error;_t(`Error during font loading: ${y}`),this.commonObjs.resolve(a,y);break}const h=new ZA(o),d=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,m=new VR(h,d,o.extra,o.charProcOperatorList);this.fontLoader.bind(m).catch(()=>t.sendWithPromise("FontFallback",{id:a})).finally(()=>{!m.fontExtraProperties&&m.data&&m.clearData(),this.commonObjs.resolve(a,m)});break;case"CopyLocalImage":const{imageRef:b}=o;Gt(b,"The imageRef must be defined.");for(const y of l(this,ms).values())for(const[,v]of y.objs)if((v==null?void 0:v.ref)===b)return v.dataLen?(this.commonObjs.resolve(a,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([a,s,o,u])=>{var d;if(this.destroyed)return;const h=l(this,ms).get(s);if(!h.objs.has(a)){if(h._intentStates.size===0){(d=u==null?void 0:u.bitmap)==null||d.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(a,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",a=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:a.loaded,total:a.total})}),t.on("FetchBinaryData",async a=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[a.type];if(!s)throw new Error(`${a.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(a)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var a;this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((a=this._fullReader)==null?void 0:a.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,a=l(this,Xh).get(e);if(a)return a;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Kh).set(o.refStr,t);const u=new HN(e,o,this,this._params.pdfBug);return l(this,ms).set(e,u),u});return l(this,Xh).set(e,s),s}getPageIndex(t){return IA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,yc,Wf).call(this,"GetFieldObjects")}hasJSActions(){return E(this,yc,Wf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return E(this,yc,Wf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,yc,Wf).call(this,"GetOptionalContentConfig").then(e=>new vN(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,br).get(t);if(e)return e;const a=this.messageHandler.sendWithPromise(t,null).then(s=>{var o,u;return{info:s[0],metadata:s[1]?new bN(s[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return l(this,br).set(t,a),a}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,ms).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,br).clear(),this.filterFactory.destroy(!0),lm.cleanup()}}cachedPageNumber(t){if(!IA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Kh).get(e)??null}}br=new WeakMap,ms=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,yr=new WeakMap,yc=new WeakSet,Wf=function(t,e=null){const a=l(this,br).get(t);if(a)return a;const s=this.messageHandler.sendWithPromise(t,e);return l(this,br).set(t,s),s};var zl;class IN{constructor(t){w(this,zl,null);it(this,"onContinue",null);it(this,"onError",null);A(this,zl,t)}get promise(){return l(this,zl).capability.promise}cancel(t=0){l(this,zl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,zl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,zl);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}zl=new WeakMap;var jl,vc;const Lo=class Lo{constructor({callback:t,params:e,objs:a,commonObjs:s,annotationCanvasMap:o,operatorList:u,pageIndex:h,canvasFactory:d,filterFactory:m,useRequestAnimationFrame:b=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:x=!1,operationsFilter:_=null}){w(this,jl,null);this.callback=t,this.params=e,this.objs=a,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=m,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=b===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new IN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=x,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,m;if(this.cancelled)return;if(this._canvas){if(l(Lo,vc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Lo,vc).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:a,transform:s,background:o,dependencyTracker:u}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ju(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,u),this.gfx.beginDrawing({transform:s,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(m=this.graphicsReadyCallback)==null||m.call(this)}cancel(t=null,e=0){var a,s,o;this.running=!1,this.cancelled=!0,(a=this.gfx)==null||a.endDrawing(),l(this,jl)&&(window.cancelAnimationFrame(l(this,jl)),A(this,jl,null)),l(Lo,vc).delete(this._canvas),t||(t=new F0(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(s=this.task).onError)==null||o.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,jl,window.requestAnimationFrame(()=>{A(this,jl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Lo,vc).delete(this._canvas),this.callback())))}};jl=new WeakMap,vc=new WeakMap,w(Lo,vc,new WeakSet);let aS=Lo;const ax="5.4.296",xC="f56dc8601";var zn,Ac,Wh,oi,cg,$h,vr,ug,Fl,za,hg,fe,sS,rS,lS,Do,wC,ul;const un=class un{constructor({editor:t=null,uiManager:e=null}){w(this,fe);w(this,zn,null);w(this,Ac,null);w(this,Wh);w(this,oi,null);w(this,cg,!1);w(this,$h,!1);w(this,vr,null);w(this,ug);w(this,Fl,null);w(this,za,null);var a,s;t?(A(this,$h,!1),A(this,vr,t)):A(this,$h,!0),A(this,za,(t==null?void 0:t._uiManager)||e),A(this,ug,l(this,za)._eventBus),A(this,Wh,((a=t==null?void 0:t.color)==null?void 0:a.toUpperCase())||((s=l(this,za))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(un,hg)||A(un,hg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return kt(this,"_keyboardManager",new Kg([[["Escape","mac+Escape"],un.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],un.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],un.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],un.prototype._moveToPrevious],[["Home","mac+Home"],un.prototype._moveToBeginning],[["End","mac+End"],un.prototype._moveToEnd]]))}renderButton(){const t=A(this,zn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,vr)&&(t.ariaControls=`${l(this,vr).id}_colorpicker_dropdown`);const e=l(this,za)._signal;t.addEventListener("click",E(this,fe,Do).bind(this),{signal:e}),t.addEventListener("keydown",E(this,fe,lS).bind(this),{signal:e});const a=A(this,Ac,document.createElement("span"));return a.className="swatch",a.ariaHidden="true",a.style.backgroundColor=l(this,Wh),t.append(a),t}renderMainDropdown(){const t=A(this,oi,E(this,fe,sS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,zn)){E(this,fe,Do).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,fe,rS).call(this,e,t)}_moveToNext(t){var e,a;if(!l(this,fe,ul)){E(this,fe,Do).call(this,t);return}if(t.target===l(this,zn)){(e=l(this,oi).firstChild)==null||e.focus();return}(a=t.target.nextSibling)==null||a.focus()}_moveToPrevious(t){var e,a;if(t.target===((e=l(this,oi))==null?void 0:e.firstChild)||t.target===l(this,zn)){l(this,fe,ul)&&this._hideDropdownFromKeyboard();return}l(this,fe,ul)||E(this,fe,Do).call(this,t),(a=t.target.previousSibling)==null||a.focus()}_moveToBeginning(t){var e;if(!l(this,fe,ul)){E(this,fe,Do).call(this,t);return}(e=l(this,oi).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,fe,ul)){E(this,fe,Do).call(this,t);return}(e=l(this,oi).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,oi))==null||t.classList.add("hidden"),l(this,zn).ariaExpanded="false",(e=l(this,Fl))==null||e.abort(),A(this,Fl,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,$h)){if(!l(this,fe,ul)){(t=l(this,vr))==null||t.unselect();return}this.hideDropdown(),l(this,zn).focus({preventScroll:!0,focusVisible:l(this,cg)})}}updateColor(t){if(l(this,Ac)&&(l(this,Ac).style.backgroundColor=t),!l(this,oi))return;const e=l(this,za).highlightColors.values();for(const a of l(this,oi).children)a.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=l(this,zn))==null||t.remove(),A(this,zn,null),A(this,Ac,null),(e=l(this,oi))==null||e.remove(),A(this,oi,null)}};zn=new WeakMap,Ac=new WeakMap,Wh=new WeakMap,oi=new WeakMap,cg=new WeakMap,$h=new WeakMap,vr=new WeakMap,ug=new WeakMap,Fl=new WeakMap,za=new WeakMap,hg=new WeakMap,fe=new WeakSet,sS=function(){const t=document.createElement("div"),e=l(this,za)._signal;t.addEventListener("contextmenu",Zn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,vr)&&(t.id=`${l(this,vr).id}_colorpicker_dropdown`);for(const[a,s]of l(this,za).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=a,o.setAttribute("data-l10n-id",l(un,hg)[a]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=s,o.ariaSelected=s===l(this,Wh),o.addEventListener("click",E(this,fe,rS).bind(this,s),{signal:e}),t.append(o)}return t.addEventListener("keydown",E(this,fe,lS).bind(this),{signal:e}),t},rS=function(t,e){e.stopPropagation(),l(this,ug).dispatch("switchannotationeditorparams",{source:this,type:Ut.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},lS=function(t){un._keyboardManager.exec(this,t)},Do=function(t){if(l(this,fe,ul)){this.hideDropdown();return}if(A(this,cg,t.detail===0),l(this,Fl)||(A(this,Fl,new AbortController),window.addEventListener("pointerdown",E(this,fe,wC).bind(this),{signal:l(this,za).combinedSignal(l(this,Fl))})),l(this,zn).ariaExpanded="true",l(this,oi)){l(this,oi).classList.remove("hidden");return}const e=A(this,oi,E(this,fe,sS).call(this));l(this,zn).append(e)},wC=function(t){var e;(e=l(this,oi))!=null&&e.contains(t.target)||this.hideDropdown()},ul=function(){return l(this,oi)&&!l(this,oi).classList.contains("hidden")},w(un,hg,null);let om=un;var gs,dg,Qh,fg;const Oo=class Oo{constructor(t){w(this,gs,null);w(this,dg,null);w(this,Qh,null);A(this,dg,t),A(this,Qh,t._uiManager),l(Oo,fg)||A(Oo,fg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,gs))return l(this,gs);const{editorType:t,colorType:e,colorValue:a}=l(this,dg),s=A(this,gs,document.createElement("input"));return s.type="color",s.value=a||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Oo,fg)[t]),s.addEventListener("input",()=>{l(this,Qh).updateParams(e,s.value)},{signal:l(this,Qh)._signal}),s}update(t){l(this,gs)&&(l(this,gs).value=t)}destroy(){var t;(t=l(this,gs))==null||t.remove(),A(this,gs,null)}hideDropdown(){}};gs=new WeakMap,dg=new WeakMap,Qh=new WeakMap,fg=new WeakMap,w(Oo,fg,null);let h0=Oo;function VT(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function Nf(g){return Math.max(0,Math.min(255,255*g))}class YT{static CMYK_G([t,e,a,s]){return["G",1-Math.min(1,.3*t+.59*a+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Nf(t),[t,t,t]}static G_HTML([t]){const e=VT(t);return`#${e}${e}${e}`}static RGB_G([t,e,a]){return["G",.3*t+.59*e+.11*a]}static RGB_rgb(t){return t.map(Nf)}static RGB_HTML(t){return`#${t.map(VT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,a,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,a+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,a,s]){return[Nf(1-Math.min(1,t+s)),Nf(1-Math.min(1,a+s)),Nf(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,a]){const s=1-t,o=1-e,u=1-a,h=Math.min(s,o,u);return["CMYK",s,o,u,h]}}class GN{create(t,e,a=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),a||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ve("Abstract method `_createSVG` called.")}}class cm extends GN{_createSVG(t){return document.createElementNS(Ys,t)}}const qN=9,Xc=new WeakSet,VN=new Date().getTimezoneOffset()*60*1e3;class XT{static create(t){switch(t.data.annotationType){case Ke.LINK:return new sx(t);case Ke.TEXT:return new XN(t);case Ke.WIDGET:switch(t.data.fieldType){case"Tx":return new KN(t);case"Btn":return t.data.radioButton?new _C(t):t.data.checkBox?new $N(t):new QN(t);case"Ch":return new ZN(t);case"Sig":return new WN(t)}return new $c(t);case Ke.POPUP:return new cS(t);case Ke.FREETEXT:return new NC(t);case Ke.LINE:return new tk(t);case Ke.SQUARE:return new ek(t);case Ke.CIRCLE:return new ik(t);case Ke.POLYLINE:return new kC(t);case Ke.CARET:return new ak(t);case Ke.INK:return new rx(t);case Ke.POLYGON:return new nk(t);case Ke.HIGHLIGHT:return new LC(t);case Ke.UNDERLINE:return new sk(t);case Ke.SQUIGGLY:return new rk(t);case Ke.STRIKEOUT:return new lk(t);case Ke.STAMP:return new OC(t);case Ke.FILEATTACHMENT:return new ok(t);default:return new Oe(t)}}}var Sc,Zh,va,mg,oS;const mx=class mx{constructor(t,{isRenderable:e=!1,ignoreBorder:a=!1,createQuadrilaterals:s=!1}={}){w(this,mg);w(this,Sc,null);w(this,Zh,!1);w(this,va,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(a)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return mx._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var a;const{data:t}=this,e=(a=this.annotationStorage)==null?void 0:a.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:a,rect:s}=this.data;let o=-1/0,u=-1/0;if((e==null?void 0:e.length)>=8){for(let d=0;d<e.length;d+=8)e[d+1]>u?(u=e[d+1],o=e[d+2]):e[d+1]===u&&(o=Math.max(o,e[d+2]));return[o,u]}if((a==null?void 0:a.length)>=1){for(const d of a)for(let m=0,b=d.length;m<b;m+=2)d[m+1]>u?(u=d[m+1],o=d[m]):d[m+1]===u&&(o=Math.max(o,d[m]));if(o!==1/0)return[o,u]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:u}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/a,t[1]=100*(t[1]-u)/s,t}get commentText(){var e,a,s;const{data:t}=this;return((a=(e=this.annotationStorage.getRawValue(`${im}${t.id}`))==null?void 0:e.popup)==null?void 0:a.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,a={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:a})||this.annotationStorage.setValue(`${im}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:a,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=l(this,va))==null?void 0:t.popup)||this.popup)==null||e.remove(),A(this,va,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(l(this,Sc)||A(this,Sc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:a}=t;e&&E(this,mg,oS).call(this,e);let s=((o=l(this,va))==null?void 0:o.popup)||this.popup;!s&&(a!=null&&a.text)&&(this._createPopup(a),s=l(this,va).popup),s&&(s.updateEdited(t),a!=null&&a.deleted&&(s.remove(),A(this,va,null),this.popup=null))}resetEdited(){var t;l(this,Sc)&&(E(this,mg,oS).call(this,l(this,Sc).rect),(t=l(this,va))==null||t.popup.resetEdited(),A(this,Sc,null))}_createContainer(t){const{data:e,parent:{page:a,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof $c)&&!(this instanceof sx)&&(o.tabIndex=0);const{style:u}=o;if(u.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof cS){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,o),o}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,R=e.borderStyle.verticalCornerRadius;if(T>0||R>0){const k=`calc(${T}px * var(--total-scale-factor)) / calc(${R}px * var(--total-scale-factor))`;u.borderRadius=k}else if(this instanceof _C){const k=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;u.borderRadius=k}switch(e.borderStyle.style){case Hu.SOLID:u.borderStyle="solid";break;case Hu.DASHED:u.borderStyle="dashed";break;case Hu.BEVELED:_t("Unimplemented border style: beveled");break;case Hu.INSET:_t("Unimplemented border style: inset");break;case Hu.UNDERLINE:u.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(A(this,Zh,!0),u.borderColor=ht.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):u.borderWidth=0}const m=ht.normalizeRect([e.rect[0],a.view[3]-e.rect[1]+a.view[1],e.rect[2],a.view[3]-e.rect[3]+a.view[1]]),{pageWidth:b,pageHeight:y,pageX:v,pageY:x}=s.rawDims;u.left=`${100*(m[0]-v)/b}%`,u.top=`${100*(m[1]-x)/y}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(u.width=`${100*h/b}%`,u.height=`${100*d/y}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:a,pageHeight:s}=this.parent.viewport.rawDims;let{width:o,height:u}=this;t%180!==0&&([o,u]=[u,o]),e.style.width=`${100*o/a}%`,e.style.height=`${100*u/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,a,s)=>{const o=s.detail[e],u=o[0],h=o.slice(1);s.target.style[a]=YT[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[a]:YT[`${u}_rgb`](h)})};return kt(this,"_commonActions",{display:e=>{const{display:a}=e.detail,s=a%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:a===1||a===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:a}=e.detail;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:a,noView:a})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const a=e.detail.rotation;this.setRotation(a),this.annotationStorage.setValue(this.data.id,{rotation:a})}})}_dispatchEventFromSandbox(t,e){const a=this._commonActions;for(const s of Object.keys(e.detail)){const o=t[s]||a[s];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const a=this._commonActions;for(const[s,o]of Object.entries(e)){const u=a[s];if(u){const h={detail:{[s]:o},target:t};u(h),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,a,s,o]=this.data.rect.map(T=>Math.fround(T));if(t.length===8){const[T,R,M,k]=t.subarray(2,6);if(s===T&&o===R&&e===M&&a===k)return}const{style:u}=this.container;let h;if(l(this,Zh)){const{borderColor:T,borderWidth:R}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const d=s-e,m=o-a,{svgFactory:b}=this,y=b.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=b.createElement("defs");y.append(v);const x=b.createElement("clipPath"),_=`clippath_${this.data.id}`;x.setAttribute("id",_),x.setAttribute("clipPathUnits","objectBoundingBox"),v.append(x);for(let T=2,R=t.length;T<R;T+=8){const M=t[T],k=t[T+1],N=t[T+2],O=t[T+3],z=b.createElement("rect"),j=(N-e)/d,H=(o-k)/m,U=(M-N)/d,X=(k-O)/m;z.setAttribute("x",j),z.setAttribute("y",H),z.setAttribute("width",U),z.setAttribute("height",X),x.append(z),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${H}" width="${U}" height="${X}"/>`)}l(this,Zh)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let a,s;t?(a={str:t.text},s=t.date):(a=e.contentsObj,s=e.modificationDate);const o=A(this,va,new cS({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:a,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(l(this,va)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,va)}render(){ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const a=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:o,id:u,exportValues:h}of s){if(o===-1||u===e)continue;const d=typeof h=="string"?h:null,m=document.querySelector(`[data-element-id="${u}"]`);if(m&&!Xc.has(m)){_t(`_getElementsByName - element not allowed: ${u}`);continue}a.push({id:u,exportValue:d,domElement:m})}return a}for(const s of document.getElementsByName(t)){const{exportValue:o}=s,u=s.getAttribute("data-element-id");u!==e&&Xc.has(s)&&a.push({id:u,exportValue:o,domElement:s})}return a}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Sc=new WeakMap,Zh=new WeakMap,va=new WeakMap,mg=new WeakSet,oS=function(t){const{container:{style:e},data:{rect:a,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:d}}}}=this;a==null||a.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(u-t[3]+d)/u}%`,s===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(s)};let Oe=mx;class YN extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var $n,Ro,EC,TC;class sx extends Oe{constructor(e,a=null){super(e,{isRenderable:!0,ignoreBorder:!!(a!=null&&a.ignoreBorder),createQuadrilaterals:!0});w(this,$n);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:a}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let o=!1;return e.url?(a.addLinkAttributes(s,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),o=!0):e.attachment?(E(this,$n,EC).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(E(this,$n,TC).call(this,s,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),o=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}_bindLink(e,a,s=""){e.href=this.linkService.getDestinationHash(a),e.onclick=()=>(a&&this.linkService.goToDestination(a),!1),(a||a==="")&&E(this,$n,Ro).call(this),s&&(e.title=s)}_bindNamedAction(e,a,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(a),!1),s&&(e.title=s),E(this,$n,Ro).call(this)}_bindJSAction(e,a){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(a.actions)){const u=s.get(o);u&&(e[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a.id,name:o}}),!1})}a.overlaidText&&(e.title=a.overlaidText),e.onclick||(e.onclick=()=>!1),E(this,$n,Ro).call(this)}_bindResetFormAction(e,a){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),E(this,$n,Ro).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var y;s==null||s();const{fields:o,refs:u,include:h}=a,d=[];if(o.length!==0||u.length!==0){const v=new Set(u);for(const x of o){const _=this._fieldObjects[x]||[];for(const{id:T}of _)v.add(T)}for(const x of Object.values(this._fieldObjects))for(const _ of x)v.has(_.id)===h&&d.push(_)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const m=this.annotationStorage,b=[];for(const v of d){const{id:x}=v;switch(b.push(x),v.type){case"text":{const T=v.defaultValue||"";m.setValue(x,{value:T});break}case"checkbox":case"radiobutton":{const T=v.defaultValue===v.exportValues;m.setValue(x,{value:T});break}case"combobox":case"listbox":{const T=v.defaultValue||"";m.setValue(x,{value:T});break}default:continue}const _=document.querySelector(`[data-element-id="${x}"]`);if(_){if(!Xc.has(_)){_t(`_bindResetFormAction - element not allowed: ${x}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:b,name:"ResetForm"}})),!1}}}$n=new WeakSet,Ro=function(){this.container.setAttribute("data-internal-link","")},EC=function(e,a,s="",o=null){e.href=this.linkService.getAnchorUrl(""),a.description?e.title=a.description:s&&(e.title=s),e.onclick=()=>{var u;return(u=this.downloadManager)==null||u.openOrDownloadData(a.content,a.filename,o),!1},E(this,$n,Ro).call(this)},TC=function(e,a,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(a),!1),s&&(e.title=s),E(this,$n,Ro).call(this)};class XN extends Oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class $c extends Oe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return vi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,a,s,o){a.includes("mouse")?t.addEventListener(a,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(a,u=>{var h;if(a==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(a==="focus"){if(e.focused)return;e.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(u)}}))})}_setEventListeners(t,e,a,s){var o,u,h;for(const[d,m]of a)(m==="Action"||(o=this.data.actions)!=null&&o[m])&&((m==="Focus"||m==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,m,s),m==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):m==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:a}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||qN,o=t.style;let u;const h=2,d=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h),b=Math.round(m/(cA*s))||1,y=m/b;u=Math.min(s,d(y/cA))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(s,d(m/cA))}o.fontSize=`calc(${u}px * var(--total-scale-factor))`,o.color=ht.makeHexColor(a[0],a[1],a[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class KN extends $c{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,a,s){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=a),o.setValue(u.id,{[s]:a})}render(){var s,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let h=u.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let m=u.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;m&&this.data.comb&&(m=m.replaceAll(/\s+/g,""));const b={userValue:h,formattedValue:m,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=m??h,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type=this.data.password?"password":"text",a.setAttribute("value",m??h),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),Xc.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:x}=this.data,_=!!v&&this.enableScripting;y&&(a.title=y),this._setRequired(a,this.data.required),d&&(a.maxLength=d),a.addEventListener("input",R=>{t.setValue(e,{value:R.target.value}),this.setPropertyOnSiblings(a,"value",R.target.value,"value"),b.formattedValue=null}),a.addEventListener("resetform",R=>{const M=this.data.defaultFieldValue??"";a.value=b.userValue=M,b.formattedValue=null});let T=R=>{const{formattedValue:M}=b;M!=null&&(R.target.value=M),R.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",M=>{var N;if(b.focused)return;const{target:k}=M;if(_&&(k.type=v,x&&(k.step=x)),b.userValue){const O=b.userValue;if(_)if(v==="time"){const z=new Date(O),j=[z.getHours(),z.getMinutes(),z.getSeconds()];k.value=j.map(H=>H.toString().padStart(2,"0")).join(":")}else k.value=new Date(O-VN).toISOString().split(v==="date"?"T":".",1)[0];else k.value=O}b.lastCommittedValue=k.value,b.commitKey=1,(N=this.data.actions)!=null&&N.Focus||(b.focused=!0)}),a.addEventListener("updatefromsandbox",M=>{this.showElementAndHideCanvas(M.target);const k={value(N){b.userValue=N.detail.value??"",_||t.setValue(e,{value:b.userValue.toString()}),N.target.value=b.userValue},formattedValue(N){const{formattedValue:O}=N.detail;b.formattedValue=O,O!=null&&N.target!==document.activeElement&&(N.target.value=O);const z={formattedValue:O};_&&(z.value=O),t.setValue(e,z)},selRange(N){N.target.setSelectionRange(...N.detail.selRange)},charLimit:N=>{var H;const{charLimit:O}=N.detail,{target:z}=N;if(O===0){z.removeAttribute("maxLength");return}z.setAttribute("maxLength",O);let j=b.userValue;!j||j.length<=O||(j=j.slice(0,O),z.value=b.userValue=j,t.setValue(e,{value:j}),(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:z.selectionStart,selEnd:z.selectionEnd}}))}};this._dispatchEventFromSandbox(k,M)}),a.addEventListener("keydown",M=>{var O;b.commitKey=1;let k=-1;if(M.key==="Escape"?k=0:M.key==="Enter"&&!this.data.multiLine?k=2:M.key==="Tab"&&(b.commitKey=3),k===-1)return;const{value:N}=M.target;b.lastCommittedValue!==N&&(b.lastCommittedValue=N,b.userValue=N,(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:k,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}}))});const R=T;T=null,a.addEventListener("blur",M=>{var O,z;if(!b.focused||!M.relatedTarget)return;(O=this.data.actions)!=null&&O.Blur||(b.focused=!1);const{target:k}=M;let{value:N}=k;if(_){if(N&&v==="time"){const j=N.split(":").map(H=>parseInt(H,10));N=new Date(2e3,0,1,j[0],j[1],j[2]||0).valueOf(),k.step=""}else N.includes("T")||(N=`${N}T00:00`),N=new Date(N).valueOf();k.type="text"}b.userValue=N,b.lastCommittedValue!==N&&((z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:b.commitKey,selStart:M.target.selectionStart,selEnd:M.target.selectionEnd}})),R(M)}),(o=this.data.actions)!=null&&o.Keystroke&&a.addEventListener("beforeinput",M=>{var X;b.lastCommittedValue=null;const{data:k,target:N}=M,{value:O,selectionStart:z,selectionEnd:j}=N;let H=z,U=j;switch(M.inputType){case"deleteWordBackward":{const J=O.substring(0,z).match(/\w*[^\w]*$/);J&&(H-=J[0].length);break}case"deleteWordForward":{const J=O.substring(z).match(/^[^\w]*\w*/);J&&(U+=J[0].length);break}case"deleteContentBackward":z===j&&(H-=1);break;case"deleteContentForward":z===j&&(U+=1);break}M.preventDefault(),(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,change:k||"",willCommit:!1,selStart:H,selEnd:U}})}),this._setEventListeners(a,b,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.value)}if(T&&a.addEventListener("blur",T),this.data.comb){const M=(this.data.rect[2]-this.data.rect[0])/d;a.classList.add("comb"),a.style.letterSpacing=`calc(${M}px * var(--total-scale-factor) - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell",this.data.hasOwnCanvas&&(a.hidden=!0);return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class WN extends $c{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class $N extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,a=e.id;let s=t.getValue(a,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(a,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Xc.add(o),o.setAttribute("data-element-id",a),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const m of this._getElementsByName(h,a)){const b=d&&m.exportValue===e.exportValue;m.domElement&&(m.domElement.checked=b),t.setValue(m.id,{value:b})}t.setValue(a,{value:d})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue||"Off";u.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(a,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class _C extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,a=e.id;let s=t.getValue(a,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(a,{value:s})),s)for(const u of this._getElementsByName(e.fieldName,a))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Xc.add(o),o.setAttribute("data-element-id",a),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const m of this._getElementsByName(h,a))t.setValue(m.id,{value:!1});t.setValue(a,{value:d})}),o.addEventListener("resetform",u=>{const h=e.defaultFieldValue;u.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:m=>{const b=u===m.detail.value;for(const y of this._getElementsByName(m.target.name)){const v=b&&y.id===a;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class QN extends sx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({},a)})),t}}class ZN extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,a=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Xc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",b=>{const y=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===y});for(const b of this.data.options){const y=document.createElement("option");y.textContent=b.displayValue,y.value=b.exportValue,a.value.includes(b.exportValue)&&(y.setAttribute("selected",!0),o=!1),s.append(y)}let u=null;if(o){const b=document.createElement("option");b.value=" ",b.setAttribute("hidden",!0),b.setAttribute("selected",!0),s.prepend(b),u=()=>{b.remove(),s.removeEventListener("input",u),u=null},s.addEventListener("input",u)}const h=b=>{const y=b?"value":"textContent",{options:v,multiple:x}=s;return x?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=h(!1);const m=b=>{const y=b.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",b=>{const y={value(v){u==null||u();const x=v.detail.value,_=new Set(Array.isArray(x)?x:[x]);for(const T of s.options)T.selected=_.has(T.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){s.multiple=!0},remove(v){const x=s.options,_=v.detail.remove;x[_].selected=!1,s.remove(_),x.length>0&&Array.prototype.findIndex.call(x,R=>R.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:h(!0),items:m(v)}),d=h(!1)},clear(v){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:x,displayValue:_,exportValue:T}=v.detail.insert,R=s.children[x],M=document.createElement("option");M.textContent=_,M.value=T,R?R.before(M):s.append(M),t.setValue(e,{value:h(!0),items:m(v)}),d=h(!1)},items(v){const{items:x}=v.detail;for(;s.length!==0;)s.remove(0);for(const _ of x){const{displayValue:T,exportValue:R}=_,M=document.createElement("option");M.textContent=T,M.value=R,s.append(M)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:h(!0),items:m(v)}),d=h(!1)},indices(v){const x=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=x.has(_.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,b)}),s.addEventListener("input",b=>{var x;const y=h(!0),v=h(!1);t.setValue(e,{value:y}),b.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],b=>b.target.value)):s.addEventListener("input",function(b){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var gg,uS;class cS extends Oe{constructor(e){const{data:a,elements:s,parent:o}=e,u=!!o._commentManager;super(e,{isRenderable:!u&&Oe._hasPopupData(a)});w(this,gg);if(this.elements=s,u&&Oe._hasPopupData(a)){const h=this.popup=E(this,gg,uS).call(this);for(const d of s)d.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const a=this.popup=E(this,gg,uS).call(this),s=[];for(const o of this.elements)o.popup=a,o.container.ariaHasPopup="dialog",s.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(o=>`${$S}${o}`).join(",")),this.container}}gg=new WeakSet,uS=function(){return new JN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var jn,Pl,D0,R0,Jh,td,Ue,ps,Hl,xc,ed,id,bs,Fn,Ar,Sr,fi,xr,Ul,pg,wr,nd,wc,Il,Pi,Gl,Ot,Pb,hS,dS,fS,Hb,mS,CC,MC,DC,RC,Ub,Ib,gS;class JN{constructor({container:t,color:e,elements:a,titleObj:s,modificationDate:o,contentsObj:u,richText:h,parent:d,rect:m,parentRect:b,open:y,commentManager:v=null}){w(this,Ot);w(this,jn,null);w(this,Pl,E(this,Ot,DC).bind(this));w(this,D0,E(this,Ot,gS).bind(this));w(this,R0,E(this,Ot,Ib).bind(this));w(this,Jh,E(this,Ot,Ub).bind(this));w(this,td,null);w(this,Ue,null);w(this,ps,null);w(this,Hl,null);w(this,xc,null);w(this,ed,null);w(this,id,null);w(this,bs,!1);w(this,Fn,null);w(this,Ar,null);w(this,Sr,null);w(this,fi,null);w(this,xr,null);w(this,Ul,null);w(this,pg,null);w(this,wr,null);w(this,nd,null);w(this,wc,null);w(this,Il,!1);w(this,Pi,null);w(this,Gl,null);A(this,Ue,t),A(this,nd,s),A(this,ps,u),A(this,wr,h),A(this,ed,d),A(this,td,e),A(this,pg,m),A(this,id,b),A(this,xc,a),A(this,jn,v),A(this,Pi,a[0]),A(this,Hl,sm.toDateObject(o)),this.trigger=a.flatMap(x=>x.getElementsToTriggerPopup()),v?this.renderCommentButton():(E(this,Ot,Pb).call(this),l(this,Ue).hidden=!0,y&&E(this,Ot,Ub).call(this))}renderCommentButton(){if(l(this,fi)||(l(this,xr)||E(this,Ot,hS).call(this),!l(this,xr)))return;const{signal:t}=A(this,Ar,new AbortController),e=!!l(this,Pi).extraPopupElement,a=()=>{l(this,jn).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{l(this,jn).toggleCommentPopup(this,!1,!0,!e)},o=()=>{l(this,jn).toggleCommentPopup(this,!1,!1)};if(e){A(this,fi,l(this,Pi).container);for(const u of this.trigger)u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.addEventListener("keydown",l(this,Pl),{signal:t}),u.addEventListener("click",a,{signal:t}),u.addEventListener("pointerenter",s,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),u.classList.add("popupTriggerArea")}else{const u=A(this,fi,document.createElement("button"));u.className="annotationCommentButton";const h=l(this,Pi).container;u.style.zIndex=h.style.zIndex+1,u.tabIndex=0,u.ariaHasPopup="dialog",u.ariaControls="commentPopup",u.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,Ot,fS).call(this),E(this,Ot,dS).call(this),u.addEventListener("keydown",l(this,Pl),{signal:t}),u.addEventListener("click",a,{signal:t}),u.addEventListener("pointerenter",s,{signal:t}),u.addEventListener("pointerleave",o,{signal:t}),h.after(u)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,Pi).commentData;return t?l(this,ed)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=l(this,fi))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:a,creationDate:s,modificationDate:o}=l(this,Pi).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:a,creationDate:s,modificationDate:o}}get elementBeforePopup(){return l(this,fi)}get comment(){return l(this,Gl)||A(this,Gl,l(this,Pi).commentText),l(this,Gl)}set comment(t){t!==this.comment&&(l(this,Pi).commentText=A(this,Gl,t))}get parentBoundingClientRect(){return l(this,Pi).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,fi)&&(l(this,fi).classList.toggle("selected",t),l(this,fi).ariaExpanded=e)}setSelectedCommentButton(t){l(this,fi).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,Ul))return l(this,Ul);const{x:t,y:e,height:a}=l(this,fi).getBoundingClientRect(),{x:s,y:o,width:u,height:h}=l(this,Pi).layer.getBoundingClientRect();return[(t-s)/u,(e+a-o)/h]}set commentPopupPosition(t){A(this,Ul,t)}hasDefaultPopupPosition(){return l(this,Ul)===null}get commentButtonPosition(){return l(this,xr)}get commentButtonWidth(){return l(this,fi).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,a]=l(this,Ul)||this.commentButtonPosition.map(m=>m/100),s=this.parentBoundingClientRect,{x:o,y:u,width:h,height:d}=s;l(this,jn).showDialog(null,this,o+e*h,u+a*d,{...t,parentDimensions:s})}render(){var a,s;if(l(this,Fn))return;const t=A(this,Fn,document.createElement("div"));if(t.className="popup",l(this,td)){const o=t.style.outlineColor=ht.makeHexColor(...l(this,td));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(a=l(this,nd))!=null&&a.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=l(this,nd)}if(t.append(e),l(this,Hl)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Hl).valueOf()})),o.dateTime=l(this,Hl).toISOString(),e.append(o)}ZS({html:l(this,Ot,Hb)||l(this,ps).str,dir:(s=l(this,ps))==null?void 0:s.dir,className:"popupContent"},t),l(this,Ue).append(t)}updateEdited({rect:t,popup:e,deleted:a}){var s;if(l(this,jn)){a?(this.remove(),A(this,Gl,null)):e&&(e.deleted?this.remove():(E(this,Ot,fS).call(this),A(this,Gl,e.text))),t&&(A(this,xr,null),E(this,Ot,hS).call(this),E(this,Ot,dS).call(this));return}if(a||e!=null&&e.deleted){this.remove();return}E(this,Ot,Pb).call(this),l(this,wc)||A(this,wc,{contentsObj:l(this,ps),richText:l(this,wr)}),t&&A(this,Sr,null),e&&e.text&&(A(this,wr,E(this,Ot,MC).call(this,e.text)),A(this,Hl,sm.toDateObject(e.date)),A(this,ps,null)),(s=l(this,Fn))==null||s.remove(),A(this,Fn,null)}resetEdited(){var t;l(this,wc)&&({contentsObj:si(this,ps)._,richText:si(this,wr)._}=l(this,wc),A(this,wc,null),(t=l(this,Fn))==null||t.remove(),A(this,Fn,null),A(this,Sr,null))}remove(){var t,e,a;if((t=l(this,Ar))==null||t.abort(),A(this,Ar,null),(e=l(this,Fn))==null||e.remove(),A(this,Fn,null),A(this,Il,!1),A(this,bs,!1),(a=l(this,fi))==null||a.remove(),A(this,fi,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){A(this,Il,this.isVisible),l(this,Il)&&(l(this,Ue).hidden=!0)}maybeShow(){l(this,jn)||(E(this,Ot,Pb).call(this),l(this,Il)&&(l(this,Fn)||E(this,Ot,Ib).call(this),A(this,Il,!1),l(this,Ue).hidden=!1))}get isVisible(){return l(this,jn)?!1:l(this,Ue).hidden===!1}}jn=new WeakMap,Pl=new WeakMap,D0=new WeakMap,R0=new WeakMap,Jh=new WeakMap,td=new WeakMap,Ue=new WeakMap,ps=new WeakMap,Hl=new WeakMap,xc=new WeakMap,ed=new WeakMap,id=new WeakMap,bs=new WeakMap,Fn=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,fi=new WeakMap,xr=new WeakMap,Ul=new WeakMap,pg=new WeakMap,wr=new WeakMap,nd=new WeakMap,wc=new WeakMap,Il=new WeakMap,Pi=new WeakMap,Gl=new WeakMap,Ot=new WeakSet,Pb=function(){var e;if(l(this,Ar))return;A(this,Ar,new AbortController);const{signal:t}=l(this,Ar);for(const a of this.trigger)a.addEventListener("click",l(this,Jh),{signal:t}),a.addEventListener("pointerenter",l(this,R0),{signal:t}),a.addEventListener("pointerleave",l(this,D0),{signal:t}),a.classList.add("popupTriggerArea");for(const a of l(this,xc))(e=a.container)==null||e.addEventListener("keydown",l(this,Pl),{signal:t})},hS=function(){const t=l(this,xc).find(e=>e.hasCommentButton);t&&A(this,xr,t._normalizePoint(t.commentButtonPosition))},dS=function(){if(l(this,Pi).extraPopupElement&&!l(this,Pi).editor)return;this.renderCommentButton();const[t,e]=l(this,xr),{style:a}=l(this,fi);a.left=`calc(${t}%)`,a.top=`calc(${e}% - var(--comment-button-dim))`},fS=function(){l(this,Pi).extraPopupElement||(this.renderCommentButton(),l(this,fi).style.backgroundColor=this.commentButtonColor||"")},Hb=function(){const t=l(this,wr),e=l(this,ps);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,wr).html||null},mS=function(){var t,e,a;return((a=(e=(t=l(this,Ot,Hb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:a.fontSize)||0},CC=function(){var t,e,a;return((a=(e=(t=l(this,Ot,Hb))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:a.color)||null},MC=function(t){const e=[],a={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:l(this,Ot,CC),fontSize:l(this,Ot,mS)?`calc(${l(this,Ot,mS)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:s});return a},DC=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,bs))&&E(this,Ot,Ub).call(this)},RC=function(){if(l(this,Sr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:a,pageX:s,pageY:o}}}=l(this,ed);let u=!!l(this,id),h=u?l(this,id):l(this,pg);for(const _ of l(this,xc))if(!h||ht.intersect(_.data.rect,h)!==null){h=_.data.rect,u=!0;break}const d=ht.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),b=u?h[2]-h[0]+5:0,y=d[0]+b,v=d[1];A(this,Sr,[100*(y-s)/e,100*(v-o)/a]);const{style:x}=l(this,Ue);x.left=`${l(this,Sr)[0]}%`,x.top=`${l(this,Sr)[1]}%`},Ub=function(){if(l(this,jn)){l(this,jn).toggleCommentPopup(this,!1);return}A(this,bs,!l(this,bs)),l(this,bs)?(E(this,Ot,Ib).call(this),l(this,Ue).addEventListener("click",l(this,Jh)),l(this,Ue).addEventListener("keydown",l(this,Pl))):(E(this,Ot,gS).call(this),l(this,Ue).removeEventListener("click",l(this,Jh)),l(this,Ue).removeEventListener("keydown",l(this,Pl)))},Ib=function(){l(this,Fn)||this.render(),this.isVisible?l(this,bs)&&l(this,Ue).classList.add("focused"):(E(this,Ot,RC).call(this),l(this,Ue).hidden=!1,l(this,Ue).style.zIndex=parseInt(l(this,Ue).style.zIndex)+1e3)},gS=function(){l(this,Ue).classList.remove("focused"),!(l(this,bs)||!this.isVisible)&&(l(this,Ue).hidden=!0,l(this,Ue).style.zIndex=parseInt(l(this,Ue).style.zIndex)-1e3)};class NC extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const a=document.createElement("span");a.textContent=e,t.append(a)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bg;class tk extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,bg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),u=A(this,bg,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,bg)}addHighlightArea(){this.container.classList.add("highlightArea")}}bg=new WeakMap;var yg;class ek extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,yg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),u=e.borderStyle.width,h=A(this,yg,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",a-u),h.setAttribute("height",s-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}yg=new WeakMap;var vg;class ik extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,vg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:a,height:s}=this,o=this.svgFactory.create(a,s,!0),u=e.borderStyle.width,h=A(this,vg,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",a/2),h.setAttribute("cy",s/2),h.setAttribute("rx",a/2-u/2),h.setAttribute("ry",s/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,vg)}addHighlightArea(){this.container.classList.add("highlightArea")}}vg=new WeakMap;var Ag;class kC extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Ag,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:a,borderStyle:s,popupRef:o},width:u,height:h}=this;if(!a)return this.container;const d=this.svgFactory.create(u,h,!0);let m=[];for(let y=0,v=a.length;y<v;y+=2){const x=a[y]-e[0],_=e[3]-a[y+1];m.push(`${x},${_}`)}m=m.join(" ");const b=A(this,Ag,this.svgFactory.createElement(this.svgElementName));return b.setAttribute("points",m),b.setAttribute("stroke-width",s.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),d.append(b),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ag)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ag=new WeakMap;class nk extends kC{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ak extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Sg,Ec,xg,pS;class rx extends Oe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,xg);w(this,Sg,null);w(this,Ec,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tt.HIGHLIGHT:Tt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:a,inkLists:s,borderStyle:o,popupRef:u}}=this,{transform:h,width:d,height:m}=E(this,xg,pS).call(this,a,e),b=this.svgFactory.create(d,m,!0),y=A(this,Sg,this.svgFactory.createElement("svg:g"));b.append(y),y.setAttribute("stroke-width",o.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let v=0,x=s.length;v<x;v++){const _=this.svgFactory.createElement(this.svgElementName);l(this,Ec).push(_),_.setAttribute("points",s[v].join(",")),y.append(_)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(b),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:a,points:s,rect:o}=e,u=l(this,Sg);if(a>=0&&u.setAttribute("stroke-width",a||1),s)for(let h=0,d=l(this,Ec).length;h<d;h++)l(this,Ec)[h].setAttribute("points",s[h].join(","));if(o){const{transform:h,width:d,height:m}=E(this,xg,pS).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${d} ${m}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return l(this,Ec)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sg=new WeakMap,Ec=new WeakMap,xg=new WeakSet,pS=function(e,a){switch(e){case 90:return{transform:`rotate(90) translate(${-a[0]},${a[1]}) scale(1,-1)`,width:a[3]-a[1],height:a[2]-a[0]};case 180:return{transform:`rotate(180) translate(${-a[2]},${a[1]}) scale(1,-1)`,width:a[2]-a[0],height:a[3]-a[1]};case 270:return{transform:`rotate(270) translate(${-a[2]},${a[3]}) scale(1,-1)`,width:a[3]-a[1],height:a[2]-a[0]};default:return{transform:`translate(${-a[0]},${a[3]}) scale(1,-1)`,width:a[2]-a[0],height:a[3]-a[1]}}};class LC extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const a=document.createElement("mark");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class sk extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const a=document.createElement("u");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class rk extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const a=document.createElement("u");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class lk extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const a=document.createElement("s");a.classList.add("overlaidText"),a.textContent=t,this.container.append(a)}return this.container}}class OC extends Oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var wg,Eg,bS;class ok extends Oe{constructor(e){var s;super(e,{isRenderable:!0});w(this,Eg);w(this,wg,null);const{file:a}=this.data;this.filename=a.filename,this.content=a.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...a})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:a}=this;let s;a.hasAppearance||a.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(a.name)?"paperclip":"pushpin"}.svg`,a.fillAlpha&&a.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(a.fillAlpha*100)}%);`)),s.addEventListener("dblclick",E(this,Eg,bS).bind(this)),A(this,wg,s);const{isMac:o}=vi.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&E(this,Eg,bS).call(this)}),!a.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return l(this,wg)}addHighlightArea(){this.container.classList.add("highlightArea")}}wg=new WeakMap,Eg=new WeakSet,bS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ad,Tc,sd,ql,Tg,_c,oo,yS,vS,rd;let lx=(rd=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:a,annotationEditorUIManager:s,page:o,viewport:u,structTreeLayer:h,commentManager:d,linkService:m,annotationStorage:b}){w(this,oo);w(this,ad,null);w(this,Tc,null);w(this,sd,null);w(this,ql,new Map);w(this,Tg,null);w(this,_c,null);this.div=t,A(this,ad,e),A(this,Tc,a),A(this,Tg,h||null),A(this,_c,m||null),A(this,sd,b||new JS),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=d||null}hasEditableAnnotations(){return l(this,ql).size>0}async render(t){var u,h,d;const{annotations:e}=t,a=this.div;so(a,this.viewport);const s=new Map,o={data:null,layer:a,linkService:l(this,_c),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new cm,annotationStorage:l(this,sd),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const m of e){if(m.noHTML)continue;const b=m.annotationType===Ke.POPUP;if(b){const x=s.get(m.id);if(!x)continue;o.elements=x}else if(m.rect[2]===m.rect[0]||m.rect[3]===m.rect[1])continue;o.data=m;const y=XT.create(o);if(!y.isRenderable)continue;if(!b&&m.popupRef){const x=s.get(m.popupRef);x?x.push(y):s.set(m.popupRef,[y])}const v=y.render();m.hidden&&(v.style.visibility="hidden"),await E(this,oo,yS).call(this,v,m.id,o.elements),(h=(u=y.extraPopupElement)==null?void 0:u.popup)==null||h.renderCommentButton(),y._isEditable&&(l(this,ql).set(y.data.id,y),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(y))}E(this,oo,vS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,_c),svgFactory:new cm,parent:this};for(const a of t){a.borderStyle||(a.borderStyle=rd._defaultBorderStyle),e.data=a;const s=XT.create(e);if(!s.isRenderable)continue;const o=s.render();await E(this,oo,yS).call(this,o,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,so(e,{rotation:t.rotation}),E(this,oo,vS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ql).values())}getEditableAnnotation(t){return l(this,ql).get(t)}addFakeAnnotation(t){var h;const{div:e}=this,{id:a,rotation:s}=t,o=new YN({data:{id:a,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,_c),annotationStorage:l(this,sd)}),u=o.render();return e.append(u),(h=l(this,ad))==null||h.moveElementInDOM(e,u,u,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return kt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Hu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},ad=new WeakMap,Tc=new WeakMap,sd=new WeakMap,ql=new WeakMap,Tg=new WeakMap,_c=new WeakMap,oo=new WeakSet,yS=async function(t,e,a){var h,d;const s=t.firstChild||t,o=s.id=`${$S}${e}`,u=await((h=l(this,Tg))==null?void 0:h.getAriaAttributes(o));if(u)for(const[m,b]of u)s.setAttribute(m,b);a?a.at(-1).container.after(t):(this.div.append(t),(d=l(this,ad))==null||d.moveElementInDOM(this.div,t,s,!1))},vS=function(){var e;if(!l(this,Tc))return;const t=this.div;for(const[a,s]of l(this,Tc)){const o=t.querySelector(`[data-annotation-id="${a}"]`);if(!o)continue;s.className="annotationContent";const{firstChild:u}=o;u?u.nodeName==="CANVAS"?u.replaceWith(s):u.classList.contains("annotationContent")?u.after(s):u.before(s):o.append(s);const h=l(this,ql).get(a);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(a,o.id,s),h._hasNoCanvas=!1):h.canvas=s)}l(this,Tc).clear()},rd);const Eb=/\r\n?|\n/g;var Pn,_g,Cc,Hn,ni,BC,zC,jC,Gb,kr,qb,Vb,FC,SS,PC;const Ee=class Ee extends Se{constructor(e){super({...e,name:"freeTextEditor"});w(this,ni);w(this,Pn,"");w(this,_g,`${this.id}-editor`);w(this,Cc,null);w(this,Hn);it(this,"_colorPicker",null);this.color=e.color||Ee._defaultColor||Se._defaultLineColor,A(this,Hn,e.fontSize||Ee._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Ee.prototype,a=u=>u.isEmpty(),s=ro.TRANSLATE_SMALL,o=ro.TRANSLATE_BIG;return kt(this,"_keyboardManager",new Kg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:a}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:a}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:a}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:a}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:a}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:a}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:a}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:a}]]))}static initialize(e,a){Se.initialize(e,a);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,a){switch(e){case Ut.FREETEXT_SIZE:Ee._defaultFontSize=a;break;case Ut.FREETEXT_COLOR:Ee._defaultColor=a;break}}updateParams(e,a){switch(e){case Ut.FREETEXT_SIZE:E(this,ni,BC).call(this,a);break;case Ut.FREETEXT_COLOR:E(this,ni,zC).call(this,a);break}}static get defaultPropertiesToUpdate(){return[[Ut.FREETEXT_SIZE,Ee._defaultFontSize],[Ut.FREETEXT_COLOR,Ee._defaultColor||Se._defaultLineColor]]}get propertiesToUpdate(){return[[Ut.FREETEXT_SIZE,l(this,Hn)],[Ut.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new h0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ut.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,a){this._uiManager.translateSelectedEditors(e,a,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ee._internalPadding*e,-(Ee._internalPadding+l(this,Hn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,Cc,new AbortController);const e=this._uiManager.combinedSignal(l(this,Cc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,_g)),this._isDraggable=!0,(e=l(this,Cc))==null||e.abort(),A(this,Cc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var a;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(a=this._initialOptions)!=null&&a.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Pn),a=A(this,Pn,E(this,ni,jC).call(this).trimEnd());if(e===a)return;const s=o=>{if(A(this,Pn,o),!o){this.remove();return}E(this,ni,Vb).call(this),this._uiManager.rebuild(this),E(this,ni,Gb).call(this)};this.addCommands({cmd:()=>{s(a)},undo:()=>{s(e)},mustExec:!1}),E(this,ni,Gb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ee._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,a;(this._isCopy||this.annotationElementId)&&(e=this.x,a=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,_g)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Hn)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,m]=this.getInitialTranslation();[d,m]=this.pageTranslationToScreen(d,m);const[b,y]=this.pageDimensions,[v,x]=this.pageTranslation;let _,T;switch(this.rotation){case 0:_=e+(h[0]-v)/b,T=a+this.height-(h[1]-x)/y;break;case 90:_=e+(h[0]-v)/b,T=a-(h[1]-x)/y,[d,m]=[m,-d];break;case 180:_=e-this.width+(h[0]-v)/b,T=a-(h[1]-x)/y,[d,m]=[-d,-m];break;case 270:_=e+(h[0]-v-this.height*y)/b,T=a+(h[1]-x-this.width*b)/y,[d,m]=[-m,d];break}this.setAt(_*o,T*u,d,m)}else this._moveAfterPaste(e,a);E(this,ni,Vb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,T,R;const a=e.clipboardData||window.clipboardData,{types:s}=a;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const o=E(_=Ee,kr,SS).call(_,a.getData("text")||"").replaceAll(Eb,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:d,startOffset:m}=h,b=[],y=[];if(d.nodeType===Node.TEXT_NODE){const M=d.parentElement;if(y.push(d.nodeValue.slice(m).replaceAll(Eb,"")),M!==this.editorDiv){let k=b;for(const N of this.editorDiv.childNodes){if(N===M){k=y;continue}k.push(E(T=Ee,kr,qb).call(T,N))}}b.push(d.nodeValue.slice(0,m).replaceAll(Eb,""))}else if(d===this.editorDiv){let M=b,k=0;for(const N of this.editorDiv.childNodes)k++===m&&(M=y),M.push(E(R=Ee,kr,qb).call(R,N))}A(this,Pn,`${b.join(`
`)}${o}${y.join(`
`)}`),E(this,ni,Vb).call(this);const v=new Range;let x=Math.sumPrecise(b.map(M=>M.length));for(const{firstChild:M}of this.editorDiv.childNodes)if(M.nodeType===Node.TEXT_NODE){const k=M.nodeValue.length;if(x<=k){v.setStart(M,x),v.setEnd(M,x);break}x-=k}u.removeAllRanges(),u.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ee._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,a,s){var h;let o=null;if(e instanceof NC){const{data:{defaultAppearanceData:{fontSize:d,fontColor:m},rect:b,rotation:y,id:v,popupRef:x,richText:_,contentsObj:T,creationDate:R,modificationDate:M},textContent:k,textPosition:N,parent:{page:{pageNumber:O}}}=e;if(!k||k.length===0)return null;o=e={annotationType:Tt.FREETEXT,color:Array.from(m),fontSize:d,value:k.join(`
`),position:N,pageIndex:O-1,rect:b.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:x,comment:(T==null?void 0:T.str)||null,richText:_,creationDate:R,modificationDate:M}}const u=await super.deserialize(e,a,s);return A(u,Hn,e.fontSize),u.color=ht.makeHexColor(...e.color),A(u,Pn,E(h=Ee,kr,SS).call(h,e.value)),u._initialData=o,e.comment&&u.setCommentData(e),u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a=Se._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:a,fontSize:l(this,Hn),value:E(this,ni,FC).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!E(this,ni,PC).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const a=super.renderAnnotationElement(e);if(!a)return null;const{style:s}=a;s.fontSize=`calc(${l(this,Hn)}px * var(--total-scale-factor))`,s.color=this.color,a.replaceChildren();for(const o of l(this,Pn).split(`
`)){const u=document.createElement("div");u.append(o?document.createTextNode(o):document.createElement("br")),a.append(u)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Pn)}}),a}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Pn=new WeakMap,_g=new WeakMap,Cc=new WeakMap,Hn=new WeakMap,ni=new WeakSet,BC=function(e){const a=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Hn))*this.parentScale),A(this,Hn,o),E(this,ni,Gb).call(this)},s=l(this,Hn);this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zC=function(e){const a=o=>{this.color=o,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jC=function(){var s;const e=[];this.editorDiv.normalize();let a=null;for(const o of this.editorDiv.childNodes)(a==null?void 0:a.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(E(s=Ee,kr,qb).call(s,o)),a=o);return e.join(`
`)},Gb=function(){const[e,a]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,h=u.style.display,d=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),s=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/a):(this.width=s.height/e,this.height=s.width/a),this.fixAndSetPosition()},kr=new WeakSet,qb=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Eb,"")},Vb=function(){if(this.editorDiv.replaceChildren(),!!l(this,Pn))for(const e of l(this,Pn).split(`
`)){const a=document.createElement("div");a.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(a)}},FC=function(){return l(this,Pn).replaceAll(""," ")},SS=function(e){return e.replaceAll(" ","")},PC=function(e){const{value:a,fontSize:s,color:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==a||e.fontSize!==s||e.color.some((h,d)=>h!==o[d])||e.pageIndex!==u},w(Ee,kr),it(Ee,"_freeTextDefaultContent",""),it(Ee,"_internalPadding",0),it(Ee,"_defaultColor",null),it(Ee,"_defaultFontSize",10),it(Ee,"_type","freetext"),it(Ee,"_editorType",Tt.FREETEXT);let AS=Ee;class ut{toSVGPath(){ve("Abstract method `toSVGPath` must be implemented.")}get box(){ve("Abstract getter `box` must be implemented.")}serialize(t,e){ve("Abstract method `serialize` must be implemented.")}static _rescale(t,e,a,s,o,u){u||(u=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)u[h]=e+t[h]*s,u[h+1]=a+t[h+1]*o;return u}static _rescaleAndSwap(t,e,a,s,o,u){u||(u=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)u[h]=e+t[h+1]*s,u[h+1]=a+t[h]*o;return u}static _translate(t,e,a,s){s||(s=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)s[o]=e+t[o],s[o+1]=a+t[o+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,a,s,o){switch(o){case 90:return[1-e/a,t/s];case 180:return[1-t/a,1-e/s];case 270:return[e/a,1-t/s];default:return[t/a,e/s]}}static _normalizePagePoint(t,e,a){switch(a){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,a,s,o,u){return[(t+5*a)/6,(e+5*s)/6,(5*a+o)/6,(5*s+u)/6,(a+o)/2,(s+u)/2]}}it(ut,"PRECISION",1e-4);var Un,ja,ld,od,ys,Bt,Mc,Dc,Cg,Mg,cd,ud,Vl,Dg,N0,k0,ci,$f,HC,UC,IC,GC,qC,VC;const $s=class $s{constructor({x:t,y:e},a,s,o,u,h=0){w(this,ci);w(this,Un);w(this,ja,[]);w(this,ld);w(this,od);w(this,ys,[]);w(this,Bt,new Float32Array(18));w(this,Mc);w(this,Dc);w(this,Cg);w(this,Mg);w(this,cd);w(this,ud);w(this,Vl,[]);A(this,Un,a),A(this,ud,o*s),A(this,od,u),l(this,Bt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,ld,h),A(this,Mg,l($s,Dg)*s),A(this,Cg,l($s,k0)*s),A(this,cd,s),l(this,Vl).push(t,e)}isEmpty(){return isNaN(l(this,Bt)[8])}add({x:t,y:e}){var X;A(this,Mc,t),A(this,Dc,e);const[a,s,o,u]=l(this,Un);let[h,d,m,b]=l(this,Bt).subarray(8,12);const y=t-m,v=e-b,x=Math.hypot(y,v);if(x<l(this,Cg))return!1;const _=x-l(this,Mg),T=_/x,R=T*y,M=T*v;let k=h,N=d;h=m,d=b,m+=R,b+=M,(X=l(this,Vl))==null||X.push(t,e);const O=-M/_,z=R/_,j=O*l(this,ud),H=z*l(this,ud);return l(this,Bt).set(l(this,Bt).subarray(2,8),0),l(this,Bt).set([m+j,b+H],4),l(this,Bt).set(l(this,Bt).subarray(14,18),12),l(this,Bt).set([m-j,b-H],16),isNaN(l(this,Bt)[6])?(l(this,ys).length===0&&(l(this,Bt).set([h+j,d+H],2),l(this,ys).push(NaN,NaN,NaN,NaN,(h+j-a)/o,(d+H-s)/u),l(this,Bt).set([h-j,d-H],14),l(this,ja).push(NaN,NaN,NaN,NaN,(h-j-a)/o,(d-H-s)/u)),l(this,Bt).set([k,N,h,d,m,b],6),!this.isEmpty()):(l(this,Bt).set([k,N,h,d,m,b],6),Math.abs(Math.atan2(N-d,k-h)-Math.atan2(M,R))<Math.PI/2?([h,d,m,b]=l(this,Bt).subarray(2,6),l(this,ys).push(NaN,NaN,NaN,NaN,((h+m)/2-a)/o,((d+b)/2-s)/u),[h,d,k,N]=l(this,Bt).subarray(14,18),l(this,ja).push(NaN,NaN,NaN,NaN,((k+h)/2-a)/o,((N+d)/2-s)/u),!0):([k,N,h,d,m,b]=l(this,Bt).subarray(0,6),l(this,ys).push(((k+5*h)/6-a)/o,((N+5*d)/6-s)/u,((5*h+m)/6-a)/o,((5*d+b)/6-s)/u,((h+m)/2-a)/o,((d+b)/2-s)/u),[m,b,h,d,k,N]=l(this,Bt).subarray(12,18),l(this,ja).push(((k+5*h)/6-a)/o,((N+5*d)/6-s)/u,((5*h+m)/6-a)/o,((5*d+b)/6-s)/u,((h+m)/2-a)/o,((d+b)/2-s)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,ys),e=l(this,ja);if(isNaN(l(this,Bt)[6])&&!this.isEmpty())return E(this,ci,HC).call(this);const a=[];a.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?a.push(`L${t[s+4]} ${t[s+5]}`):a.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);E(this,ci,IC).call(this,a);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?a.push(`L${e[s+4]} ${e[s+5]}`):a.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return E(this,ci,UC).call(this,a),a.join(" ")}newFreeDrawOutline(t,e,a,s,o,u){return new YC(t,e,a,s,o,u)}getOutlines(){var y;const t=l(this,ys),e=l(this,ja),a=l(this,Bt),[s,o,u,h]=l(this,Un),d=new Float32Array((((y=l(this,Vl))==null?void 0:y.length)??0)+2);for(let v=0,x=d.length-2;v<x;v+=2)d[v]=(l(this,Vl)[v]-s)/u,d[v+1]=(l(this,Vl)[v+1]-o)/h;if(d[d.length-2]=(l(this,Mc)-s)/u,d[d.length-1]=(l(this,Dc)-o)/h,isNaN(a[6])&&!this.isEmpty())return E(this,ci,GC).call(this,d);const m=new Float32Array(l(this,ys).length+24+l(this,ja).length);let b=t.length;for(let v=0;v<b;v+=2){if(isNaN(t[v])){m[v]=m[v+1]=NaN;continue}m[v]=t[v],m[v+1]=t[v+1]}b=E(this,ci,VC).call(this,m,b);for(let v=e.length-6;v>=6;v-=6)for(let x=0;x<6;x+=2){if(isNaN(e[v+x])){m[b]=m[b+1]=NaN,b+=2;continue}m[b]=e[v+x],m[b+1]=e[v+x+1],b+=2}return E(this,ci,qC).call(this,m,b),this.newFreeDrawOutline(m,d,l(this,Un),l(this,cd),l(this,ld),l(this,od))}};Un=new WeakMap,ja=new WeakMap,ld=new WeakMap,od=new WeakMap,ys=new WeakMap,Bt=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,Cg=new WeakMap,Mg=new WeakMap,cd=new WeakMap,ud=new WeakMap,Vl=new WeakMap,Dg=new WeakMap,N0=new WeakMap,k0=new WeakMap,ci=new WeakSet,$f=function(){const t=l(this,Bt).subarray(4,6),e=l(this,Bt).subarray(16,18),[a,s,o,u]=l(this,Un);return[(l(this,Mc)+(t[0]-e[0])/2-a)/o,(l(this,Dc)+(t[1]-e[1])/2-s)/u,(l(this,Mc)+(e[0]-t[0])/2-a)/o,(l(this,Dc)+(e[1]-t[1])/2-s)/u]},HC=function(){const[t,e,a,s]=l(this,Un),[o,u,h,d]=E(this,ci,$f).call(this);return`M${(l(this,Bt)[2]-t)/a} ${(l(this,Bt)[3]-e)/s} L${(l(this,Bt)[4]-t)/a} ${(l(this,Bt)[5]-e)/s} L${o} ${u} L${h} ${d} L${(l(this,Bt)[16]-t)/a} ${(l(this,Bt)[17]-e)/s} L${(l(this,Bt)[14]-t)/a} ${(l(this,Bt)[15]-e)/s} Z`},UC=function(t){const e=l(this,ja);t.push(`L${e[4]} ${e[5]} Z`)},IC=function(t){const[e,a,s,o]=l(this,Un),u=l(this,Bt).subarray(4,6),h=l(this,Bt).subarray(16,18),[d,m,b,y]=E(this,ci,$f).call(this);t.push(`L${(u[0]-e)/s} ${(u[1]-a)/o} L${d} ${m} L${b} ${y} L${(h[0]-e)/s} ${(h[1]-a)/o}`)},GC=function(t){const e=l(this,Bt),[a,s,o,u]=l(this,Un),[h,d,m,b]=E(this,ci,$f).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-a)/o,(e[3]-s)/u,NaN,NaN,NaN,NaN,(e[4]-a)/o,(e[5]-s)/u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,m,b,NaN,NaN,NaN,NaN,(e[16]-a)/o,(e[17]-s)/u,NaN,NaN,NaN,NaN,(e[14]-a)/o,(e[15]-s)/u],0),this.newFreeDrawOutline(y,t,l(this,Un),l(this,cd),l(this,ld),l(this,od))},qC=function(t,e){const a=l(this,ja);return t.set([NaN,NaN,NaN,NaN,a[4],a[5]],e),e+=6},VC=function(t,e){const a=l(this,Bt).subarray(4,6),s=l(this,Bt).subarray(16,18),[o,u,h,d]=l(this,Un),[m,b,y,v]=E(this,ci,$f).call(this);return t.set([NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-u)/d,NaN,NaN,NaN,NaN,m,b,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-u)/d],e),e+=24},w($s,Dg,8),w($s,N0,2),w($s,k0,l($s,Dg)+l($s,N0));let d0=$s;var hd,Rc,Er,Rg,In,Ng,$e,L0,XC;class YC extends ut{constructor(e,a,s,o,u,h){super();w(this,L0);w(this,hd);w(this,Rc,new Float32Array(4));w(this,Er);w(this,Rg);w(this,In);w(this,Ng);w(this,$e);A(this,$e,e),A(this,In,a),A(this,hd,s),A(this,Ng,o),A(this,Er,u),A(this,Rg,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,L0,XC).call(this,h);const[d,m,b,y]=l(this,Rc);for(let v=0,x=e.length;v<x;v+=2)e[v]=(e[v]-d)/b,e[v+1]=(e[v+1]-m)/y;for(let v=0,x=a.length;v<x;v+=2)a[v]=(a[v]-d)/b,a[v+1]=(a[v+1]-m)/y}toSVGPath(){const e=[`M${l(this,$e)[4]} ${l(this,$e)[5]}`];for(let a=6,s=l(this,$e).length;a<s;a+=6){if(isNaN(l(this,$e)[a])){e.push(`L${l(this,$e)[a+4]} ${l(this,$e)[a+5]}`);continue}e.push(`C${l(this,$e)[a]} ${l(this,$e)[a+1]} ${l(this,$e)[a+2]} ${l(this,$e)[a+3]} ${l(this,$e)[a+4]} ${l(this,$e)[a+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,a,s,o],u){const h=s-e,d=o-a;let m,b;switch(u){case 0:m=ut._rescale(l(this,$e),e,o,h,-d),b=ut._rescale(l(this,In),e,o,h,-d);break;case 90:m=ut._rescaleAndSwap(l(this,$e),e,a,h,d),b=ut._rescaleAndSwap(l(this,In),e,a,h,d);break;case 180:m=ut._rescale(l(this,$e),s,a,-h,d),b=ut._rescale(l(this,In),s,a,-h,d);break;case 270:m=ut._rescaleAndSwap(l(this,$e),s,o,-h,-d),b=ut._rescaleAndSwap(l(this,In),s,o,-h,-d);break}return{outline:Array.from(m),points:[Array.from(b)]}}get box(){return l(this,Rc)}newOutliner(e,a,s,o,u,h=0){return new d0(e,a,s,o,u,h)}getNewOutline(e,a){const[s,o,u,h]=l(this,Rc),[d,m,b,y]=l(this,hd),v=u*b,x=h*y,_=s*b+d,T=o*y+m,R=this.newOutliner({x:l(this,In)[0]*v+_,y:l(this,In)[1]*x+T},l(this,hd),l(this,Ng),e,l(this,Rg),a??l(this,Er));for(let M=2;M<l(this,In).length;M+=2)R.add({x:l(this,In)[M]*v+_,y:l(this,In)[M+1]*x+T});return R.getOutlines()}}hd=new WeakMap,Rc=new WeakMap,Er=new WeakMap,Rg=new WeakMap,In=new WeakMap,Ng=new WeakMap,$e=new WeakMap,L0=new WeakSet,XC=function(e){const a=l(this,$e);let s=a[4],o=a[5];const u=[s,o,s,o];let h=s,d=o,m=s,b=o;const y=e?Math.max:Math.min,v=new Float32Array(4);for(let _=6,T=a.length;_<T;_+=6){const R=a[_+4],M=a[_+5];isNaN(a[_])?(ht.pointBoundingBox(R,M,u),d>M?(h=R,d=M):d===M&&(h=y(h,R)),b<M?(m=R,b=M):b===M&&(m=y(m,R))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ht.bezierBoundingBox(s,o,...a.slice(_,_+6),v),ht.rectBoundingBox(v[0],v[1],v[2],v[3],u),d>v[1]?(h=v[0],d=v[1]):d===v[1]&&(h=y(h,v[0])),b<v[3]?(m=v[2],b=v[3]):b===v[3]&&(m=y(m,v[2]))),s=R,o=M}const x=l(this,Rc);x[0]=u[0]-l(this,Er),x[1]=u[1]-l(this,Er),x[2]=u[2]-u[0]+2*l(this,Er),x[3]=u[3]-u[1]+2*l(this,Er),this.firstPoint=[h,d],this.lastPoint=[m,b]};var kg,Lg,Og,Yl,Fa,Qi,KC,Yb,WC,$C,wS;class xS{constructor(t,e=0,a=0,s=!0){w(this,Qi);w(this,kg);w(this,Lg);w(this,Og);w(this,Yl,[]);w(this,Fa,[]);const o=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:T,y:R,width:M,height:k}of t){const N=Math.floor((T-e)/u)*u,O=Math.ceil((T+M+e)/u)*u,z=Math.floor((R-e)/u)*u,j=Math.ceil((R+k+e)/u)*u,H=[N,z,j,!0],U=[O,z,j,!1];l(this,Yl).push(H,U),ht.rectBoundingBox(N,z,O,j,o)}const h=o[2]-o[0]+2*a,d=o[3]-o[1]+2*a,m=o[0]-a,b=o[1]-a;let y=s?-1/0:1/0,v=1/0;const x=l(this,Yl).at(s?-1:-2),_=[x[0],x[2]];for(const T of l(this,Yl)){const[R,M,k,N]=T;!N&&s?M<v?(v=M,y=R):M===v&&(y=Math.max(y,R)):N&&!s&&(M<v?(v=M,y=R):M===v&&(y=Math.min(y,R))),T[0]=(R-m)/h,T[1]=(M-b)/d,T[2]=(k-b)/d}A(this,kg,new Float32Array([m,b,h,d])),A(this,Lg,[y,v]),A(this,Og,_)}getOutlines(){l(this,Yl).sort((e,a)=>e[0]-a[0]||e[1]-a[1]||e[2]-a[2]);const t=[];for(const e of l(this,Yl))e[3]?(t.push(...E(this,Qi,wS).call(this,e)),E(this,Qi,WC).call(this,e)):(E(this,Qi,$C).call(this,e),t.push(...E(this,Qi,wS).call(this,e)));return E(this,Qi,KC).call(this,t)}}kg=new WeakMap,Lg=new WeakMap,Og=new WeakMap,Yl=new WeakMap,Fa=new WeakMap,Qi=new WeakSet,KC=function(t){const e=[],a=new Set;for(const u of t){const[h,d,m]=u;e.push([h,d,u],[h,m,u])}e.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=e.length;u<h;u+=2){const d=e[u][2],m=e[u+1][2];d.push(m),m.push(d),a.add(d),a.add(m)}const s=[];let o;for(;a.size>0;){const u=a.values().next().value;let[h,d,m,b,y]=u;a.delete(u);let v=h,x=d;for(o=[h,m],s.push(o);;){let _;if(a.has(b))_=b;else if(a.has(y))_=y;else break;a.delete(_),[h,d,m,b,y]=_,v!==h&&(o.push(v,x,h,x===d?d:m),v=h),x=x===d?m:d}o.push(v,x)}return new ck(s,l(this,kg),l(this,Lg),l(this,Og))},Yb=function(t){const e=l(this,Fa);let a=0,s=e.length-1;for(;a<=s;){const o=a+s>>1,u=e[o][0];if(u===t)return o;u<t?a=o+1:s=o-1}return s+1},WC=function([,t,e]){const a=E(this,Qi,Yb).call(this,t);l(this,Fa).splice(a,0,[t,e])},$C=function([,t,e]){const a=E(this,Qi,Yb).call(this,t);for(let s=a;s<l(this,Fa).length;s++){const[o,u]=l(this,Fa)[s];if(o!==t)break;if(o===t&&u===e){l(this,Fa).splice(s,1);return}}for(let s=a-1;s>=0;s--){const[o,u]=l(this,Fa)[s];if(o!==t)break;if(o===t&&u===e){l(this,Fa).splice(s,1);return}}},wS=function(t){const[e,a,s]=t,o=[[e,a,s]],u=E(this,Qi,Yb).call(this,s);for(let h=0;h<u;h++){const[d,m]=l(this,Fa)[h];for(let b=0,y=o.length;b<y;b++){const[,v,x]=o[b];if(!(m<=v||x<=d)){if(v>=d){if(x>m)o[b][1]=m;else{if(y===1)return[];o.splice(b,1),b--,y--}continue}o[b][2]=d,x>m&&o.push([e,m,x])}}}return o};var Bg,dd;class ck extends ut{constructor(e,a,s,o){super();w(this,Bg);w(this,dd);A(this,dd,e),A(this,Bg,a),this.firstPoint=s,this.lastPoint=o}toSVGPath(){const e=[];for(const a of l(this,dd)){let[s,o]=a;e.push(`M${s} ${o}`);for(let u=2;u<a.length;u+=2){const h=a[u],d=a[u+1];h===s?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${h}`),s=h)}e.push("Z")}return e.join(" ")}serialize([e,a,s,o],u){const h=[],d=s-e,m=o-a;for(const b of l(this,dd)){const y=new Array(b.length);for(let v=0;v<b.length;v+=2)y[v]=e+b[v]*d,y[v+1]=o-b[v+1]*m;h.push(y)}return h}get box(){return l(this,Bg)}get classNamesForOutlining(){return["highlightOutline"]}}Bg=new WeakMap,dd=new WeakMap;class ES extends d0{newFreeDrawOutline(t,e,a,s,o,u){return new uk(t,e,a,s,o,u)}}class uk extends YC{newOutliner(t,e,a,s,o,u=0){return new ES(t,e,a,s,o,u)}}var fd,zg,Tr,Nc,jg,pn,Fg,Pg,kc,Gn,qn,Di,md,gd,Hi,pd,Aa,Hg,Lt,TS,Xb,QC,ZC,JC,_S,No,wa,Yu,t2,Kb,Wb,e2,i2,n2,a2,s2;const Zt=class Zt extends Se{constructor(e){super({...e,name:"highlightEditor"});w(this,Lt);w(this,fd,null);w(this,zg,0);w(this,Tr);w(this,Nc,null);w(this,jg,null);w(this,pn,null);w(this,Fg,null);w(this,Pg,0);w(this,kc,null);w(this,Gn,null);w(this,qn,null);w(this,Di,!1);w(this,md,null);w(this,gd,null);w(this,Hi,null);w(this,pd,"");w(this,Aa);w(this,Hg,"");this.color=e.color||Zt._defaultColor,A(this,Aa,e.thickness||Zt._defaultThickness),this.opacity=e.opacity||Zt._defaultOpacity,A(this,Tr,e.boxes||null),A(this,Hg,e.methodOfCreation||""),A(this,pd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(A(this,Di,!0),E(this,Lt,Xb).call(this,e),E(this,Lt,No).call(this)):l(this,Tr)&&(A(this,fd,e.anchorNode),A(this,zg,e.anchorOffset),A(this,Fg,e.focusNode),A(this,Pg,e.focusOffset),E(this,Lt,TS).call(this),E(this,Lt,No).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Zt.prototype;return kt(this,"_keyboardManager",new Kg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Di)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Aa),methodOfCreation:l(this,Hg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,a){var s;Se.initialize(e,a),Zt._defaultColor||(Zt._defaultColor=((s=a.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,a){switch(e){case Ut.HIGHLIGHT_COLOR:Zt._defaultColor=a;break;case Ut.HIGHLIGHT_THICKNESS:Zt._defaultThickness=a;break}}translateInPage(e,a){}get toolbarPosition(){return l(this,gd)}get commentButtonPosition(){return l(this,md)}updateParams(e,a){switch(e){case Ut.HIGHLIGHT_COLOR:E(this,Lt,QC).call(this,a);break;case Ut.HIGHLIGHT_THICKNESS:E(this,Lt,ZC).call(this,a);break}}static get defaultPropertiesToUpdate(){return[[Ut.HIGHLIGHT_COLOR,Zt._defaultColor],[Ut.HIGHLIGHT_THICKNESS,Zt._defaultThickness]]}get propertiesToUpdate(){return[[Ut.HIGHLIGHT_COLOR,this.color||Zt._defaultColor],[Ut.HIGHLIGHT_THICKNESS,l(this,Aa)||Zt._defaultThickness],[Ut.HIGHLIGHT_FREE,l(this,Di)]]}onUpdatedColor(){var e,a;(e=this.parent)==null||e.drawLayer.updateProperties(l(this,qn),{root:{fill:this.color,"fill-opacity":this.opacity}}),(a=l(this,jg))==null||a.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,jg,new om({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Lt,Wb).call(this))}getBaseTranslation(){return[0,0]}getRect(e,a){return super.getRect(e,a,E(this,Lt,Wb).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,Lt,_S).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Lt,No).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let a=!1;this.parent&&!e?E(this,Lt,_S).call(this):e&&(E(this,Lt,No).call(this,e),a=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),a&&this.select()}rotate(e){var o,u,h;const{drawLayer:a}=this.parent;let s;l(this,Di)?(e=(e-this.rotation+360)%360,s=E(o=Zt,wa,Yu).call(o,l(this,Gn).box,e)):s=E(u=Zt,wa,Yu).call(u,[this.x,this.y,this.width,this.height],e),a.updateProperties(l(this,qn),{bbox:s,root:{"data-main-rotation":e}}),a.updateProperties(l(this,Hi),{bbox:E(h=Zt,wa,Yu).call(h,l(this,pn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,pd)&&(e.setAttribute("aria-label",l(this,pd)),e.setAttribute("role","mark")),l(this,Di)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,Lt,t2).bind(this),{signal:this._uiManager._signal});const a=A(this,kc,document.createElement("div"));return e.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",a.style.clipPath=l(this,Nc),this.setDims(this.width,this.height),__(this,l(this,kc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Hi),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Hi),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Lt,Kb).call(this,!0);break;case 1:case 3:E(this,Lt,Kb).call(this,!1);break}}select(){var e;super.select(),l(this,Hi)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Hi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Hi)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Hi),{rootClass:{selected:!1}}),l(this,Di)||E(this,Lt,Kb).call(this,!1))}get _mustFixPosition(){return!l(this,Di)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,qn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Hi),{rootClass:{hidden:!e}}))}static startHighlighting(e,a,{target:s,x:o,y:u}){const{x:h,y:d,width:m,height:b}=s.getBoundingClientRect(),y=new AbortController,v=e.combinedSignal(y),x=_=>{y.abort(),E(this,wa,a2).call(this,e,_)};window.addEventListener("blur",x,{signal:v}),window.addEventListener("pointerup",x,{signal:v}),window.addEventListener("pointerdown",Le,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Zn,{signal:v}),s.addEventListener("pointermove",E(this,wa,n2).bind(this,e),{signal:v}),this._freeHighlight=new ES({x:o,y:u},[h,d,m,b],e.scale,this._defaultThickness/2,a,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,a,s){var T,R,M,k;let o=null;if(e instanceof LC){const{data:{quadPoints:N,rect:O,rotation:z,id:j,color:H,opacity:U,popupRef:X,richText:J,contentsObj:tt,creationDate:nt,modificationDate:bt},parent:{page:{pageNumber:st}}}=e;o=e={annotationType:Tt.HIGHLIGHT,color:Array.from(H),opacity:U,quadPoints:N,boxes:null,pageIndex:st-1,rect:O.slice(0),rotation:z,annotationElementId:j,id:j,deleted:!1,popupRef:X,richText:J,comment:(tt==null?void 0:tt.str)||null,creationDate:nt,modificationDate:bt}}else if(e instanceof rx){const{data:{inkLists:N,rect:O,rotation:z,id:j,color:H,borderStyle:{rawWidth:U},popupRef:X,richText:J,contentsObj:tt,creationDate:nt,modificationDate:bt},parent:{page:{pageNumber:st}}}=e;o=e={annotationType:Tt.HIGHLIGHT,color:Array.from(H),thickness:U,inkLists:N,boxes:null,pageIndex:st-1,rect:O.slice(0),rotation:z,annotationElementId:j,id:j,deleted:!1,popupRef:X,richText:J,comment:(tt==null?void 0:tt.str)||null,creationDate:nt,modificationDate:bt}}const{color:u,quadPoints:h,inkLists:d,opacity:m}=e,b=await super.deserialize(e,a,s);b.color=ht.makeHexColor(...u),b.opacity=m||1,d&&A(b,Aa,e.thickness),b._initialData=o,e.comment&&b.setCommentData(e);const[y,v]=b.pageDimensions,[x,_]=b.pageTranslation;if(h){const N=A(b,Tr,[]);for(let O=0;O<h.length;O+=8)N.push({x:(h[O]-x)/y,y:1-(h[O+1]-_)/v,width:(h[O+2]-h[O])/y,height:(h[O+1]-h[O+5])/v});E(T=b,Lt,TS).call(T),E(R=b,Lt,No).call(R),b.rotate(b.rotation)}else if(d){A(b,Di,!0);const N=d[0],O={x:N[0]-x,y:v-(N[1]-_)},z=new ES(O,[0,0,y,v],1,l(b,Aa)/2,!0,.001);for(let U=0,X=N.length;U<X;U+=2)O.x=N[U]-x,O.y=v-(N[U+1]-_),z.add(O);const{id:j,clipPathId:H}=a.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:b.color,"fill-opacity":b._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);E(M=b,Lt,Xb).call(M,{highlightOutlines:z.getOutlines(),highlightId:j,clipPathId:H}),E(k=b,Lt,No).call(k),b.rotate(b.parentRotation)}return b}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const a=Se._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:a,opacity:this.opacity,thickness:l(this,Aa),quadPoints:E(this,Lt,e2).call(this),outlines:E(this,Lt,i2).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!E(this,Lt,s2).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};fd=new WeakMap,zg=new WeakMap,Tr=new WeakMap,Nc=new WeakMap,jg=new WeakMap,pn=new WeakMap,Fg=new WeakMap,Pg=new WeakMap,kc=new WeakMap,Gn=new WeakMap,qn=new WeakMap,Di=new WeakMap,md=new WeakMap,gd=new WeakMap,Hi=new WeakMap,pd=new WeakMap,Aa=new WeakMap,Hg=new WeakMap,Lt=new WeakSet,TS=function(){const e=new xS(l(this,Tr),.001);A(this,Gn,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,Gn).box;const a=new xS(l(this,Tr),.0025,.001,this._uiManager.direction==="ltr");A(this,pn,a.getOutlines());const{firstPoint:s}=l(this,Gn);A(this,md,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:o}=l(this,pn);A(this,gd,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Xb=function({highlightOutlines:e,highlightId:a,clipPathId:s}){var v,x;if(A(this,Gn,e),A(this,pn,e.getNewOutline(l(this,Aa)/2+1.5,.0025)),a>=0)A(this,qn,a),A(this,Nc,s),this.parent.drawLayer.finalizeDraw(a,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,Hi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,pn).box,path:{d:l(this,pn).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,qn),{bbox:E(v=Zt,wa,Yu).call(v,l(this,Gn).box,(_-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Hi),{bbox:E(x=Zt,wa,Yu).call(x,l(this,pn).box,_),path:{d:l(this,pn).toSVGPath()}})}const[u,h,d,m]=e.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=d,this.height=m;break;case 90:{const[_,T]=this.parentDimensions;this.x=h,this.y=1-u,this.width=d*T/_,this.height=m*_/T;break}case 180:this.x=1-u,this.y=1-h,this.width=d,this.height=m;break;case 270:{const[_,T]=this.parentDimensions;this.x=1-h,this.y=u,this.width=d*T/_,this.height=m*_/T;break}}const{firstPoint:b}=e;A(this,md,[(b[0]-u)/d,(b[1]-h)/m]);const{lastPoint:y}=l(this,pn);A(this,gd,[(y[0]-u)/d,(y[1]-h)/m])},QC=function(e){const a=(u,h)=>{this.color=u,this.opacity=h,this.onUpdatedColor()},s=this.color,o=this.opacity;this.addCommands({cmd:a.bind(this,e,Zt._defaultOpacity),undo:a.bind(this,s,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},ZC=function(e){const a=l(this,Aa),s=o=>{A(this,Aa,o),E(this,Lt,JC).call(this,o)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},JC=function(e){l(this,Di)&&(E(this,Lt,Xb).call(this,{highlightOutlines:l(this,Gn).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},_S=function(){l(this,qn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,qn)),A(this,qn,null),this.parent.drawLayer.remove(l(this,Hi)),A(this,Hi,null))},No=function(e=this.parent){l(this,qn)===null&&({id:si(this,qn)._,clipPathId:si(this,Nc)._}=e.drawLayer.draw({bbox:l(this,Gn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Di)},path:{d:l(this,Gn).toSVGPath()}},!1,!0),A(this,Hi,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Di)},bbox:l(this,pn).box,path:{d:l(this,pn).toSVGPath()}},l(this,Di))),l(this,kc)&&(l(this,kc).style.clipPath=l(this,Nc)))},wa=new WeakSet,Yu=function([e,a,s,o],u){switch(u){case 90:return[1-a-o,e,o,s];case 180:return[1-e-s,1-a-o,s,o];case 270:return[a,1-e-s,o,s]}return[e,a,s,o]},t2=function(e){Zt._keyboardManager.exec(this,e)},Kb=function(e){if(!l(this,fd))return;const a=window.getSelection();e?a.setPosition(l(this,fd),l(this,zg)):a.setPosition(l(this,Fg),l(this,Pg))},Wb=function(){return l(this,Di)?this.rotation:0},e2=function(){if(l(this,Di))return null;const[e,a]=this.pageDimensions,[s,o]=this.pageTranslation,u=l(this,Tr),h=new Float32Array(u.length*8);let d=0;for(const{x:m,y:b,width:y,height:v}of u){const x=m*e+s,_=(1-b)*a+o;h[d]=h[d+4]=x,h[d+1]=h[d+3]=_,h[d+2]=h[d+6]=x+y*e,h[d+5]=h[d+7]=_-v*a,d+=8}return h},i2=function(e){return l(this,Gn).serialize(e,E(this,Lt,Wb).call(this))},n2=function(e,a){this._freeHighlight.add(a)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},a2=function(e,a){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(a,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},s2=function(e){const{color:a}=this._initialData;return this.hasEditedComment||e.color.some((s,o)=>s!==a[o])},w(Zt,wa),it(Zt,"_defaultColor",null),it(Zt,"_defaultOpacity",1),it(Zt,"_defaultThickness",12),it(Zt,"_type","highlight"),it(Zt,"_editorType",Tt.HIGHLIGHT),it(Zt,"_freeHighlightId",-1),it(Zt,"_freeHighlight",null),it(Zt,"_freeHighlightClipId","");let f0=Zt;var Lc;class r2{constructor(){w(this,Lc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,a]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,a)}updateSVGProperty(t,e){l(this,Lc)[t]=e}toSVGProperties(){const t=l(this,Lc);return A(this,Lc,Object.create(null)),{root:t}}reset(){A(this,Lc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ve("Not implemented")}}Lc=new WeakMap;var Vn,bd,mi,Oc,Bc,Xl,Kl,Wl,zc,Yt,CS,MS,DS,Qf,l2,$b,Zf,Xu;const mt=class mt extends Se{constructor(e){super(e);w(this,Yt);w(this,Vn,null);w(this,bd);it(this,"_colorPicker",null);it(this,"_drawId",null);A(this,bd,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(E(this,Yt,CS).call(this,e),E(this,Yt,Qf).call(this))}static _mergeSVGProperties(e,a){const s=new Set(Object.keys(e));for(const[o,u]of Object.entries(a))s.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){ve("Not implemented")}static get typesMap(){ve("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,a){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,a),this._currentParent&&(l(mt,mi).updateProperty(s,a),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,a){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,a)}static get defaultPropertiesToUpdate(){const e=[],a=this._defaultDrawingOptions;for(const[s,o]of this.typesMap)e.push([s,a[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:a}=this;for(const[s,o]of this.constructor.typesMap)e.push([s,a[o]]);return e}_updateProperty(e,a,s){const o=this._drawingOptions,u=o[a],h=d=>{var b;o.updateProperty(a,d);const m=l(this,Vn).updateProperty(a,d);m&&E(this,Yt,Zf).call(this,m),(b=this.parent)==null||b.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,s),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,Vn).getPathResizingSVGProperties(E(this,Yt,$b).call(this)),{bbox:E(this,Yt,Xu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,Vn).getPathResizedSVGProperties(E(this,Yt,$b).call(this)),{bbox:E(this,Yt,Xu).call(this)}))}_onTranslating(e,a){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:E(this,Yt,Xu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,Vn).getPathTranslatedSVGProperties(E(this,Yt,$b).call(this),this.parentDimensions),{bbox:E(this,Yt,Xu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,bd)&&(A(this,bd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,Yt,DS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Yt,Qf).call(this),E(this,Yt,Zf).call(this,l(this,Vn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let a=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,Yt,DS).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,Yt,Qf).call(this,e),a=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),a&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:E(this,Yt,Xu).call(this)},l(this,Vn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Yt,Zf).call(this,l(this,Vn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,a;this._isCopy&&(e=this.x,a=this.y);const s=super.render();s.classList.add("draw");const o=document.createElement("div");return s.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,a),s}static createDrawerInstance(e,a,s,o,u){ve("Not implemented")}static startDrawing(e,a,s,o){var R;const{target:u,offsetX:h,offsetY:d,pointerId:m,pointerType:b}=o;if(l(mt,Kl)&&l(mt,Kl)!==b)return;const{viewport:{rotation:y}}=e,{width:v,height:x}=u.getBoundingClientRect(),_=A(mt,Oc,new AbortController),T=e.combinedSignal(_);if(l(mt,Xl)||A(mt,Xl,m),l(mt,Kl)??A(mt,Kl,b),window.addEventListener("pointerup",M=>{var k;l(mt,Xl)===M.pointerId?this._endDraw(M):(k=l(mt,Wl))==null||k.delete(M.pointerId)},{signal:T}),window.addEventListener("pointercancel",M=>{var k;l(mt,Xl)===M.pointerId?this._currentParent.endDrawingSession():(k=l(mt,Wl))==null||k.delete(M.pointerId)},{signal:T}),window.addEventListener("pointerdown",M=>{l(mt,Kl)===M.pointerType&&((l(mt,Wl)||A(mt,Wl,new Set)).add(M.pointerId),l(mt,mi).isCancellable()&&(l(mt,mi).removeLastElement(),l(mt,mi).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:T}),window.addEventListener("contextmenu",Zn,{signal:T}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:T}),u.addEventListener("touchmove",M=>{M.timeStamp===l(mt,zc)&&Le(M)},{signal:T}),e.toggleDrawing(),(R=a._editorUndoBar)==null||R.hide(),l(mt,mi)){e.drawLayer.updateProperties(this._currentDrawId,l(mt,mi).startNew(h,d,v,x,y));return}a.updateUIForDefaultProperties(this),A(mt,mi,this.createDrawerInstance(h,d,v,x,y)),A(mt,Bc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(mt,Bc).toSVGProperties(),l(mt,mi).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(mt,zc,-1),!l(mt,mi))return;const{offsetX:a,offsetY:s,pointerId:o}=e;if(l(mt,Xl)===o){if(((u=l(mt,Wl))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(mt,mi).add(a,s)),A(mt,zc,e.timeStamp),Le(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(mt,mi,null),A(mt,Bc,null),A(mt,Kl,null),A(mt,zc,NaN)),l(mt,Oc)&&(l(mt,Oc).abort(),A(mt,Oc,null),A(mt,Xl,NaN),A(mt,Wl,null))}static _endDraw(e){const a=this._currentParent;if(a){if(a.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===a.div&&a.drawLayer.updateProperties(this._currentDrawId,l(mt,mi).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=l(mt,mi),o=this._currentDrawId,u=s.getLastElement();a.addCommands({cmd:()=>{a.drawLayer.updateProperties(o,s.setLastElement(u))},undo:()=>{a.drawLayer.updateProperties(o,s.removeLastElement())},mustExec:!1,type:Ut.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const a=this._currentParent;if(!a)return null;if(a.toggleDrawing(!0),a.cleanUndoStack(Ut.DRAW_STEP),!l(mt,mi).isEmpty()){const{pageDimensions:[s,o],scale:u}=a,h=a.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(mt,mi).getOutlines(s*u,o*u,u,this._INNER_MARGIN),drawingOptions:l(mt,Bc),mustBeCommitted:!e});return this._cleanup(!0),h}return a.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,a,s,o,u,h){ve("Not implemented")}static async deserialize(e,a,s){var y,v;const{rawDims:{pageWidth:o,pageHeight:u,pageX:h,pageY:d}}=a.viewport,m=this.deserializeDraw(h,d,o,u,this._INNER_MARGIN,e),b=await super.deserialize(e,a,s);return b.createDrawingOptions(e),E(y=b,Yt,CS).call(y,{drawOutlines:m}),E(v=b,Yt,Qf).call(v),b.onScaleChanging(),b.rotate(),b}serializeDraw(e){const[a,s]=this.pageTranslation,[o,u]=this.pageDimensions;return l(this,Vn).serialize([a,s,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Vn=new WeakMap,bd=new WeakMap,mi=new WeakMap,Oc=new WeakMap,Bc=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,Wl=new WeakMap,zc=new WeakMap,Yt=new WeakSet,CS=function({drawOutlines:e,drawId:a,drawingOptions:s}){A(this,Vn,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),a>=0?(this._drawId=a,this.parent.drawLayer.finalizeDraw(a,e.defaultProperties)):this._drawId=E(this,Yt,MS).call(this,e,this.parent),E(this,Yt,Zf).call(this,e.box)},MS=function(e,a){const{id:s}=a.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},DS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Qf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,Yt,MS).call(this,l(this,Vn),e)}},l2=function([e,a,s,o]){const{parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[a,1-e,s*(h/u),o*(u/h)];case 180:return[1-e,1-a,s,o];case 270:return[1-a,e,s*(h/u),o*(u/h)];default:return[e,a,s,o]}},$b=function(){const{x:e,y:a,width:s,height:o,parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[1-a,e,s*(u/h),o*(h/u)];case 180:return[1-e,1-a,s,o];case 270:return[a,1-e,s*(u/h),o*(h/u)];default:return[e,a,s,o]}},Zf=function(e){[this.x,this.y,this.width,this.height]=E(this,Yt,l2).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Xu=function(){const{x:e,y:a,width:s,height:o,rotation:u,parentRotation:h,parentDimensions:[d,m]}=this;switch((u*4+h)/90){case 1:return[1-a-o,e,o,s];case 2:return[1-e-s,1-a-o,s,o];case 3:return[a,1-e-s,o,s];case 4:return[e,a-s*(d/m),o*(m/d),s*(d/m)];case 5:return[1-a,e,s*(d/m),o*(m/d)];case 6:return[1-e-o*(m/d),1-a,o*(m/d),s*(d/m)];case 7:return[a-s*(d/m),1-e-o*(m/d),s*(d/m),o*(m/d)];case 8:return[e-s,a-o,s,o];case 9:return[1-a,e-s,o,s];case 10:return[1-e,1-a,s,o];case 11:return[a-o,1-e,o,s];case 12:return[e-o*(m/d),a,o*(m/d),s*(d/m)];case 13:return[1-a-s*(d/m),e-o*(m/d),s*(d/m),o*(m/d)];case 14:return[1-e,1-a-s*(d/m),o*(m/d),s*(d/m)];case 15:return[a,1-e,s*(d/m),o*(m/d)];default:return[e,a,s,o]}},it(mt,"_currentDrawId",-1),it(mt,"_currentParent",null),w(mt,mi,null),w(mt,Oc,null),w(mt,Bc,null),w(mt,Xl,NaN),w(mt,Kl,null),w(mt,Wl,null),w(mt,zc,NaN),it(mt,"_INNER_MARGIN",3);let m0=mt;var vs,gi,pi,jc,yd,Yi,Ri,Sa,Fc,Pc,Hc,vd,Qb;class hk{constructor(t,e,a,s,o,u){w(this,vd);w(this,vs,new Float64Array(6));w(this,gi);w(this,pi);w(this,jc);w(this,yd);w(this,Yi);w(this,Ri,"");w(this,Sa,0);w(this,Fc,new $g);w(this,Pc);w(this,Hc);A(this,Pc,a),A(this,Hc,s),A(this,jc,o),A(this,yd,u),[t,e]=E(this,vd,Qb).call(this,t,e);const h=A(this,gi,[NaN,NaN,NaN,NaN,t,e]);A(this,Yi,[t,e]),A(this,pi,[{line:h,points:l(this,Yi)}]),l(this,vs).set(h,0)}updateProperty(t,e){t==="stroke-width"&&A(this,yd,e)}isEmpty(){return!l(this,pi)||l(this,pi).length===0}isCancellable(){return l(this,Yi).length<=10}add(t,e){[t,e]=E(this,vd,Qb).call(this,t,e);const[a,s,o,u]=l(this,vs).subarray(2,6),h=t-o,d=e-u;return Math.hypot(l(this,Pc)*h,l(this,Hc)*d)<=2?null:(l(this,Yi).push(t,e),isNaN(a)?(l(this,vs).set([o,u,t,e],2),l(this,gi).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,vs)[0])&&l(this,gi).splice(6,6),l(this,vs).set([a,s,o,u,t,e],0),l(this,gi).push(...ut.createBezierPoints(a,s,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const a=this.add(t,e);return a||(l(this,Yi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,a,s,o){A(this,Pc,a),A(this,Hc,s),A(this,jc,o),[t,e]=E(this,vd,Qb).call(this,t,e);const u=A(this,gi,[NaN,NaN,NaN,NaN,t,e]);A(this,Yi,[t,e]);const h=l(this,pi).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),l(this,pi).push({line:u,points:l(this,Yi)}),l(this,vs).set(u,0),A(this,Sa,0),this.toSVGPath(),null}getLastElement(){return l(this,pi).at(-1)}setLastElement(t){return l(this,pi)?(l(this,pi).push(t),A(this,gi,t.line),A(this,Yi,t.points),A(this,Sa,0),{path:{d:this.toSVGPath()}}):l(this,Fc).setLastElement(t)}removeLastElement(){if(!l(this,pi))return l(this,Fc).removeLastElement();l(this,pi).pop(),A(this,Ri,"");for(let t=0,e=l(this,pi).length;t<e;t++){const{line:a,points:s}=l(this,pi)[t];A(this,gi,a),A(this,Yi,s),A(this,Sa,0),this.toSVGPath()}return{path:{d:l(this,Ri)}}}toSVGPath(){const t=ut.svgRound(l(this,gi)[4]),e=ut.svgRound(l(this,gi)[5]);if(l(this,Yi).length===2)return A(this,Ri,`${l(this,Ri)} M ${t} ${e} Z`),l(this,Ri);if(l(this,Yi).length<=6){const s=l(this,Ri).lastIndexOf("M");A(this,Ri,`${l(this,Ri).slice(0,s)} M ${t} ${e}`),A(this,Sa,6)}if(l(this,Yi).length===4){const s=ut.svgRound(l(this,gi)[10]),o=ut.svgRound(l(this,gi)[11]);return A(this,Ri,`${l(this,Ri)} L ${s} ${o}`),A(this,Sa,12),l(this,Ri)}const a=[];l(this,Sa)===0&&(a.push(`M ${t} ${e}`),A(this,Sa,6));for(let s=l(this,Sa),o=l(this,gi).length;s<o;s+=6){const[u,h,d,m,b,y]=l(this,gi).slice(s,s+6).map(ut.svgRound);a.push(`C${u} ${h} ${d} ${m} ${b} ${y}`)}return A(this,Ri,l(this,Ri)+a.join(" ")),A(this,Sa,l(this,gi).length),l(this,Ri)}getOutlines(t,e,a,s){const o=l(this,pi).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,Fc).build(l(this,pi),t,e,a,l(this,jc),l(this,yd),s),A(this,vs,null),A(this,gi,null),A(this,pi,null),A(this,Ri,null),l(this,Fc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}vs=new WeakMap,gi=new WeakMap,pi=new WeakMap,jc=new WeakMap,yd=new WeakMap,Yi=new WeakMap,Ri=new WeakMap,Sa=new WeakMap,Fc=new WeakMap,Pc=new WeakMap,Hc=new WeakMap,vd=new WeakSet,Qb=function(t,e){return ut._normalizePoint(t,e,l(this,Pc),l(this,Hc),l(this,jc))};var Xi,Ug,Ig,Yn,As,Ss,Ad,Sd,Uc,ki,Ks,o2,c2,u2;class $g extends ut{constructor(){super(...arguments);w(this,ki);w(this,Xi);w(this,Ug,0);w(this,Ig);w(this,Yn);w(this,As);w(this,Ss);w(this,Ad);w(this,Sd);w(this,Uc)}build(e,a,s,o,u,h,d){A(this,As,a),A(this,Ss,s),A(this,Ad,o),A(this,Sd,u),A(this,Uc,h),A(this,Ig,d??0),A(this,Yn,e),E(this,ki,c2).call(this)}get thickness(){return l(this,Uc)}setLastElement(e){return l(this,Yn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Yn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:a}of l(this,Yn)){if(e.push(`M${ut.svgRound(a[4])} ${ut.svgRound(a[5])}`),a.length===6){e.push("Z");continue}if(a.length===12&&isNaN(a[6])){e.push(`L${ut.svgRound(a[10])} ${ut.svgRound(a[11])}`);continue}for(let s=6,o=a.length;s<o;s+=6){const[u,h,d,m,b,y]=a.subarray(s,s+6).map(ut.svgRound);e.push(`C${u} ${h} ${d} ${m} ${b} ${y}`)}}return e.join("")}serialize([e,a,s,o],u){const h=[],d=[],[m,b,y,v]=E(this,ki,o2).call(this);let x,_,T,R,M,k,N,O,z;switch(l(this,Sd)){case 0:z=ut._rescale,x=e,_=a+o,T=s,R=-o,M=e+m*s,k=a+(1-b-v)*o,N=e+(m+y)*s,O=a+(1-b)*o;break;case 90:z=ut._rescaleAndSwap,x=e,_=a,T=s,R=o,M=e+b*s,k=a+m*o,N=e+(b+v)*s,O=a+(m+y)*o;break;case 180:z=ut._rescale,x=e+s,_=a,T=-s,R=o,M=e+(1-m-y)*s,k=a+b*o,N=e+(1-m)*s,O=a+(b+v)*o;break;case 270:z=ut._rescaleAndSwap,x=e+s,_=a+o,T=-s,R=-o,M=e+(1-b-v)*s,k=a+(1-m-y)*o,N=e+(1-b)*s,O=a+(1-m)*o;break}for(const{line:j,points:H}of l(this,Yn))h.push(z(j,x,_,T,R,u?new Array(j.length):null)),d.push(z(H,x,_,T,R,u?new Array(H.length):null));return{lines:h,points:d,rect:[M,k,N,O]}}static deserialize(e,a,s,o,u,{paths:{lines:h,points:d},rotation:m,thickness:b}){const y=[];let v,x,_,T,R;switch(m){case 0:R=ut._rescale,v=-e/s,x=a/o+1,_=1/s,T=-1/o;break;case 90:R=ut._rescaleAndSwap,v=-a/o,x=-e/s,_=1/o,T=1/s;break;case 180:R=ut._rescale,v=e/s+1,x=-a/o,_=-1/s,T=1/o;break;case 270:R=ut._rescaleAndSwap,v=a/o+1,x=e/s+1,_=-1/o,T=-1/s;break}if(!h){h=[];for(const k of d){const N=k.length;if(N===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(N===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const O=new Float32Array(3*(N-2));h.push(O);let[z,j,H,U]=k.subarray(0,4);O.set([NaN,NaN,NaN,NaN,z,j],0);for(let X=4;X<N;X+=2){const J=k[X],tt=k[X+1];O.set(ut.createBezierPoints(z,j,H,U,J,tt),(X-2)*3),[z,j,H,U]=[H,U,J,tt]}}}for(let k=0,N=h.length;k<N;k++)y.push({line:R(h[k].map(O=>O??NaN),v,x,_,T),points:R(d[k].map(O=>O??NaN),v,x,_,T)});const M=new this.prototype.constructor;return M.build(y,s,o,1,m,b,u),M}get box(){return l(this,Xi)}updateProperty(e,a){return e==="stroke-width"?E(this,ki,u2).call(this,a):null}updateParentDimensions([e,a],s){const[o,u]=E(this,ki,Ks).call(this);A(this,As,e),A(this,Ss,a),A(this,Ad,s);const[h,d]=E(this,ki,Ks).call(this),m=h-o,b=d-u,y=l(this,Xi);return y[0]-=m,y[1]-=b,y[2]+=2*m,y[3]+=2*b,y}updateRotation(e){return A(this,Ug,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Xi).map(ut.svgRound).join(" ")}get defaultProperties(){const[e,a]=l(this,Xi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(a)}`}}}get rotationTransform(){const[,,e,a]=l(this,Xi);let s=0,o=0,u=0,h=0,d=0,m=0;switch(l(this,Ug)){case 90:o=a/e,u=-e/a,d=e;break;case 180:s=-1,h=-1,d=e,m=a;break;case 270:o=-a/e,u=e/a,m=a;break;default:return""}return`matrix(${s} ${o} ${u} ${h} ${ut.svgRound(d)} ${ut.svgRound(m)})`}getPathResizingSVGProperties([e,a,s,o]){const[u,h]=E(this,ki,Ks).call(this),[d,m,b,y]=l(this,Xi);if(Math.abs(b-u)<=ut.PRECISION||Math.abs(y-h)<=ut.PRECISION){const R=e+s/2-(d+b/2),M=a+o/2-(m+y/2);return{path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(a)}`,transform:`${this.rotationTransform} translate(${R} ${M})`}}}const v=(s-2*u)/(b-2*u),x=(o-2*h)/(y-2*h),_=b/s,T=y/o;return{path:{"transform-origin":`${ut.svgRound(d)} ${ut.svgRound(m)}`,transform:`${this.rotationTransform} scale(${_} ${T}) translate(${ut.svgRound(u)} ${ut.svgRound(h)}) scale(${v} ${x}) translate(${ut.svgRound(-u)} ${ut.svgRound(-h)})`}}}getPathResizedSVGProperties([e,a,s,o]){const[u,h]=E(this,ki,Ks).call(this),d=l(this,Xi),[m,b,y,v]=d;if(d[0]=e,d[1]=a,d[2]=s,d[3]=o,Math.abs(y-u)<=ut.PRECISION||Math.abs(v-h)<=ut.PRECISION){const M=e+s/2-(m+y/2),k=a+o/2-(b+v/2);for(const{line:N,points:O}of l(this,Yn))ut._translate(N,M,k,N),ut._translate(O,M,k,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(a)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*u)/(y-2*u),_=(o-2*h)/(v-2*h),T=-x*(m+u)+e+u,R=-_*(b+h)+a+h;if(x!==1||_!==1||T!==0||R!==0)for(const{line:M,points:k}of l(this,Yn))ut._rescale(M,T,R,x,_,M),ut._rescale(k,T,R,x,_,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(a)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,a],s){const[o,u]=s,h=l(this,Xi),d=e-h[0],m=a-h[1];if(l(this,As)===o&&l(this,Ss)===u)for(const{line:b,points:y}of l(this,Yn))ut._translate(b,d,m,b),ut._translate(y,d,m,y);else{const b=l(this,As)/o,y=l(this,Ss)/u;A(this,As,o),A(this,Ss,u);for(const{line:v,points:x}of l(this,Yn))ut._rescale(v,d,m,b,y,v),ut._rescale(x,d,m,b,y,x);h[2]*=b,h[3]*=y}return h[0]=e,h[1]=a,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(a)}`}}}get defaultSVGProperties(){const e=l(this,Xi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e[0])} ${ut.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Xi=new WeakMap,Ug=new WeakMap,Ig=new WeakMap,Yn=new WeakMap,As=new WeakMap,Ss=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,Uc=new WeakMap,ki=new WeakSet,Ks=function(e=l(this,Uc)){const a=l(this,Ig)+e/2*l(this,Ad);return l(this,Sd)%180===0?[a/l(this,As),a/l(this,Ss)]:[a/l(this,Ss),a/l(this,As)]},o2=function(){const[e,a,s,o]=l(this,Xi),[u,h]=E(this,ki,Ks).call(this,0);return[e+u,a+h,s-2*u,o-2*h]},c2=function(){const e=A(this,Xi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of l(this,Yn)){if(o.length<=12){for(let d=4,m=o.length;d<m;d+=6)ht.pointBoundingBox(o[d],o[d+1],e);continue}let u=o[4],h=o[5];for(let d=6,m=o.length;d<m;d+=6){const[b,y,v,x,_,T]=o.subarray(d,d+6);ht.bezierBoundingBox(u,h,b,y,v,x,_,T,e),u=_,h=T}}const[a,s]=E(this,ki,Ks).call(this);e[0]=Ui(e[0]-a,0,1),e[1]=Ui(e[1]-s,0,1),e[2]=Ui(e[2]+a,0,1),e[3]=Ui(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},u2=function(e){const[a,s]=E(this,ki,Ks).call(this);A(this,Uc,e);const[o,u]=E(this,ki,Ks).call(this),[h,d]=[o-a,u-s],m=l(this,Xi);return m[0]-=h,m[1]-=d,m[2]+=2*h,m[3]+=2*d,m};class U0 extends r2{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Se._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new U0(this._viewParameters);return t.updateAll(this),t}}var O0,h2;const Zu=class Zu extends m0{constructor(e){super({...e,name:"inkEditor"});w(this,O0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,a){Se.initialize(e,a),this._defaultDrawingOptions=new U0(a.viewParameters)}static getDefaultDrawingOptions(e){const a=this._defaultDrawingOptions.clone();return a.updateProperties(e),a}static get supportMultipleDrawings(){return!0}static get typesMap(){return kt(this,"typesMap",new Map([[Ut.INK_THICKNESS,"stroke-width"],[Ut.INK_COLOR,"stroke"],[Ut.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,a,s,o,u){return new hk(e,a,s,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,a,s,o,u,h){return $g.deserialize(e,a,s,o,u,h)}static async deserialize(e,a,s){let o=null;if(e instanceof rx){const{data:{inkLists:h,rect:d,rotation:m,id:b,color:y,opacity:v,borderStyle:{rawWidth:x},popupRef:_,richText:T,contentsObj:R,creationDate:M,modificationDate:k},parent:{page:{pageNumber:N}}}=e;o=e={annotationType:Tt.INK,color:Array.from(y),thickness:x,opacity:v,paths:{points:h},boxes:null,pageIndex:N-1,rect:d.slice(0),rotation:m,annotationElementId:b,id:b,deleted:!1,popupRef:_,richText:T,comment:(R==null?void 0:R.str)||null,creationDate:M,modificationDate:k}}const u=await super.deserialize(e,a,s);return u._initialData=o,e.comment&&u.setCommentData(e),u}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new h0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ut.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:a,parent:s}=this;a.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,a.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:a,opacity:s}){this._drawingOptions=Zu.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":a,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:a,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":u,"stroke-width":h}}=this,d=Object.assign(super.serialize(e),{color:Se._colorManager.convert(o),opacity:u,thickness:h,paths:{lines:a,points:s}});return this.addComment(d),e?(d.isCopy=!0,d):this.annotationElementId&&!E(this,O0,h2).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:a,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:a,popup:this.comment}),null}};O0=new WeakSet,h2=function(e){const{color:a,thickness:s,opacity:o,pageIndex:u}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,d)=>h!==a[d])||e.thickness!==s||e.opacity!==o||e.pageIndex!==u},it(Zu,"_type","ink"),it(Zu,"_editorType",Tt.INK),it(Zu,"_defaultDrawingOptions",null);let RS=Zu;class NS extends $g{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Tb=8,kf=3;var Ic,Jt,kS,Pa,d2,f2,LS,Zb,m2,g2,p2,OS,BS,b2;class Ts{static extractContoursFromText(t,{fontFamily:e,fontStyle:a,fontWeight:s},o,u,h,d){let m=new OffscreenCanvas(1,1),b=m.getContext("2d",{alpha:!1});const y=200,v=b.font=`${a} ${s} ${y}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:_,actualBoundingBoxAscent:T,actualBoundingBoxDescent:R,fontBoundingBoxAscent:M,fontBoundingBoxDescent:k,width:N}=b.measureText(t),O=1.5,z=Math.ceil(Math.max(Math.abs(x)+Math.abs(_)||0,N)*O),j=Math.ceil(Math.max(Math.abs(T)+Math.abs(R)||y,Math.abs(M)+Math.abs(k)||y)*O);m=new OffscreenCanvas(z,j),b=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),b.font=v,b.filter="grayscale(1)",b.fillStyle="white",b.fillRect(0,0,z,j),b.fillStyle="black",b.fillText(t,z*(O-1)/2,j*(3-O)/2);const H=E(this,Jt,OS).call(this,b.getImageData(0,0,z,j).data),U=E(this,Jt,p2).call(this,H),X=E(this,Jt,BS).call(this,U),J=E(this,Jt,LS).call(this,H,z,j,X);return this.processDrawnLines({lines:{curves:J,width:z,height:j},pageWidth:o,pageHeight:u,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,a,s,o){const[u,h,d]=E(this,Jt,b2).call(this,t),[m,b]=E(this,Jt,g2).call(this,u,h,d,Math.hypot(h,d)*l(this,Ic).sigmaSFactor,l(this,Ic).sigmaR,l(this,Ic).kernelSize),y=E(this,Jt,BS).call(this,b),v=E(this,Jt,LS).call(this,m,h,d,y);return this.processDrawnLines({lines:{curves:v,width:h,height:d},pageWidth:e,pageHeight:a,rotation:s,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:a,rotation:s,innerMargin:o,mustSmooth:u,areContours:h}){s%180!==0&&([e,a]=[a,e]);const{curves:d,width:m,height:b}=t,y=t.thickness??0,v=[],x=Math.min(e/m,a/b),_=x/e,T=x/a,R=[];for(const{points:k}of d){const N=u?E(this,Jt,m2).call(this,k):k;if(!N)continue;R.push(N);const O=N.length,z=new Float32Array(O),j=new Float32Array(3*(O===2?2:O-2));if(v.push({line:j,points:z}),O===2){z[0]=N[0]*_,z[1]=N[1]*T,j.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[H,U,X,J]=N;H*=_,U*=T,X*=_,J*=T,z.set([H,U,X,J],0),j.set([NaN,NaN,NaN,NaN,H,U],0);for(let tt=4;tt<O;tt+=2){const nt=z[tt]=N[tt]*_,bt=z[tt+1]=N[tt+1]*T;j.set(ut.createBezierPoints(H,U,X,J,nt,bt),(tt-2)*3),[H,U,X,J]=[X,J,nt,bt]}}if(v.length===0)return null;const M=h?new NS:new $g;return M.build(v,e,a,1,s,h?0:y,o),{outline:M,newCurves:R,areContours:h,thickness:y,width:m,height:b}}static async compressSignature({outlines:t,areContours:e,thickness:a,width:s,height:o}){let u=1/0,h=-1/0,d=0;for(const N of t){d+=N.length;for(let O=2,z=N.length;O<z;O++){const j=N[O]-N[O-2];u=Math.min(u,j),h=Math.max(h,j)}}let m;u>=-128&&h<=127?m=Int8Array:u>=-32768&&h<=32767?m=Int16Array:m=Int32Array;const b=t.length,y=Tb+kf*b,v=new Uint32Array(y);let x=0;v[x++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*b)*m.BYTES_PER_ELEMENT,v[x++]=0,v[x++]=s,v[x++]=o,v[x++]=e?0:1,v[x++]=Math.max(0,Math.floor(a??0)),v[x++]=b,v[x++]=m.BYTES_PER_ELEMENT;for(const N of t)v[x++]=N.length-2,v[x++]=N[0],v[x++]=N[1];const _=new CompressionStream("deflate-raw"),T=_.writable.getWriter();await T.ready,T.write(v);const R=m.prototype.constructor;for(const N of t){const O=new R(N.length-2);for(let z=2,j=N.length;z<j;z++)O[z-2]=N[z]-N[z-2];T.write(O)}T.close();const M=await new Response(_.readable).arrayBuffer(),k=new Uint8Array(M);return m_(k)}static async decompressSignature(t){try{const e=zR(t),{readable:a,writable:s}=new DecompressionStream("deflate-raw"),o=s.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let u=null,h=0;for await(const N of a)u||(u=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),u.set(N,h),h+=N.length;const d=new Uint32Array(u.buffer,0,u.length>>2),m=d[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const b=d[2],y=d[3],v=d[4]===0,x=d[5],_=d[6],T=d[7],R=[],M=(Tb+kf*_)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(T){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(u.buffer,M);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(u.buffer,M);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(u.buffer,M);break}h=0;for(let N=0;N<_;N++){const O=d[kf*N+Tb],z=new Float32Array(O+2);R.push(z);for(let j=0;j<kf-1;j++)z[j]=d[kf*N+Tb+j+1];for(let j=0;j<O;j++)z[j+2]=z[j]+k[h++]}return{areContours:v,thickness:x,outlines:R,width:b,height:y}}catch(e){return _t(`decompressSignature: ${e}`),null}}}Ic=new WeakMap,Jt=new WeakSet,kS=function(t,e,a,s){return a-=t,s-=e,a===0?s>0?0:4:a===1?s+6:2-s},Pa=new WeakMap,d2=function(t,e,a,s,o,u,h){const d=E(this,Jt,kS).call(this,a,s,o,u);for(let m=0;m<8;m++){const b=(-m+d-h+16)%8,y=l(this,Pa)[2*b],v=l(this,Pa)[2*b+1];if(t[(a+y)*e+(s+v)]!==0)return b}return-1},f2=function(t,e,a,s,o,u,h){const d=E(this,Jt,kS).call(this,a,s,o,u);for(let m=0;m<8;m++){const b=(m+d+h+16)%8,y=l(this,Pa)[2*b],v=l(this,Pa)[2*b+1];if(t[(a+y)*e+(s+v)]!==0)return b}return-1},LS=function(t,e,a,s){const o=t.length,u=new Int32Array(o);for(let b=0;b<o;b++)u[b]=t[b]<=s?1:0;for(let b=1;b<a-1;b++)u[b*e]=u[b*e+e-1]=0;for(let b=0;b<e;b++)u[b]=u[e*a-1-b]=0;let h=1,d;const m=[];for(let b=1;b<a-1;b++){d=1;for(let y=1;y<e-1;y++){const v=b*e+y,x=u[v];if(x===0)continue;let _=b,T=y;if(x===1&&u[v-1]===0)h+=1,T-=1;else if(x>=1&&u[v+1]===0)h+=1,T+=1,x>1&&(d=x);else{x!==1&&(d=Math.abs(x));continue}const R=[y,b],M=T===y+1,k={isHole:M,points:R,id:h,parent:0};m.push(k);let N;for(const tt of m)if(tt.id===d){N=tt;break}N?N.isHole?k.parent=M?N.parent:d:k.parent=M?d:N.parent:k.parent=M?d:0;const O=E(this,Jt,d2).call(this,u,e,b,y,_,T,0);if(O===-1){u[v]=-h,u[v]!==1&&(d=Math.abs(u[v]));continue}let z=l(this,Pa)[2*O],j=l(this,Pa)[2*O+1];const H=b+z,U=y+j;_=H,T=U;let X=b,J=y;for(;;){const tt=E(this,Jt,f2).call(this,u,e,X,J,_,T,1);z=l(this,Pa)[2*tt],j=l(this,Pa)[2*tt+1];const nt=X+z,bt=J+j;R.push(bt,nt);const st=X*e+J;if(u[st+1]===0?u[st]=-h:u[st]===1&&(u[st]=h),nt===b&&bt===y&&X===H&&J===U){u[v]!==1&&(d=Math.abs(u[v]));break}else _=X,T=J,X=nt,J=bt}}}return m},Zb=function(t,e,a,s){if(a-e<=4){for(let H=e;H<a-2;H+=2)s.push(t[H],t[H+1]);return}const o=t[e],u=t[e+1],h=t[a-4]-o,d=t[a-3]-u,m=Math.hypot(h,d),b=h/m,y=d/m,v=b*u-y*o,x=d/h,_=1/m,T=Math.atan(x),R=Math.cos(T),M=Math.sin(T),k=_*(Math.abs(R)+Math.abs(M)),N=_*(1-k+k**2),O=Math.max(Math.atan(Math.abs(M+R)*N),Math.atan(Math.abs(M-R)*N));let z=0,j=e;for(let H=e+2;H<a-2;H+=2){const U=Math.abs(v-b*t[H+1]+y*t[H]);U>z&&(j=H,z=U)}z>(m*O)**2?(E(this,Jt,Zb).call(this,t,e,j+2,s),E(this,Jt,Zb).call(this,t,j,a,s)):s.push(o,u)},m2=function(t){const e=[],a=t.length;return E(this,Jt,Zb).call(this,t,0,a,e),e.push(t[a-2],t[a-1]),e.length<=4?null:e},g2=function(t,e,a,s,o,u){const h=new Float32Array(u**2),d=-2*s**2,m=u>>1;for(let T=0;T<u;T++){const R=(T-m)**2;for(let M=0;M<u;M++)h[T*u+M]=Math.exp((R+(M-m)**2)/d)}const b=new Float32Array(256),y=-2*o**2;for(let T=0;T<256;T++)b[T]=Math.exp(T**2/y);const v=t.length,x=new Uint8Array(v),_=new Uint32Array(256);for(let T=0;T<a;T++)for(let R=0;R<e;R++){const M=T*e+R,k=t[M];let N=0,O=0;for(let j=0;j<u;j++){const H=T+j-m;if(!(H<0||H>=a))for(let U=0;U<u;U++){const X=R+U-m;if(X<0||X>=e)continue;const J=t[H*e+X],tt=h[j*u+U]*b[Math.abs(J-k)];N+=J*tt,O+=tt}}const z=x[M]=Math.round(N/O);_[z]++}return[x,_]},p2=function(t){const e=new Uint32Array(256);for(const a of t)e[a]++;return e},OS=function(t){const e=t.length,a=new Uint8ClampedArray(e>>2);let s=-1/0,o=1/0;for(let h=0,d=a.length;h<d;h++){const m=a[h]=t[h<<2];s=Math.max(s,m),o=Math.min(o,m)}const u=255/(s-o);for(let h=0,d=a.length;h<d;h++)a[h]=(a[h]-o)*u;return a},BS=function(t){let e,a=-1/0,s=-1/0;const o=t.findIndex(d=>d!==0);let u=o,h=o;for(e=o;e<256;e++){const d=t[e];d>a&&(e-u>s&&(s=e-u,h=e-1),a=d,u=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},b2=function(t){const e=t,{width:a,height:s}=t,{maxDim:o}=l(this,Ic);let u=a,h=s;if(a>o||s>o){let v=a,x=s,_=Math.log2(Math.max(a,s)/o);const T=Math.floor(_);_=_===T?T-1:T;for(let M=0;M<_;M++){u=Math.ceil(v/2),h=Math.ceil(x/2);const k=new OffscreenCanvas(u,h);k.getContext("2d").drawImage(t,0,0,v,x,0,0,u,h),v=u,x=h,t!==e&&t.close(),t=k.transferToImageBitmap()}const R=Math.min(o/u,o/h);u=Math.round(u*R),h=Math.round(h*R)}const m=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});m.fillStyle="white",m.fillRect(0,0,u,h),m.filter="grayscale(1)",m.drawImage(t,0,0,t.width,t.height,0,0,u,h);const b=m.getImageData(0,0,u,h).data;return[E(this,Jt,OS).call(this,b),u,h]},w(Ts,Jt),w(Ts,Ic,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Ts,Pa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class ox extends r2{constructor(){super(),super.updateProperties({fill:Se._defaultLineColor,"stroke-width":0})}clone(){const t=new ox;return t.updateAll(this),t}}class cx extends U0{constructor(t){super(t),super.updateProperties({stroke:Se._defaultLineColor,"stroke-width":1})}clone(){const t=new cx(this._viewParameters);return t.updateAll(this),t}}var $l,xs,Ql,Gc;const Rn=class Rn extends m0{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,$l,!1);w(this,xs,null);w(this,Ql,null);w(this,Gc,null);this._willKeepAspectRatio=!0,A(this,Ql,e.signatureData||null),A(this,xs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,a){Se.initialize(e,a),this._defaultDrawingOptions=new ox,this._defaultDrawnSignatureOptions=new cx(a.viewParameters)}static getDefaultDrawingOptions(e){const a=this._defaultDrawingOptions.clone();return a.updateProperties(e),a}static get supportMultipleDrawings(){return!1}static get typesMap(){return kt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,xs)}}static computeTelemetryFinalData(e){const a=e.get("hasDescription");return{hasAltText:a.get(!0)??0,hasNoAltText:a.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,a;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,a=this.y),super.render(),this._drawId===null)if(l(this,Ql)){const{lines:o,mustSmooth:u,areContours:h,description:d,uuid:m,heightInPage:b}=l(this,Ql),{rawDims:{pageWidth:y,pageHeight:v},rotation:x}=this.parent.viewport,_=Ts.processDrawnLines({lines:o,pageWidth:y,pageHeight:v,rotation:x,innerMargin:Rn._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(_,b,d,m)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,xs)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,a)),this.div}setUuid(e){A(this,Gc,e),this.addEditToolbar()}getUuid(){return l(this,Gc)}get description(){return l(this,xs)}set description(e){A(this,xs,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(a=>{a==null||a.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:a,thickness:s,width:o,height:u}=l(this,Ql),h=Math.max(o,u),d=Ts.processDrawnLines({lines:{curves:e.map(m=>({points:m})),thickness:s,width:o,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:a});return{areContours:a,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,a,s,o){const{x:u,y:h}=this,{outline:d}=A(this,Ql,e);A(this,$l,d instanceof NS),this.description=s;let m;l(this,$l)?m=Rn.getDefaultDrawingOptions():(m=Rn._defaultDrawnSignatureOptions.clone(),m.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:m});const[,b]=this.pageDimensions;let y=a/b;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:a,pageHeight:s},rotation:o}=this.parent.viewport;return Ts.process(e,a,s,o,Rn._INNER_MARGIN)}getFromText(e,a){const{rawDims:{pageWidth:s,pageHeight:o},rotation:u}=this.parent.viewport;return Ts.extractContoursFromText(e,a,s,o,u,Rn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:a,pageHeight:s},rotation:o}=this.parent.viewport;return Ts.processDrawnLines({lines:e,pageWidth:a,pageHeight:s,rotation:o,innerMargin:Rn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:a}){e?this._drawingOptions=Rn.getDefaultDrawingOptions():(this._drawingOptions=Rn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":a}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:a,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,u=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,$l),color:[0,0,0],thickness:l(this,$l)?0:o});return this.addComment(u),e?(u.paths={lines:a,points:s},u.uuid=l(this,Gc),u.isCopy=!0):u.lines=a,l(this,xs)&&(u.accessibilityData={type:"Figure",alt:l(this,xs)}),u}static deserializeDraw(e,a,s,o,u,h){return h.areContours?NS.deserialize(e,a,s,o,u,h):$g.deserialize(e,a,s,o,u,h)}static async deserialize(e,a,s){var u;const o=await super.deserialize(e,a,s);return A(o,$l,e.areContours),o.description=((u=e.accessibilityData)==null?void 0:u.alt)||"",A(o,Gc,e.uuid),o}};$l=new WeakMap,xs=new WeakMap,Ql=new WeakMap,Gc=new WeakMap,it(Rn,"_type","signature"),it(Rn,"_editorType",Tt.SIGNATURE),it(Rn,"_defaultDrawingOptions",null);let zS=Rn;var De,bi,Zl,_r,Jl,xd,Cr,qc,ws,Xn,wd,Xt,Jf,tm,Jb,t0,e0,FS,i0,y2;class jS extends Se{constructor(e){super({...e,name:"stampEditor"});w(this,Xt);w(this,De,null);w(this,bi,null);w(this,Zl,null);w(this,_r,null);w(this,Jl,null);w(this,xd,"");w(this,Cr,null);w(this,qc,!1);w(this,ws,null);w(this,Xn,!1);w(this,wd,!1);A(this,_r,e.bitmapUrl),A(this,Jl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,a){Se.initialize(e,a)}static isHandlingMimeForPasting(e){return r0.includes(e)}static paste(e,a){a.pasteEditor({mode:Tt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const a=e.get("hasAltText");return{hasAltText:a.get(!0)??0,hasNoAltText:a.get(!1)??0}}async mlGuessAltText(e=null,a=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:h}=e||this.copyCanvas(null,null,!0).imageData,d=await s.guess({name:"altText",request:{data:o,width:u,height:h,channels:o.length/(u*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const m=d.output;return await this.setGuessedAltText(m),a&&!this.hasAltTextData()&&(this.altTextData={alt:m,decorative:!1}),m}remove(){var e;l(this,bi)&&(A(this,De,null),this._uiManager.imageManager.deleteId(l(this,bi)),(e=l(this,Cr))==null||e.remove(),A(this,Cr,null),l(this,ws)&&(clearTimeout(l(this,ws)),A(this,ws,null))),super.remove()}rebuild(){if(!this.parent){l(this,bi)&&E(this,Xt,Jb).call(this);return}super.rebuild(),this.div!==null&&(l(this,bi)&&l(this,Cr)===null&&E(this,Xt,Jb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Zl)||l(this,De)||l(this,_r)||l(this,Jl)||l(this,bi)||l(this,qc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,a;return this._isCopy&&(e=this.x,a=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,qc)||(l(this,De)?E(this,Xt,t0).call(this):E(this,Xt,Jb).call(this)),this._isCopy&&this._moveAfterPaste(e,a),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,a){const{id:s,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,a);a.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(A(this,bi,s),o&&A(this,De,o),A(this,qc,!1),E(this,Xt,t0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,ws)!==null&&clearTimeout(l(this,ws)),A(this,ws,setTimeout(()=>{A(this,ws,null),E(this,Xt,FS).call(this)},200))}copyCanvas(e,a,s=!1){e||(e=224);const{width:o,height:u}=l(this,De),h=new Ga;let d=l(this,De),m=o,b=u,y=null;if(a){if(o>a||u>a){const H=Math.min(a/o,a/u);m=Math.floor(o*H),b=Math.floor(u*H)}y=document.createElement("canvas");const x=y.width=Math.ceil(m*h.sx),_=y.height=Math.ceil(b*h.sy);l(this,Xn)||(d=E(this,Xt,e0).call(this,x,_));const T=y.getContext("2d");T.filter=this._uiManager.hcmFilter;let R="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":PR.isDarkMode&&(R="#8f8f9d",M="#42414d");const k=15,N=k*h.sx,O=k*h.sy,z=new OffscreenCanvas(N*2,O*2),j=z.getContext("2d");j.fillStyle=R,j.fillRect(0,0,N*2,O*2),j.fillStyle=M,j.fillRect(0,0,N,O),j.fillRect(N,O,N,O),T.fillStyle=T.createPattern(z,"repeat"),T.fillRect(0,0,x,_),T.drawImage(d,0,0,d.width,d.height,0,0,x,_)}let v=null;if(s){let x,_;if(h.symmetric&&d.width<e&&d.height<e)x=d.width,_=d.height;else if(d=l(this,De),o>e||u>e){const M=Math.min(e/o,e/u);x=Math.floor(o*M),_=Math.floor(u*M),l(this,Xn)||(d=E(this,Xt,e0).call(this,x,_))}const R=new OffscreenCanvas(x,_).getContext("2d",{willReadFrequently:!0});R.drawImage(d,0,0,d.width,d.height,0,0,x,_),v={width:x,height:_,data:R.getImageData(0,0,x,_).data}}return{canvas:y,width:m,height:b,imageData:v}}static async deserialize(e,a,s){var R;let o=null,u=!1;if(e instanceof OC){const{data:{rect:M,rotation:k,id:N,structParent:O,popupRef:z,richText:j,contentsObj:H,creationDate:U,modificationDate:X},container:J,parent:{page:{pageNumber:tt}},canvas:nt}=e;let bt,st;nt?(delete e.canvas,{id:bt,bitmap:st}=s.imageManager.getFromCanvas(J.id,nt),nt.remove()):(u=!0,e._hasNoCanvas=!0);const gt=((R=await a._structTree.getAriaAttributes(`${$S}${N}`))==null?void 0:R.get("aria-label"))||"";o=e={annotationType:Tt.STAMP,bitmapId:bt,bitmap:st,pageIndex:tt-1,rect:M.slice(0),rotation:k,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:gt},isSvg:!1,structParent:O,popupRef:z,richText:j,comment:(H==null?void 0:H.str)||null,creationDate:U,modificationDate:X}}const h=await super.deserialize(e,a,s),{rect:d,bitmap:m,bitmapUrl:b,bitmapId:y,isSvg:v,accessibilityData:x}=e;u?(s.addMissingCanvas(e.id,h),A(h,qc,!0)):y&&s.imageManager.isValidId(y)?(A(h,bi,y),m&&A(h,De,m)):A(h,_r,b),A(h,Xn,v);const[_,T]=h.pageDimensions;return h.width=(d[2]-d[0])/_,h.height=(d[3]-d[1])/T,x&&(h.altTextData=x),h._initialData=o,e.comment&&h.setCommentData(e),A(h,wd,!!o),h}serialize(e=!1,a=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:l(this,bi),isSvg:l(this,Xn)});if(this.addComment(s),e)return s.bitmapUrl=E(this,Xt,i0).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(s.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const d=E(this,Xt,y2).call(this,s);return d.isSame?null:(d.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(a===null)return s;a.stamps||(a.stamps=new Map);const h=l(this,Xn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!a.stamps.has(l(this,bi)))a.stamps.set(l(this,bi),{area:h,serialized:s}),s.bitmap=E(this,Xt,i0).call(this,!1);else if(l(this,Xn)){const d=a.stamps.get(l(this,bi));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=E(this,Xt,i0).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}De=new WeakMap,bi=new WeakMap,Zl=new WeakMap,_r=new WeakMap,Jl=new WeakMap,xd=new WeakMap,Cr=new WeakMap,qc=new WeakMap,ws=new WeakMap,Xn=new WeakMap,wd=new WeakMap,Xt=new WeakSet,Jf=function(e,a=!1){if(!e){this.remove();return}A(this,De,e.bitmap),a||(A(this,bi,e.id),A(this,Xn,e.isSvg)),e.file&&A(this,xd,e.file.name),E(this,Xt,t0).call(this)},tm=function(){if(A(this,Zl,null),this._uiManager.enableWaiting(!1),!!l(this,Cr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,De)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,De)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Jb=function(){if(l(this,bi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,bi)).then(s=>E(this,Xt,Jf).call(this,s,!0)).finally(()=>E(this,Xt,tm).call(this));return}if(l(this,_r)){const s=l(this,_r);A(this,_r,null),this._uiManager.enableWaiting(!0),A(this,Zl,this._uiManager.imageManager.getFromUrl(s).then(o=>E(this,Xt,Jf).call(this,o)).finally(()=>E(this,Xt,tm).call(this)));return}if(l(this,Jl)){const s=l(this,Jl);A(this,Jl,null),this._uiManager.enableWaiting(!0),A(this,Zl,this._uiManager.imageManager.getFromFile(s).then(o=>E(this,Xt,Jf).call(this,o)).finally(()=>E(this,Xt,tm).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=r0.join(",");const a=this._uiManager._signal;A(this,Zl,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Xt,Jf).call(this,o)}s()},{signal:a}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:a})}).finally(()=>E(this,Xt,tm).call(this))),e.click()},t0=function(){var m;const{div:e}=this;let{width:a,height:s}=l(this,De);const[o,u]=this.pageDimensions,h=.75;if(this.width)a=this.width*o,s=this.height*u;else if(a>h*o||s>h*u){const b=Math.min(h*o/a,h*u/s);a*=b,s*=b}this._uiManager.enableWaiting(!1);const d=A(this,Cr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=a/o,this.height=s/u,this.setDims(),(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,Xt,FS).call(this),l(this,wd)||(this.parent.addUndoableEditor(this),A(this,wd,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,xd)&&this.div.setAttribute("aria-description",l(this,xd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},e0=function(e,a){const{width:s,height:o}=l(this,De);let u=s,h=o,d=l(this,De);for(;u>2*e||h>2*a;){const m=u,b=h;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*a&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(d,0,0,m,b,0,0,u,h),d=y.transferToImageBitmap()}return d},FS=function(){const[e,a]=this.parentDimensions,{width:s,height:o}=this,u=new Ga,h=Math.ceil(s*e*u.sx),d=Math.ceil(o*a*u.sy),m=l(this,Cr);if(!m||m.width===h&&m.height===d)return;m.width=h,m.height=d;const b=l(this,Xn)?l(this,De):E(this,Xt,e0).call(this,h,d),y=m.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(b,0,0,b.width,b.height,0,0,h,d)},i0=function(e){if(e){if(l(this,Xn)){const o=this._uiManager.imageManager.getSvgUrl(l(this,bi));if(o)return o}const a=document.createElement("canvas");return{width:a.width,height:a.height}=l(this,De),a.getContext("2d").drawImage(l(this,De),0,0),a.toDataURL()}if(l(this,Xn)){const[a,s]=this.pageDimensions,o=Math.round(this.width*a*Or.PDF_TO_CSS_UNITS),u=Math.round(this.height*s*Or.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,u);return h.getContext("2d").drawImage(l(this,De),0,0,l(this,De).width,l(this,De).height,0,0,o,u),h.transferToImageBitmap()}return structuredClone(l(this,De))},y2=function(e){var h;const{pageIndex:a,accessibilityData:{altText:s}}=this._initialData,o=e.pageIndex===a,u=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},it(jS,"_type","stamp"),it(jS,"_editorType",Tt.STAMP);var Vc,Ed,to,eo,Mr,bn,io,Td,_d,Ha,Dr,yi,Rr,no,Cd,vt,ao,ye,PS,v2,ts,HS,US,n0;const Da=class Da{constructor({uiManager:t,pageIndex:e,div:a,structTreeLayer:s,accessibilityManager:o,annotationLayer:u,drawLayer:h,textLayer:d,viewport:m,l10n:b}){w(this,ye);w(this,Vc);w(this,Ed,!1);w(this,to,null);w(this,eo,null);w(this,Mr,null);w(this,bn,new Map);w(this,io,!1);w(this,Td,!1);w(this,_d,!1);w(this,Ha,null);w(this,Dr,null);w(this,yi,null);w(this,Rr,null);w(this,no,null);w(this,Cd,-1);w(this,vt);const y=[...l(Da,ao).values()];if(!Da._initialized){Da._initialized=!0;for(const v of y)v.initialize(b,t)}t.registerEditorTypes(y),A(this,vt,t),this.pageIndex=e,this.div=a,A(this,Vc,o),A(this,to,u),this.viewport=m,A(this,yi,d),this.drawLayer=h,this._structTree=s,l(this,vt).addLayer(this)}get isEmpty(){return l(this,bn).size===0}get isInvisible(){return this.isEmpty&&l(this,vt).getMode()===Tt.NONE}updateToolbar(t){l(this,vt).updateToolbar(t)}updateMode(t=l(this,vt).getMode()){switch(E(this,ye,n0).call(this),t){case Tt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Tt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const a of l(Da,ao).values())e.toggle(`${a._type}Editing`,t===a._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,yi))==null?void 0:e.div)}setEditingState(t){l(this,vt).setEditingState(t)}addCommands(t){l(this,vt).addCommands(t)}cleanUndoStack(t){l(this,vt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,to))==null||e.div.classList.toggle("disabled",!t)}async enable(){var a;A(this,_d,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(a=l(this,no))==null||a.abort(),A(this,no,null);const t=new Set;for(const s of l(this,ye,PS))s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,vt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=l(this,to);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),l(this,vt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const o=await this.deserialize(s);o&&(this.addOrRebuild(o),o.enableEditing())}A(this,_d,!1),l(this,vt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var a;if(A(this,Td,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,yi)&&!l(this,no)){A(this,no,new AbortController);const s=l(this,vt).combinedSignal(l(this,no));l(this,yi).div.addEventListener("pointerdown",o=>{const{clientX:h,clientY:d,timeStamp:m}=o,b=l(this,Cd);if(m-b>500){A(this,Cd,m);return}A(this,Cd,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let x;const _=new RegExp(`^${im}[0-9]+$`);for(const R of v)if(_.test(R.id)){x=R.id;break}if(!x)return;const T=l(this,bn).get(x);(T==null?void 0:T.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),T.dblclick(o))},{signal:s,capture:!0})}const t=l(this,to);if(t){const s=new Map,o=new Map;for(const h of l(this,ye,PS)){if(h.disableEditing(),!h.annotationElementId){h.updateFakeAnnotationElement(t);continue}if(h.serialize()!==null){s.set(h.annotationElementId,h);continue}else o.set(h.annotationElementId,h);(a=this.getEditableAnnotation(h.annotationElementId))==null||a.show(),h.remove()}const u=t.getEditableAnnotations();for(const h of u){const{id:d}=h.data;if(l(this,vt).isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let m=o.get(d);if(m){m.resetAnnotationElement(h),m.show(!1),h.show();continue}m=s.get(d),m&&(l(this,vt).addChangedExistingAnnotation(m),m.renderAnnotationElement(h)&&m.show(!1)),h.show()}}E(this,ye,n0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of l(Da,ao).values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Td,!1)}getEditableAnnotation(t){var e;return((e=l(this,to))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,vt).getActive()!==t&&l(this,vt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,yi))!=null&&t.div&&!l(this,Rr)){A(this,Rr,new AbortController);const e=l(this,vt).combinedSignal(l(this,Rr));l(this,yi).div.addEventListener("pointerdown",E(this,ye,v2).bind(this),{signal:e}),l(this,yi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,yi))!=null&&t.div&&l(this,Rr)&&(l(this,Rr).abort(),A(this,Rr,null),l(this,yi).div.classList.remove("highlighting"))}enableClick(){if(l(this,eo))return;A(this,eo,new AbortController);const t=l(this,vt).combinedSignal(l(this,eo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,eo))==null||t.abort(),A(this,eo,null)}attach(t){l(this,bn).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,vt).isDeletedAnnotationElement(e)&&l(this,vt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,bn).delete(t.id),(e=l(this,Vc))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,Td)&&t.annotationElementId&&l(this,vt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,vt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,vt).addDeletedAnnotationElement(t.annotationElementId),Se.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,vt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,_d)),l(this,vt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var a;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Mr)&&(t._focusEventsAllowed=!1,A(this,Mr,setTimeout(()=>{A(this,Mr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,vt)._signal}),e.focus())},0))),t._structTreeParentId=(a=l(this,Vc))==null?void 0:a.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),a=()=>{t.remove()};this.addCommands({cmd:e,undo:a,mustExec:!1})}getEditorByUID(t){for(const e of l(this,bn).values())if(e.uid===t)return e;return null}getNextId(){return l(this,vt).getId()}combinedSignal(t){return l(this,vt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,ye,ts))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,vt).updateMode(t.mode);const{offsetX:a,offsetY:s}=E(this,ye,US).call(this),o=this.getNextId(),u=E(this,ye,HS).call(this,{parent:this,id:o,x:a,y:s,uiManager:l(this,vt),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=l(Da,ao).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,vt)))||null}createAndAddNewEditor(t,e,a={}){const s=this.getNextId(),o=E(this,ye,HS).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:l(this,vt),isCentered:e,...a});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(E(this,ye,US).call(this),!0,t)}setSelected(t){l(this,vt).setSelected(t)}toggleSelected(t){l(this,vt).toggleSelected(t)}unselect(t){l(this,vt).unselect(t)}pointerup(t){var s;const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,io)||(A(this,io,!1),(s=l(this,ye,ts))!=null&&s.isDrawer&&l(this,ye,ts).supportMultipleDrawings))return;if(!l(this,Ed)){A(this,Ed,!0);return}const a=l(this,vt).getMode();if(a===Tt.STAMP||a===Tt.SIGNATURE){l(this,vt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(l(this,vt).getMode()===Tt.HIGHLIGHT&&this.enableTextSelection(),l(this,io)){A(this,io,!1);return}const{isMac:e}=vi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,io,!0),(s=l(this,ye,ts))!=null&&s.isDrawer){this.startDrawingSession(t);return}const a=l(this,vt).getActive();A(this,Ed,!a||a.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,Ha)){l(this,ye,ts).startDrawing(this,l(this,vt),!1,t);return}l(this,vt).setCurrentDrawingSession(this),A(this,Ha,new AbortController);const e=l(this,vt).combinedSignal(l(this,Ha));this.div.addEventListener("blur",({relatedTarget:a})=>{a&&!this.div.contains(a)&&(A(this,Dr,null),this.commitOrRemove())},{signal:e}),l(this,ye,ts).startDrawing(this,l(this,vt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,Dr,e);return}l(this,Dr)&&setTimeout(()=>{var e;(e=l(this,Dr))==null||e.focus(),A(this,Dr,null)},0)}endDrawingSession(t=!1){return l(this,Ha)?(l(this,vt).setCurrentDrawingSession(null),l(this,Ha).abort(),A(this,Ha,null),A(this,Dr,null),l(this,ye,ts).endDrawing(t)):null}findNewParent(t,e,a){const s=l(this,vt).findParent(e,a);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return l(this,Ha)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Ha)&&l(this,ye,ts).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,vt).getActive())==null?void 0:t.parent)===this&&(l(this,vt).commitOrRemove(),l(this,vt).setActiveEditor(null)),l(this,Mr)&&(clearTimeout(l(this,Mr)),A(this,Mr,null));for(const a of l(this,bn).values())(e=l(this,Vc))==null||e.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,l(this,bn).clear(),l(this,vt).removeLayer(this)}render({viewport:t}){this.viewport=t,so(this.div,t);for(const e of l(this,vt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,vt).commitOrRemove(),E(this,ye,n0).call(this);const e=this.viewport.rotation,a=t.rotation;if(this.viewport=t,so(this.div,{rotation:a}),e!==a)for(const s of l(this,bn).values())s.rotate(a)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,vt).viewParameters.realScale}};Vc=new WeakMap,Ed=new WeakMap,to=new WeakMap,eo=new WeakMap,Mr=new WeakMap,bn=new WeakMap,io=new WeakMap,Td=new WeakMap,_d=new WeakMap,Ha=new WeakMap,Dr=new WeakMap,yi=new WeakMap,Rr=new WeakMap,no=new WeakMap,Cd=new WeakMap,vt=new WeakMap,ao=new WeakMap,ye=new WeakSet,PS=function(){return l(this,bn).size!==0?l(this,bn).values():l(this,vt).getEditors(this.pageIndex)},v2=function(t){l(this,vt).unselectAll();const{target:e}=t;if(e===l(this,yi).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,yi).div.contains(e)){const{isMac:a}=vi.platform;if(t.button!==0||t.ctrlKey&&a)return;l(this,vt).showAllEditors("highlight",!0,!0),l(this,yi).div.classList.add("free"),this.toggleDrawing(),f0.startHighlighting(this,l(this,vt).direction==="ltr",{target:l(this,yi).div,x:t.x,y:t.y}),l(this,yi).div.addEventListener("pointerup",()=>{l(this,yi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,vt)._signal}),t.preventDefault()}},ts=function(){return l(Da,ao).get(l(this,vt).getMode())},HS=function(t){const e=l(this,ye,ts);return e?new e.prototype.constructor(t):null},US=function(){const{x:t,y:e,width:a,height:s}=this.boundingClientRect,o=Math.max(0,t),u=Math.max(0,e),h=Math.min(window.innerWidth,t+a),d=Math.min(window.innerHeight,e+s),m=(o+h)/2-t,b=(u+d)/2-e,[y,v]=this.viewport.rotation%180===0?[m,b]:[b,m];return{offsetX:y,offsetY:v}},n0=function(){for(const t of l(this,bn).values())t.isEmpty()&&t.remove()},it(Da,"_initialized",!1),w(Da,ao,new Map([AS,RS,jS,f0,zS].map(t=>[t._editorType,t])));let g0=Da;var Ua,Ki,Yc,Gg,B0,A2,_s,IS,S2,GS;const ri=class ri{constructor({pageIndex:t}){w(this,_s);w(this,Ua,null);w(this,Ki,new Map);w(this,Yc,new Map);this.pageIndex=t}setParent(t){if(!l(this,Ua)){A(this,Ua,t);return}if(l(this,Ua)!==t){if(l(this,Ki).size>0)for(const e of l(this,Ki).values())e.remove(),t.append(e);A(this,Ua,t)}}static get _svgFactory(){return kt(this,"_svgFactory",new cm)}draw(t,e=!1,a=!1){const s=si(ri,Gg)._++,o=E(this,_s,IS).call(this),u=ri._svgFactory.createElement("defs");o.append(u);const h=ri._svgFactory.createElement("path");u.append(h);const d=`path_p${this.pageIndex}_${s}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Yc).set(s,h);const m=a?E(this,_s,S2).call(this,u,d):null,b=ri._svgFactory.createElement("use");return o.append(b),b.setAttribute("href",`#${d}`),this.updateProperties(o,t),l(this,Ki).set(s,o),{id:s,clipPathId:`url(#${m})`}}drawOutline(t,e){const a=si(ri,Gg)._++,s=E(this,_s,IS).call(this),o=ri._svgFactory.createElement("defs");s.append(o);const u=ri._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=ri._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${a}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const v=ri._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const x=ri._svgFactory.createElement("use");y.append(x),x.setAttribute("href",`#${h}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const m=ri._svgFactory.createElement("use");s.append(m),m.setAttribute("href",`#${h}`),d&&m.setAttribute("mask",`url(#${d})`);const b=m.cloneNode();return s.append(b),m.classList.add("mainOutline"),b.classList.add("secondaryOutline"),this.updateProperties(s,t),l(this,Ki).set(a,s),a}finalizeDraw(t,e){l(this,Yc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:a,bbox:s,rootClass:o,path:u}=e,h=typeof t=="number"?l(this,Ki).get(t):t;if(h){if(a&&E(this,_s,GS).call(this,h,a),s&&E(d=ri,B0,A2).call(d,h,s),o){const{classList:m}=h;for(const[b,y]of Object.entries(o))m.toggle(b,y)}if(u){const b=h.firstChild.firstChild;E(this,_s,GS).call(this,b,u)}}}updateParent(t,e){if(e===this)return;const a=l(this,Ki).get(t);a&&(l(e,Ua).append(a),l(this,Ki).delete(t),l(e,Ki).set(t,a))}remove(t){l(this,Yc).delete(t),l(this,Ua)!==null&&(l(this,Ki).get(t).remove(),l(this,Ki).delete(t))}destroy(){A(this,Ua,null);for(const t of l(this,Ki).values())t.remove();l(this,Ki).clear(),l(this,Yc).clear()}};Ua=new WeakMap,Ki=new WeakMap,Yc=new WeakMap,Gg=new WeakMap,B0=new WeakSet,A2=function(t,[e,a,s,o]){const{style:u}=t;u.top=`${100*a}%`,u.left=`${100*e}%`,u.width=`${100*s}%`,u.height=`${100*o}%`},_s=new WeakSet,IS=function(){const t=ri._svgFactory.create(1,1,!0);return l(this,Ua).append(t),t.setAttribute("aria-hidden",!0),t},S2=function(t,e){const a=ri._svgFactory.createElement("clipPath");t.append(a);const s=`clip_${e}`;a.setAttribute("id",s),a.setAttribute("clipPathUnits","objectBoundingBox");const o=ri._svgFactory.createElement("use");return a.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),s},GS=function(t,e){for(const[a,s]of Object.entries(e))s===null?t.removeAttribute(a):t.setAttribute(a,s)},w(ri,B0),w(ri,Gg,0);let p0=ri;globalThis._pdfjsTestingUtils={HighlightOutliner:xS};globalThis.pdfjsLib={AbortException:Lr,AnnotationEditorLayer:g0,AnnotationEditorParamsType:Ut,AnnotationEditorType:Tt,AnnotationEditorUIManager:ro,AnnotationLayer:lx,AnnotationMode:Es,AnnotationType:Ke,applyOpacity:v_,build:xC,ColorPicker:om,createValidAbsoluteUrl:XS,CSSConstants:y_,DOMSVGFactory:cm,DrawLayer:p0,FeatureTest:vi,fetchData:Nd,findContrastColor:A_,getDocument:ix,getFilenameFromUrl:g_,getPdfFilenameFromUrl:p_,getRGB:kd,getUuid:WS,getXfaPageViewport:b_,GlobalWorkerOptions:xa,ImageKind:em,InvalidPDFException:s0,isDataScheme:Xg,isPdfFile:P0,isValidExplicitDest:J_,MathClamp:Ui,noContextMenu:Zn,normalizeUnicode:f_,OPS:Md,OutputScale:Ga,PasswordResponses:h_,PDFDataRangeTransport:nx,PDFDateString:sm,PDFWorker:Dd,PermissionFlag:u_,PixelsPerInch:Or,RenderingCancelledException:F0,renderRichText:ZS,ResponseException:nm,setLayerDimensions:so,shadow:kt,SignatureExtractor:Ts,stopEvent:Le,SupportedImageMimeTypes:r0,TextLayer:lm,TouchManager:rm,updateUrlHash:KS,Util:ht,VerbosityLevel:qg,version:ax,XfaLayer:QS};const dk=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Lr,AnnotationEditorLayer:g0,AnnotationEditorParamsType:Ut,AnnotationEditorType:Tt,AnnotationEditorUIManager:ro,AnnotationLayer:lx,AnnotationMode:Es,AnnotationType:Ke,CSSConstants:y_,ColorPicker:om,DOMSVGFactory:cm,DrawLayer:p0,FeatureTest:vi,GlobalWorkerOptions:xa,ImageKind:em,InvalidPDFException:s0,MathClamp:Ui,OPS:Md,OutputScale:Ga,PDFDataRangeTransport:nx,PDFDateString:sm,PDFWorker:Dd,PasswordResponses:h_,PermissionFlag:u_,PixelsPerInch:Or,RenderingCancelledException:F0,ResponseException:nm,SignatureExtractor:Ts,SupportedImageMimeTypes:r0,TextLayer:lm,TouchManager:rm,Util:ht,VerbosityLevel:qg,XfaLayer:QS,applyOpacity:v_,build:xC,createValidAbsoluteUrl:XS,fetchData:Nd,findContrastColor:A_,getDocument:ix,getFilenameFromUrl:g_,getPdfFilenameFromUrl:p_,getRGB:kd,getUuid:WS,getXfaPageViewport:b_,isDataScheme:Xg,isPdfFile:P0,isValidExplicitDest:J_,noContextMenu:Zn,normalizeUnicode:f_,renderRichText:ZS,setLayerDimensions:so,shadow:kt,stopEvent:Le,updateUrlHash:KS,version:ax},Symbol.toStringTag,{value:"Module"}));function x2(g){var t,e,a="";if(typeof g=="string"||typeof g=="number")a+=g;else if(typeof g=="object")if(Array.isArray(g)){var s=g.length;for(t=0;t<s;t++)g[t]&&(e=x2(g[t]))&&(a&&(a+=" "),a+=e)}else for(e in g)g[e]&&(a&&(a+=" "),a+=e);return a}function I0(){for(var g,t,e=0,a="",s=arguments.length;e<s;e++)(g=arguments[e])&&(t=x2(g))&&(a&&(a+=" "),a+=t);return a}var KT=Object.prototype.hasOwnProperty;function WT(g,t,e){for(e of g.keys())if(th(e,t))return e}function th(g,t){var e,a,s;if(g===t)return!0;if(g&&t&&(e=g.constructor)===t.constructor){if(e===Date)return g.getTime()===t.getTime();if(e===RegExp)return g.toString()===t.toString();if(e===Array){if((a=g.length)===t.length)for(;a--&&th(g[a],t[a]););return a===-1}if(e===Set){if(g.size!==t.size)return!1;for(a of g)if(s=a,s&&typeof s=="object"&&(s=WT(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(g.size!==t.size)return!1;for(a of g)if(s=a[0],s&&typeof s=="object"&&(s=WT(t,s),!s)||!th(a[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)g=new Uint8Array(g),t=new Uint8Array(t);else if(e===DataView){if((a=g.byteLength)===t.byteLength)for(;a--&&g.getInt8(a)===t.getInt8(a););return a===-1}if(ArrayBuffer.isView(g)){if((a=g.byteLength)===t.byteLength)for(;a--&&g[a]===t[a];);return a===-1}if(!e||typeof g=="object"){a=0;for(e in g)if(KT.call(g,e)&&++a&&!KT.call(t,e)||!(e in t)||!th(g[e],t[e]))return!1;return Object.keys(t).length===a}}return g!==g&&t!==t}function Qg(g){let t=!1;return{promise:new Promise((a,s)=>{g.then(o=>!t&&a(o)).catch(o=>!t&&s(o))}),cancel(){t=!0}}}const fk=["onCopy","onCut","onPaste"],mk=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],gk=["onFocus","onBlur"],pk=["onInput","onInvalid","onReset","onSubmit"],bk=["onLoad","onError"],yk=["onKeyDown","onKeyPress","onKeyUp"],vk=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Ak=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Sk=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],xk=["onSelect"],wk=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Ek=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Tk=["onScroll"],_k=["onWheel"],Ck=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Mk=["onTransitionEnd"],Dk=["onToggle"],Rk=["onChange"],Nk=[...fk,...mk,...gk,...pk,...bk,...yk,...vk,...Ak,...Sk,...xk,...wk,...Ek,...Tk,..._k,...Ck,...Mk,...Rk,...Dk];function w2(g,t){const e={};for(const a of Nk){const s=g[a];s&&(t?e[a]=(o=>s(o,t(a))):e[a]=s)}return e}var kk="Invariant failed";function be(g,t){if(!g)throw new Error(kk)}var bA,$T;function Lk(){if($T)return bA;$T=1;var g=function(){};return bA=g,bA}var Ok=Lk();const Ii=r_(Ok),E2=et.createContext(null),Bk="noopener noreferrer nofollow";class zk{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return be(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){be(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,a){t.href=e,t.rel=this.externalLinkRel||Bk,t.target=a?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{be(this.pdfDocument),be(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{be(Array.isArray(e));const a=e[0];new Promise(s=>{be(this.pdfDocument),a instanceof Object?this.pdfDocument.getPageIndex(a).then(o=>{s(o)}).catch(()=>{be(!1)}):typeof a=="number"?s(a):be(!1)}).then(s=>{const o=s+1;be(this.pdfViewer),be(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:o})})})}goToPage(t){const e=t-1;be(this.pdfViewer),be(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function eh({children:g,type:t}){return D.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:g})}const QT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function jk(g,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return g}}function Rd(){return et.useReducer(jk,{value:void 0,error:void 0})}const G0=typeof window<"u",T2=G0&&window.location.protocol==="file:";function Fk(g){return typeof g<"u"}function Mo(g){return Fk(g)&&g!==null}function Pk(g){return typeof g=="string"}function Hk(g){return g instanceof ArrayBuffer}function Uk(g){return be(G0),g instanceof Blob}function qS(g){return Pk(g)&&/^data:/.test(g)}function ZT(g){be(qS(g));const[t="",e=""]=g.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function Ik(){return G0&&window.devicePixelRatio||1}const _2="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function JT(){Ii(!T2,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${_2}`)}function Gk(){Ii(!T2,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${_2}`)}function Kc(g){g!=null&&g.cancel&&g.cancel()}function VS(g,t){return Object.defineProperty(g,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(g,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(g,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(g,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),g}function C2(g){return g.name==="AbortException"||g.name==="RenderingCancelledException"}function qk(g){return new Promise((t,e)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return e(new Error("Error while reading a file."));t(a.result)},a.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:o}=s.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},a.readAsArrayBuffer(g)})}const{PDFDataRangeTransport:Vk}=dk,Yk=(g,t)=>{switch(t){case QT.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");g(e);break}case QT.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");g(e);break}}};function t_(g){return typeof g=="object"&&g!==null&&("data"in g||"range"in g||"url"in g)}const Xk=et.forwardRef(function({children:t,className:e,error:a="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:o,file:u,inputRef:h,imageResourcesPath:d,loading:m="Loading PDF",noData:b="No PDF file specified.",onItemClick:y,onLoadError:v,onLoadProgress:x,onLoadSuccess:_,onPassword:T=Yk,onSourceError:R,onSourceSuccess:M,options:k,renderMode:N,rotate:O,scale:z,...j},H){const[U,X]=Rd(),{value:J,error:tt}=U,[nt,bt]=Rd(),{value:st,error:gt}=nt,B=et.useRef(new zk),P=et.useRef([]),W=et.useRef(void 0),at=et.useRef(void 0);u&&u!==W.current&&t_(u)&&(Ii(!th(u,W.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),W.current=u),k&&k!==at.current&&(Ii(!th(k,at.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),at.current=k);const pt=et.useRef({scrollPageIntoView:Kt=>{const{dest:te,pageNumber:ee,pageIndex:ze=ee-1}=Kt;if(y){y({dest:te,pageIndex:ze,pageNumber:ee});return}const dt=P.current[ze];if(dt){dt.scrollIntoView();return}Ii(!1,`An internal link leading to page ${ee} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});et.useImperativeHandle(H,()=>({linkService:B,pages:P,viewer:pt}),[]);function At(){M&&M()}function ot(){tt&&(Ii(!1,tt.toString()),R&&R(tt))}function lt(){X({type:"RESET"})}et.useEffect(lt,[u,X]);const xt=et.useCallback(async()=>{if(!u)return null;if(typeof u=="string")return qS(u)?{data:ZT(u)}:(JT(),{url:u});if(u instanceof Vk)return{range:u};if(Hk(u))return{data:u};if(G0&&Uk(u))return{data:await qk(u)};if(be(typeof u=="object"),be(t_(u)),"url"in u&&typeof u.url=="string"){if(qS(u.url)){const{url:Kt,...te}=u;return{data:ZT(Kt),...te}}JT()}return u},[u]);et.useEffect(()=>{const Kt=Qg(xt());return Kt.promise.then(te=>{X({type:"RESOLVE",value:te})}).catch(te=>{X({type:"REJECT",error:te})}),()=>{Kc(Kt)}},[xt,X]),et.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){ot();return}At()}},[J]);function zt(){st&&(_&&_(st),P.current=new Array(st.numPages),B.current.setDocument(st))}function qt(){gt&&(Ii(!1,gt.toString()),v&&v(gt))}et.useEffect(function(){bt({type:"RESET"})},[bt,J]),et.useEffect(function(){if(!J)return;const te=k?{...J,...k}:J,ee=ix(te);x&&(ee.onProgress=x),T&&(ee.onPassword=T);const ze=ee;return ze.promise.then(dt=>{ze.destroyed||bt({type:"RESOLVE",value:dt})}).catch(dt=>{ze.destroyed||bt({type:"REJECT",error:dt})}),()=>{ze.destroy()}},[k,bt,J]),et.useEffect(()=>{if(!(typeof st>"u")){if(st===!1){qt();return}zt()}},[st]),et.useEffect(function(){B.current.setViewer(pt.current),B.current.setExternalLinkRel(s),B.current.setExternalLinkTarget(o)},[s,o]);const Mt=et.useCallback((Kt,te)=>{P.current[Kt]=te},[]),Be=et.useCallback(Kt=>{delete P.current[Kt]},[]),qe=et.useMemo(()=>({imageResourcesPath:d,linkService:B.current,onItemClick:y,pdf:st,registerPage:Mt,renderMode:N,rotate:O,scale:z,unregisterPage:Be}),[d,y,st,Mt,N,O,z,Be]),Zi=et.useMemo(()=>w2(j,()=>st),[j,st]);function Re(){function Kt(ee){return!!(ee!=null&&ee.pdf)}if(!Kt(qe))throw new Error("pdf is undefined");const te=typeof t=="function"?t(qe):t;return D.jsx(E2.Provider,{value:qe,children:te})}function Vt(){return u?st==null?D.jsx(eh,{type:"loading",children:typeof m=="function"?m():m}):st===!1?D.jsx(eh,{type:"error",children:typeof a=="function"?a():a}):Re():D.jsx(eh,{type:"no-data",children:typeof b=="function"?b():b})}return D.jsx("div",{className:I0("react-pdf__Document",e),ref:h,...Zi,children:Vt()})});function M2(){return et.useContext(E2)}function D2(){for(var g=[],t=0;t<arguments.length;t++)g[t]=arguments[t];var e=g.filter(Boolean);if(e.length<=1){var a=e[0];return a||null}return function(o){for(var u=0,h=e;u<h.length;u++){var d=h[u];typeof d=="function"?d(o):d&&(d.current=o)}}}const R2=et.createContext(null);function q0(){return et.useContext(R2)}function Kk(){const g=M2(),t=q0();be(t);const e={...g,...t},{filterAnnotations:a,imageResourcesPath:s,linkService:o,onGetAnnotationsError:u,onGetAnnotationsSuccess:h,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:m,page:b,pdf:y,renderForms:v,rotate:x,scale:_=1}=e;be(y),be(b),be(o);const[T,R]=Rd(),{value:M,error:k}=T,N=et.useRef(null);Ii(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){M&&h&&h(M)}function z(){k&&(Ii(!1,k.toString()),u&&u(k))}et.useEffect(function(){R({type:"RESET"})},[R,b]),et.useEffect(function(){if(!b)return;const J=Qg(b.getAnnotations()),tt=J;return J.promise.then(nt=>{R({type:"RESOLVE",value:nt})}).catch(nt=>{R({type:"REJECT",error:nt})}),()=>{Kc(tt)}},[R,b]),et.useEffect(()=>{if(M!==void 0){if(M===!1){z();return}O()}},[M]);function j(){m&&m()}function H(X){Ii(!1,`${X}`),d&&d(X)}const U=et.useMemo(()=>b.getViewport({scale:_,rotation:x}),[b,x,_]);return et.useEffect(function(){if(!y||!b||!o||!M)return;const{current:J}=N;if(!J)return;const tt=U.clone({dontFlip:!0}),nt={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:y.annotationStorage,commentManager:null,div:J,l10n:null,linkService:o,page:b,structTreeLayer:null,viewport:tt},bt={annotations:a?a({annotations:M}):M,annotationStorage:y.annotationStorage,div:J,imageResourcesPath:s,linkService:o,page:b,renderForms:v,viewport:tt};J.innerHTML="";try{new lx(nt).render(bt),j()}catch(st){H(st)}return()=>{}},[M,a,s,o,b,y,v,U]),D.jsx("div",{className:I0("react-pdf__Page__annotations","annotationLayer"),ref:N})}const N2={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Wk=/^H(\d+)$/;function $k(g){return g in N2}function V0(g){return"children"in g}function k2(g){return V0(g)?g.children.length===1&&0 in g.children&&"id"in g.children[0]:!1}function Qk(g){const t={};if(V0(g)){const{role:e}=g,a=e.match(Wk);if(a)t.role="heading",t["aria-level"]=Number(a[1]);else if($k(e)){const s=N2[e];s&&(t.role=s)}}return t}function L2(g){const t={};if(V0(g)){if(g.alt!==void 0&&(t["aria-label"]=g.alt),g.lang!==void 0&&(t.lang=g.lang),k2(g)){const[e]=g.children;if(e){const a=L2(e);return{...t,...a}}}}else"id"in g&&(t["aria-owns"]=g.id);return t}function Zk(g){return g?{...Qk(g),...L2(g)}:null}function O2({className:g,node:t}){const e=et.useMemo(()=>Zk(t),[t]),a=et.useMemo(()=>!V0(t)||k2(t)?null:t.children.map((s,o)=>D.jsx(O2,{node:s},o)),[t]);return D.jsx("span",{className:g,...e,children:a})}function Jk(){const g=q0();be(g);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=g,[a,s]=Rd(),{value:o,error:u}=a,{customTextRenderer:h,page:d}=g;function m(){o&&e&&e(o)}function b(){u&&(Ii(!1,u.toString()),t&&t(u))}return et.useEffect(function(){s({type:"RESET"})},[s,d]),et.useEffect(function(){if(h||!d)return;const v=Qg(d.getStructTree()),x=v;return v.promise.then(_=>{s({type:"RESOLVE",value:_})}).catch(_=>{s({type:"REJECT",error:_})}),()=>Kc(x)},[h,d,s]),et.useEffect(()=>{if(o!==void 0){if(o===!1){b();return}m()}},[o]),o?D.jsx(O2,{className:"react-pdf__Page__structTree structTree",node:o}):null}const e_=Es;function tL(g){const t=q0();be(t);const e={...t,...g},{_className:a,canvasBackground:s,devicePixelRatio:o=Ik(),onRenderError:u,onRenderSuccess:h,page:d,renderForms:m,renderTextLayer:b,pageColors:y,rotate:v,scale:x}=e,{canvasRef:_}=g;be(d);const T=et.useRef(null);function R(){d&&h&&h(VS(d,x))}function M(z){C2(z)||(Ii(!1,z.toString()),u&&u(z))}const k=et.useMemo(()=>d.getViewport({scale:x*o,rotation:v}),[o,d,v,x]),N=et.useMemo(()=>d.getViewport({scale:x,rotation:v}),[d,v,x]);et.useEffect(function(){if(!d)return;d.cleanup();const{current:j}=T;if(!j)return;j.width=k.width,j.height=k.height,j.style.width=`${Math.floor(N.width)}px`,j.style.height=`${Math.floor(N.height)}px`,j.style.visibility="hidden";const H={annotationMode:m?e_.ENABLE_FORMS:e_.ENABLE,canvas:j,canvasContext:j.getContext("2d",{alpha:!1}),pageColors:y,viewport:k};s&&(H.background=s);const U=d.render(H),X=U;return U.promise.then(()=>{j.style.visibility="",R()}).catch(M),()=>Kc(X)},[s,d,y,m,k,N]);const O=et.useCallback(()=>{const{current:z}=T;z&&(z.width=0,z.height=0)},[]);return et.useEffect(()=>O,[O]),D.jsx("canvas",{className:`${a}__canvas`,dir:"ltr",ref:D2(_,T),style:{display:"block",userSelect:"none"},children:b?D.jsx(Jk,{}):null})}function eL(g){return"str"in g}const iL=new Set(["base","embed","iframe","link","meta","object","script","style","template"]),nL=new Set(["action","formaction","href","poster","src","xlink:href"]);function aL(g){let t="";for(const e of g){const a=e.charCodeAt(0);a<=32||a===127||(t+=e.toLowerCase())}return t.startsWith("javascript:")||t.startsWith("vbscript:")}function sL(g){return g.nodeType===Node.ELEMENT_NODE}function B2(g){return sL(g)&&g instanceof HTMLElement}function rL(g){return B2(g)&&iL.has(g.tagName.toLowerCase())}function lL(g){const t=document.createElement(g.tagName.toLowerCase());return Array.from(g.attributes).forEach(e=>{const a=e.name.toLowerCase();a.startsWith("on")||a==="srcdoc"||nL.has(a)&&aL(e.value)||t.setAttribute(e.name,e.value)}),Array.from(g.childNodes).forEach(e=>{t.append(z2(e))}),t}function z2(g){var t;return B2(g)&&!rL(g)?lL(g):document.createTextNode((t=g.textContent)!==null&&t!==void 0?t:"")}function oL(g,t){const e=document.createElement("template");e.innerHTML=t;const a=document.createDocumentFragment();Array.from(e.content.childNodes).forEach(s=>{a.append(z2(s))}),g.replaceChildren(a)}function cL(){const g=q0();be(g);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:a,onRenderTextLayerError:s,onRenderTextLayerSuccess:o,page:u,pageIndex:h,pageNumber:d,rotate:m,scale:b}=g;be(u);const[y,v]=Rd(),{value:x,error:_}=y,T=et.useRef(null);Ii(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function R(){x&&a&&a(x)}function M(){_&&(Ii(!1,_.toString()),e&&e(_))}et.useEffect(function(){v({type:"RESET"})},[u,v]),et.useEffect(function(){if(!u)return;const U=Qg(u.getTextContent()),X=U;return U.promise.then(J=>{v({type:"RESOLVE",value:J})}).catch(J=>{v({type:"REJECT",error:J})}),()=>Kc(X)},[u,v]),et.useEffect(()=>{if(x!==void 0){if(x===!1){M();return}R()}},[x]);const k=et.useCallback(()=>{o&&o()},[o]),N=et.useCallback(H=>{C2(H)||(Ii(!1,H.toString()),s&&s(H))},[s]);function O(){const H=T.current;H&&H.classList.add("selecting")}function z(){const H=T.current;H&&H.classList.remove("selecting")}const j=et.useMemo(()=>u.getViewport({scale:b,rotation:m}),[u,m,b]);return et.useLayoutEffect(function(){if(!u||!x)return;const{current:U}=T;if(!U)return;U.innerHTML="";const X=u.streamTextContent({includeMarkedContent:!0}),J={container:U,textContentSource:X,viewport:j},tt=new lm(J),nt=tt;return tt.render().then(()=>{const bt=document.createElement("div");bt.className="endOfContent",U.append(bt);const st=U.querySelectorAll('[role="presentation"]');if(t){let gt=0;x.items.forEach((B,P)=>{if(!eL(B))return;const W=st[gt];if(!W)return;const at=t({pageIndex:h,pageNumber:d,itemIndex:P,...B});oL(W,at),gt+=B.str&&B.hasEOL?2:1})}k()}).catch(N),()=>Kc(nt)},[t,N,k,u,h,d,x,j]),D.jsx("div",{className:I0("react-pdf__Page__textContent","textLayer"),onMouseUp:z,onMouseDown:O,ref:T})}const i_=1;function uL(g){const e={...M2(),...g},{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:o,canvasRef:u,children:h,className:d,customRenderer:m,customTextRenderer:b,devicePixelRatio:y,error:v="Failed to load the page.",filterAnnotations:x,height:_,inputRef:T,loading:R="Loading page",noData:M="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:N,onGetStructTreeError:O,onGetStructTreeSuccess:z,onGetTextError:j,onGetTextSuccess:H,onLoadError:U,onLoadSuccess:X,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:tt,onRenderError:nt,onRenderSuccess:bt,onRenderTextLayerError:st,onRenderTextLayerSuccess:gt,pageColors:B,pageIndex:P,pageNumber:W,pdf:at,registerPage:pt,renderAnnotationLayer:At=!0,renderForms:ot=!1,renderMode:lt="canvas",renderTextLayer:xt=!0,rotate:zt,scale:qt=i_,unregisterPage:Mt,width:Be,...qe}=e,[Zi,Re]=Rd(),{value:Vt,error:Kt}=Zi,te=et.useRef(null);be(at);const ee=Mo(W)?W-1:P??null,ze=W??(Mo(P)?P+1:null),dt=zt??(Vt?Vt.rotate:null),Te=et.useMemo(()=>{if(!Vt)return null;let Ya=1;const Cs=qt??i_;if(Be||_){const Xa=Vt.getViewport({scale:1,rotation:dt});Be?Ya=Be/Xa.width:_&&(Ya=_/Xa.height)}return Cs*Ya},[_,Vt,dt,qt,Be]);et.useEffect(function(){return()=>{Mo(ee)&&s&&Mt&&Mt(ee)}},[s,at,ee,Mt]);function Va(){if(X){if(!Vt||!Te)return;X(VS(Vt,Te))}if(s&&pt){if(!Mo(ee)||!te.current)return;pt(ee,te.current)}}function jr(){Kt&&(Ii(!1,Kt.toString()),U&&U(Kt))}et.useEffect(function(){Re({type:"RESET"})},[Re,at,ee]),et.useEffect(function(){if(!at||!ze)return;const Cs=Qg(at.getPage(ze)),Xa=Cs;return Cs.promise.then(Ld=>{Re({type:"RESOLVE",value:Ld})}).catch(Ld=>{Re({type:"REJECT",error:Ld})}),()=>Kc(Xa)},[Re,at,ze]),et.useEffect(()=>{if(Vt!==void 0){if(Vt===!1){jr();return}Va()}},[Vt,Te]);const Ji=et.useMemo(()=>Mo(ee)&&ze&&Mo(dt)&&Mo(Te)?{_className:a,canvasBackground:o,customTextRenderer:b,devicePixelRatio:y,filterAnnotations:x,onGetAnnotationsError:k,onGetAnnotationsSuccess:N,onGetStructTreeError:O,onGetStructTreeSuccess:z,onGetTextError:j,onGetTextSuccess:H,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:tt,onRenderError:nt,onRenderSuccess:bt,onRenderTextLayerError:st,onRenderTextLayerSuccess:gt,page:Vt,pageColors:B,pageIndex:ee,pageNumber:ze,renderForms:ot,renderTextLayer:xt,rotate:dt,scale:Te}:null,[a,o,b,y,x,k,N,O,z,j,H,J,tt,nt,bt,st,gt,Vt,B,ee,ze,ot,xt,dt,Te]),vn=et.useMemo(()=>w2(qe,()=>Vt&&(Te?VS(Vt,Te):void 0)),[qe,Vt,Te]),tn=`${ee}@${Te}/${dt}`;function Ve(){switch(lt){case"custom":return be(m),D.jsx(m,{},`${tn}_custom`);case"none":return null;case"canvas":default:return D.jsx(tL,{canvasRef:u},`${tn}_canvas`)}}function Qc(){return xt?D.jsx(cL,{},`${tn}_text`):null}function An(){return At?D.jsx(Kk,{},`${tn}_annotations`):null}function Zc(){function Ya(Xa){return!!(Xa!=null&&Xa.page)}if(!Ya(Ji))throw new Error("page is undefined");const Cs=typeof h=="function"?h(Ji):h;return D.jsxs(R2.Provider,{value:Ji,children:[Ve(),Qc(),An(),Cs]})}function Jc(){return ze?at===null||Vt===void 0||Vt===null?D.jsx(eh,{type:"loading",children:typeof R=="function"?R():R}):at===!1||Vt===!1?D.jsx(eh,{type:"error",children:typeof v=="function"?v():v}):Zc():D.jsx(eh,{type:"no-data",children:typeof M=="function"?M():M})}return D.jsx("div",{className:I0(a,d),"data-page-number":ze,ref:D2(T,te),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Te}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...vn,children:Jc()})}Gk();xa.workerSrc="pdf.worker.mjs";xa.workerSrc=`//unpkg.com/pdfjs-dist@${ax}/build/pdf.worker.min.mjs`;const yA={arabic:"      ",english:"I intend to perform Wazu for the sake of Allah, the Almighty, to seek His closeness."},vA={arabic:"              .       ",english:"I bear witness that there is no god but Allah, alone without partner, and I bear witness that Muhammad is His servant and Messenger. O Allah, make me among those who turn to You in repentance and make me among those who are purified."},hL=[{name:"Hands",detail:"Wash hands up to the wrists 3 times, rubbing between fingers.",arabic:"   .          ",roman:"Bismillahir Rahmanir Raheem. Alhamdu lillahilladhi ja'alal ma'a tahuran wa ja'alal islama nuran.",img:"images/wudu-wash-hands.png"},{name:"Mouth",detail:"Rinse the mouth thoroughly 3 times.",arabic:"           ",roman:"Allahumma a'inni 'ala tilawatil Qur'ani wa dhikrika wa shukrika wa husni 'ibadatik.",img:"images/wudu-rinse-mouth.png"},{name:"Nose",detail:"Sniff water into the nostrils 3 times.",arabic:"        ",roman:"Allahumma arihni ra'ihatal jannati wa anta 'anni radin.",img:"images/wudu-into-nose.png"},{name:"Face",detail:"Wash the entire face 3 times.",arabic:"        ",roman:"Allahumma bayyid wajhi yawma tabyaddu wujuhun wa taswaddu wujuh.",img:"images/wudu-wash-face.png"},{name:"Right Arm",detail:"Wash up to the elbow 3 times.",arabic:"       ",roman:"Allahumma a'tini kitabi biyamini wa hasibni hisaban yasira.",img:"images/wudu-wash-arms.png"},{name:"Left Arm",detail:"Wash up to the elbow 3 times.",arabic:"         ",roman:"Allahumma la tu'tini kitabi bishimali wa la min wara'i dhahri.",img:"images/wudu-wash-arms.png"},{name:"Head (Masah)",detail:"Wipe wet hands over the head once.",arabic:"       ",roman:"Allahumma ghashshini birahmatika wa anzil 'alayya min barakatik.",img:"images/wudu-wash-hair.png"},{name:"Feet",detail:"Wash feet up to the ankles 3 times.",arabic:"        ",roman:"Allahumma thabbit qadamayya 'alas-sirati yawma tazillu fihil aqdam.",img:"images/wudu-wash-feet.png"}],dL=[{name:"Surah Al Fatiha",meaning:"The Opening",arabic:"    (1)     (2)   (3)    (4)     (5)    (6)          (7)",roman:"Bismillahir Rahmaanir Raheem. Alhamdu lillaahi Rabbil 'aalameen. Ar-Rahmaanir-Raheem. Maaliki Yawmid-Deen. Iyyaaka na'budu wa lyyaaka nasta'een. Ihdinas-Siraatal-Mustaqeem. Siraatal-ladheena an'amta 'alaihim ghayril-maghdoobi 'alaihim wa lad-daalleen."},{name:"Surah Attahiyyatu lillahi was-salawatu",meaning:"Tashahhud",arabic:"                           ",roman:"Attahiyyatu lillahi was-salawatu wat-tayyibatu, as-salamu 'alaika ayyuhan-nabiyyu wa rahmatullahi wa barakatuhu, as-salamu 'alaina wa 'ala 'ibadillahis-salihin, ashhadu alla ilaha illallah wa ashhadu anna Muhammadan 'abduhu wa rasuluhu."},{name:"Durood e Ibrahim",meaning:"Salutations on the Prophet",arabic:"                .                 ",roman:"Allahumma salli 'ala Muhammadin wa 'ala ali Muhammadin kama sallaita 'ala Ibrahima wa 'ala ali Ibrahima innaka Hamidum Majid. Allahumma barik 'ala Muhammadin wa 'ala ali Muhammadin kama barakta 'ala Ibrahima wa 'ala ali Ibrahima innaka Hamidum Majid."},{name:"Surah Masoora",meaning:"Dua e Masoora",arabic:"                     .             .            .             ",roman:"Allahumma inni zalamtu nafsi zulman kathira wala yaghfiru dhunuba illa Anta faghfirli maghfiratan min 'Indika war-hamni innaka Antal Ghafurur Rahim. Allahummagh-firli wali-walidayya wali-awladi wal-jami'il mu'minina wal-mu'minati wal-muslimina wal-muslimatil ahya-i minhum wal-amwat. Rabbana atina fid-dunya hasanatan wa fil-akhirati hasanatan waqina 'adhaban-nar. Subhana Rabbika Rabbil 'izzati 'amma yasifun wa salamun 'alal-mursalin wal-hamdu lillahi Rabbil 'alamin."},{name:"Dua e qunoot",meaning:"Dua for Witr",arabic:"                 .                 ",roman:"Allahumma inna nasta'inuka wa nastaghfiruka wa nu'minu bika wa natawakkalu 'alaika wa nuthni 'alaikal-khaira wa nashkuruka wala nakfuruka wa nakhla'u wa natruku man yafjuruk. Allahumma lyyaka na'budu wa laka nusalli wa nasjudu wa lyaika nas'a wa nahfidu narju rahmataka wa nakhsha 'adhabaka inna 'adhabaka bil-kuffari mulhiq."},{name:"Surah An-Nas",meaning:"The Mankind",arabic:"    (1)   (2)   (3)     (4)      (5)    (6)",roman:"Qul a'oodhu birabbin naas. Malikin naas. Ilaahin naas. Min sharril waswaasil khannaas. Alladhee yuwaswisu fee sudoorin naas. Minal jinnati wannaas."},{name:"Surah Al-Falaq",meaning:"The Daybreak",arabic:"    (1)     (2)      (3)      (4)      (5)",roman:"Qul a'oodhu birabbil falaq. Min sharri maa khalaq. Wa min sharri ghaasiqin idhaa waqab. Wa min sharrin-naffaathaati fil 'uqad. Wa min sharri haasidin idhaa hasad."},{name:"Surah Al-Ikhlas",meaning:"The Sincerity",arabic:"    (1)   (2)     (3)      (4)",roman:"Qul huwal laahu ahad. Allahus samad. Lam yalid wa lang yoolad. Wa lakum yakul lahoo kufuwan ahad."},{name:"Surah Al-Masad",meaning:"The Palm Fiber",arabic:"     (1)       (2)     (3)    (4)      (5)",roman:"Tabbat yadaaa abee lahabiw wa tabb. Maa aghnaa 'anhu maaluhoo wa maa khab. Saiyaslaa naaran dhaata lahab. Wamra'atuhoo hammaalatal hatab. Fee jeedihaa hablum mim masad."},{name:"Surah An-Nasr",meaning:"The Divine Support",arabic:"     (1)        (2)        (3)",roman:"Idhaa jaaa'a nasrul laahi wal fath. Wa ra'aitan naasa yadkhuloona fee deenil laahi afwaajaa. Fasabbih bihamdi rabbika wastaghfirh; innahoo kaana tawwaaba."},{name:"Surah Al-Kafirun",meaning:"The Disbelievers",arabic:"    (1)     (2)      (3)      (4)      (5)     (6)",roman:"Qul yaa ayyhal kaafiroon. Laa a'budu maa ta'budoon. Wa laa antum 'aabidoona maaa a'bud. Wa laaa ana 'aabidum maa 'abattum. Wa laaa antum 'aabidoona maaa a'bud. Lakum deenukum wa liya deen."},{name:"Surah Al-Kauthar",meaning:"The Abundance",arabic:"   (1)    (2)     (3)",roman:"Innaaa a'tainaakal kauthar. Fasalli lirabbika wanhar. Inna shaani'aka huwal abtar."},{name:"Surah Al-Ma'un",meaning:"Small Kindnesses",arabic:"    (1)     (2)      (3)   (4)      (5)    (6)   (7)",roman:"Ara'aytal ladhee yukadhdhibu biddeen. Fadhaalikal ladhee yadu'ul yateem. Wa laa yahuddu 'alaa ta'aamil miskeen. Fawailul lil musalleen. Alladheena hum 'an salaatihim saahoon. Alladheena hum yuraaa'oon. Wa yamna'oonal maa'oon."},{name:"Surah Quraish",meaning:"The Quraish",arabic:"  (1)     (2)     (3)        (4)",roman:"Li eelaafi quraish. Eelaafihim rihlatash shitaaa'i wassaif. Falya'budoo rabba haadhal bait. Alladhee at'amahum min joo'inw wa aamanahum min khauf."},{name:"Surah Al-Fil",meaning:"The Elephant",arabic:"       (1)      (2)     (3)     (4)    (5)",roman:"Alam tara kaifa fa'ala rabbuka bi ashaabil feel. Alam yaj'al kaidahum fee tadleel. Wa arsala 'alaihim tairan abaabeel. Tarmeehim bihijaaratim min sijjeel. Faja'alahum ka'asfim m'akool."},{name:"Surah Al-Humazah",meaning:"The Scorner",arabic:"    (1)     (2)     (3)     (4)     (5)    (6)",roman:"Wailul likulli humazatil lumazah. Alladhee jama'a maalanw wa 'addadah. Yahsabu anna maalahooo akhladah. Kallaa layumbadhanna fil hutamah. Wa maaa adraaka mal hutamah. Naarul laahil mooqadah."},{name:"Surah Al-Asr",meaning:"The Time",arabic:" (1)     (2)          (3)",roman:"Wal 'asr. Innal insaana lafee khusr. Illal ladheena aamanoo wa 'amilus saalihaati wa tawaasaw bilhaqqi wa tawaasaw bissabr."},{name:"Surah At-Takathur",meaning:"The Rivalry",arabic:"  (1)    (2)    (3)     (4)      (5)",roman:"Al haakumut takaathur. Hattaa zurtumul maqaabir. Kallaa saufa ta'lamoon. Thumma kallaa saufa ta'lamoon. Kallaa lau ta'lamoona 'ilmal yaqeen."},{name:"Surah Al-Qari'ah",meaning:"The Striking Hour",arabic:" (1)   (2)     (3)      (4)     (5)",roman:"Al qaari'ah. Mal qaari'ah. Wa maaa adraaka mal qaari'ah. Yauma yakoonun naasu kalfaraashil mabthooth. Wa takeonul jibaalu kal'ihnil manfoosh."},{name:"Surah Al-Adiyat",meaning:"The Chargers",arabic:"  (1)   (2)   (3)    (4)    (5)",roman:"Wal 'aadiyaati dabha. Fal mooriyaati qadha. Fal mugheeraati subha. Fa atharna bihee naq'aa. Fawasatna bihee jam'aa."},{name:"Surah Az-Zalzalah",meaning:"The Earthquake",arabic:"    (1)    (2)     (3)    (4)",roman:"Idhaa zulzilatil ardu zilzaalahaa. Wa akhrajatil ardu athqaalahaa. Wa qaalal insaanu maa lahaa. Yauma'idhin tuhaddithu akhbaarahaa."},{name:"Surah Al-Bayyinah",meaning:"The Clear Evidence",arabic:"            (1)       (2)",roman:"Lam yakunil ladheena kafaroo min ahlil kitaabi wal mushrikeena munfakkeena hattaa ta'tiyahumul baiyinah. Rasoolum minal laahi yetloo suhufam mutahharah."},{name:"Surah Al-Qadr",meaning:"The Power",arabic:"     (1)      (2)       (3)",roman:"Innaaa anzalnaahu fee lailatil qadr. Wa maaa adraaka maa lailatul qadr. Lailatul qadri khairum min alfee shahr."}],n_=[{name:"Tahiyyatul-wazu",time:"After Wazu",rakats:"2 Rakat Nafl (Dugana)",niyyah:{arabic:"                   ",english:"I intend to perform 2 Rakats of Tahiyyatul-wazu as gratitude to Allah, following the Mahdi Al-Mau'ood (A.S.), facing the Honorable Kaaba."},tariqa:[{step:"Facing Qibla & Niyyath",detail:"Stand facing the Qibla and make the intention (Niyyath) in your heart or tongue.",recitation:"  ..."},{step:"Takbeer-e-Awwal",detail:"Raise hands like a duck's feet (fingers open naturally, palms to Qibla) so thumbs touch the earlobes.",recitation:" "},{step:"Standing (Qiyam) & Sana",detail:"Fold hands below the navel, right hand over left wrist, and recite the Sana.",recitation:"         "},{step:"1st Rakat Recitation",detail:"Recite Surah Al-Fatiha followed by Ayah 135 of Surah Aal-Imran:                       ",recitation:"                      "},{step:"2nd Rakat Recitation",detail:"Recite Surah Al-Fatiha followed by Ayah 110 of Surah An-Nisa:             ",recitation:"            "},{step:"Completion",detail:"Finish with standard Tashahhud, Durood, and Salam.",recitation:"   "}],sajdaDua:[{step:"Sajda-e-Dua",detail:"After Salam, perform one Sajda and recite the following combined supplication.",recitation:`         .                  .

                   .`,roman:"Allahumma laka sajada jismi, wa bika amana qalbi, wa lisani aqarra bika. Allahumma inni qad adhnabtu dhanban 'azeeman, wa la yaghfiru adh-dhanba al-'azeema illa ar-Rabbu al-'Azeem, la ilaha illa ar-Rabbu al-'Azeem. Allahumma kafani min na'eemi ad-dunya mahabbatuka wash-shawqu ilayka wa dhikruka, wa kafani min na'eemi al-akhirati ruyatuka wa ridwanuka bi-fadlika wa karamika, ya akrama al-akrameen.",meaning:"O Allah, my body has prostrated to You, my heart has believed in You, and my tongue has testified to You. O Allah, I am in a state where I have committed a great sin, and none can forgive a great sin except the Great Lord; there is no god but the Great Lord. O Allah, sufficient for me as a blessing in this world is Your love, the longing for You, and Your remembrance. And sufficient for me as a blessing in the Hereafter is the vision of You and Your pleasure, by Your grace and Your generosity, O Most Generous of the generous."}]},{name:"Fajr",time:"Before Sunrise",rakats:"2 Sunnah, 2 Fard",niyyah:{arabic:"              ",english:"I intend to perform 2 Rakats of Fajr Fard for the sake of Allah, facing the Honorable Kaaba."},tariqa:[{step:"Takbir Tahrimah",detail:"Raise hands to ears and say 'Allahu Akbar' to start.",recitation:" "},{step:"Qiyam",detail:"Recite Sana, Al-Fatiha, and a Surah.",recitation:"  "},{step:"Ruku",detail:"Bowing with back level.",recitation:"  "},{step:"Sajdah",detail:"Prostration on the ground.",recitation:"  "},{step:"Tashahhud",detail:"Final sitting for Dua and Salams.",recitation:"  "}]},{name:"Dhuhr",time:"After Noon",rakats:"2 Wazu Dugana, 4 Sunnah, 4 Fard, 2 Sunnah",niyyah:{arabic:"               ",english:"I intend to perform 4 Rakats of Dhuhr Fard for the sake of Allah, facing the Honorable Kaaba."},tariqa:[{step:"1st & 2nd Rakats",detail:"Include Fatiha and a Surah.",recitation:" "},{step:"Middle Sitting",detail:"Sit for Tashahhud after 2nd Rakat.",recitation:" "},{step:"3rd & 4th Rakats",detail:"Only recite Al-Fatiha in Fard.",recitation:"   "},{step:"Final Sitting",detail:"Sit for Tashahhud, Durood, and Salam.",recitation:"   "}]},{name:"Asr",time:"Late Afternoon",rakats:"4 Sunnah, 4 Fard",niyyah:{arabic:"               ",english:"I intend to perform 4 Rakats of Asr Fard for the sake of Allah, facing the Honorable Kaaba."},tariqa:[{step:"Performance",detail:"Perform 4 Rakats silently, similar to Dhuhr.",recitation:" "},{step:"Final Completion",detail:"Complete with Tashahhud and Salam.",recitation:" "}]},{name:"Maghrib",time:"Sunset",rakats:"3 Fard, 2 Sunnah",niyyah:{arabic:"               ",english:"I intend to perform 3 Rakats of Maghrib Fard for the sake of Allah, facing the Honorable Kaaba."},tariqa:[{step:"1st & 2nd Rakats",detail:"Audible recitation of Fatiha and Surah.",recitation:"   "},{step:"3rd Rakat",detail:"Rise for one more Rakat (silent Fatiha only).",recitation:" "},{step:"Completion",detail:"Tashahhud and Salam after 3rd Rakat.",recitation:"   "}]},{name:"Isha",time:"Night",rakats:"2 Wazu Dugana, 4 Sunnah, 4 Fard, 2 Sunnah, 3 Witr",niyyah:{arabic:"               ",english:"I intend to perform 4 Rakats of Isha Fard for the sake of Allah, facing the Honorable Kaaba."},tariqa:[{step:"Fard 4 Rakats",detail:"Perform as usual for 4 Rakat prayers.",recitation:" "},{step:"Witr 3 Rakats",detail:"Includes Dua-e-Qunut in 3rd Rakat.",recitation:"   "}]}],fL=()=>{const[g,t]=et.useState("wazu"),[e,a]=et.useState(0),[s,o]=et.useState(0),[u,h]=et.useState(null),[d,m]=et.useState(!1),[b,y]=et.useState(null),v=et.useRef(null),[x,_]=et.useState(null),[T,R]=et.useState(1),[M,k]=et.useState(0),N=et.useRef(null);et.useEffect(()=>{const U=()=>{N.current&&k(N.current.getBoundingClientRect().width)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[g,s]);const O=({numPages:U})=>{_(U),R(1)},z=async(U,X)=>{if(!u){h(X);try{await YS();const J=await o_(U);J?await c_(J):await a0(U)}catch(J){console.error("Audio error:",J);try{await a0(U)}catch{console.error("Critical Audio Failure")}}finally{h(null)}}},j=()=>{let U="The guide video could not be loaded.";const X=v.current;if(X&&X.error){const J=X.error,tt=J.message?String(J.message):"Network or file issue";U=`Video Error (Code ${J.code}): ${tt}`}y(U),m(!0)},H=n_[e];return D.jsxs("div",{className:"max-w-5xl mx-auto w-full py-8 space-y-8 px-4 flex flex-col min-h-screen",children:[D.jsxs("div",{className:"text-center space-y-2",children:[D.jsx("h2",{className:"text-4xl font-black text-white tracking-tighter",children:"Spiritual Guide"}),D.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.3em]",children:"Knowledge  Practice  Devotion"})]}),D.jsx("div",{className:"flex bg-slate-900/80 p-1.5 rounded-2xl border border-white/5 backdrop-blur-xl shrink-0 shadow-2xl",children:["wazu","prayers","surahs","chiragh"].map(U=>D.jsx("button",{onClick:()=>t(U),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${g===U?"bg-indigo-600 text-white shadow-xl shadow-indigo-900/40":"text-slate-500 hover:text-white"}`,children:U==="wazu"?"Wazu":U==="prayers"?"Prayers":U==="surahs"?"Surahs":"Chiragh-e-Deen"},U))}),D.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar pb-32",children:[g==="wazu"&&D.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom duration-500",children:[D.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/5 bg-gradient-to-br from-indigo-500/5 to-transparent flex flex-col items-center space-y-6",children:[D.jsx("h3",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Niyyah"}),D.jsx("p",{className:"text-4xl md:text-5xl font-serif text-white rtl text-center leading-relaxed",children:yA.arabic}),D.jsxs("p",{className:"text-sm text-slate-400 italic",children:['"',yA.english,'"']}),D.jsx("button",{onClick:()=>z(yA.arabic,"wazu-niyyah"),className:"px-4 py-2 rounded-xl bg-indigo-600/10 text-indigo-400 border border-indigo-600/20 text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 hover:text-white transition-all",children:u==="wazu-niyyah"?"Reciting...":"Recite Niyyah"})]}),D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:hL.map((U,X)=>D.jsxs("div",{className:"glass rounded-3xl p-6 border border-white/5 space-y-4 group",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("span",{className:"w-8 h-8 rounded-full bg-indigo-600/10 border border-indigo-500/20 flex items-center justify-center text-[10px] font-black text-indigo-400",children:X+1}),D.jsx("h4",{className:"text-lg font-black text-white group-hover:text-indigo-400 transition-colors",children:U.name})]}),D.jsx("button",{onClick:()=>z(U.arabic,`wazu-step-${X}`),className:"p-2 rounded-lg bg-white/5 hover:bg-indigo-600 text-slate-400 hover:text-white transition-all",children:u===`wazu-step-${X}`?D.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):D.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})})})]}),D.jsx("img",{src:U.img,className:"w-full h-48 object-contain bg-black/20 rounded-2xl p-4",alt:U.name}),D.jsx("p",{className:"text-xs text-slate-400 font-medium leading-relaxed",children:U.detail}),D.jsx("p",{className:"text-lg font-serif text-white rtl text-right leading-relaxed border-t border-white/5 pt-4",children:U.arabic}),D.jsx("p",{className:"text-[9px] text-indigo-500 font-black uppercase tracking-widest",children:U.roman})]},X))}),D.jsxs("div",{className:"glass rounded-3xl p-8 border border-emerald-500/20 bg-emerald-500/5 space-y-6 text-center",children:[D.jsx("h3",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest",children:"Dua After Wazu"}),D.jsx("p",{className:"text-3xl md:text-4xl font-serif text-white rtl leading-relaxed",children:vA.arabic}),D.jsxs("p",{className:"text-sm text-slate-400 italic",children:['"',vA.english,'"']}),D.jsx("button",{onClick:()=>z(vA.arabic,"wazu-dua-end"),className:"px-6 py-3 rounded-xl bg-emerald-600 text-white font-black uppercase tracking-widest text-[10px] hover:scale-105 transition-all shadow-lg shadow-emerald-900/40",children:u==="wazu-dua-end"?"Reciting...":"Recite Complete Dua"})]})]}),g==="prayers"&&D.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-bottom duration-500",children:[D.jsx("div",{className:"flex flex-row flex-nowrap overflow-x-auto pb-4 gap-4 md:grid md:grid-cols-6 md:overflow-x-visible md:pb-0 snap-x scrollbar-hide",children:n_.map((U,X)=>D.jsxs("button",{onClick:()=>a(X),className:`relative glass rounded-2xl p-6 border transition-all text-left group overflow-hidden shrink-0 w-[200px] md:w-auto snap-center ${e===X?"border-indigo-500 bg-indigo-500/10":"border-white/5 hover:border-white/20"}`,children:[D.jsx("h4",{className:"text-lg font-black text-white leading-tight",children:U.name}),D.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-4",children:U.time}),D.jsx("p",{className:"text-[9px] text-indigo-400 font-black",children:U.rakats}),e===X&&D.jsx("div",{className:"absolute top-2 right-2 text-indigo-500 animate-bounce",children:D.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{d:"M7 10l5 5 5-5H7z"})})})]},X))}),D.jsxs("div",{className:"glass rounded-3xl p-10 border border-indigo-500/20 bg-gradient-to-br from-indigo-500/10 to-transparent flex flex-col items-center space-y-6",children:[D.jsxs("span",{className:"px-3 py-1 bg-indigo-600 text-white text-[9px] font-black rounded-full uppercase tracking-widest",children:[H.name," Intention"]}),D.jsx("p",{className:"text-4xl md:text-5xl font-serif text-white rtl text-center leading-relaxed transition-all duration-500",children:H.niyyah.arabic}),D.jsxs("p",{className:"text-sm text-slate-400 italic text-center",children:['"',H.niyyah.english,'"']})]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:["Tariqa for ",H.name]}),H.tariqa.map((U,X)=>D.jsxs("div",{className:"glass rounded-2xl p-6 border border-white/5 flex flex-col md:flex-row md:items-center justify-between gap-6 group hover:border-indigo-500/30 animate-in fade-in zoom-in duration-300",children:[D.jsxs("div",{className:"space-y-2 flex-1",children:[D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-800 border border-white/5 flex items-center justify-center text-[10px] font-black text-indigo-400",children:X+1}),D.jsx("h3",{className:"text-xl font-black text-white group-hover:text-indigo-400 transition-colors",children:U.step})]}),D.jsx("p",{className:"text-sm text-slate-500 ml-12 font-medium leading-relaxed",children:U.detail}),H.name==="Tahiyyatul-wazu"&&U.step.includes("Recitation")&&D.jsxs("div",{className:"ml-12 mt-4 p-6 bg-indigo-900/20 rounded-2xl border border-indigo-500/20 shadow-xl overflow-hidden animate-in zoom-in duration-500",children:[D.jsx("p",{className:"text-2xl md:text-4xl font-serif text-white rtl text-right leading-[1.8] whitespace-pre-wrap",children:U.recitation}),D.jsxs("div",{className:"flex items-center gap-2 mt-4 text-indigo-400",children:[D.jsx("div",{className:"h-px flex-1 bg-indigo-500/20"}),D.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] whitespace-nowrap",children:"Full Arabic Text to Recite"}),D.jsx("div",{className:"h-px flex-1 bg-indigo-500/20"})]})]})]}),D.jsx("button",{onClick:()=>z(U.recitation,`${H.name}-step-${X}`),className:"px-6 py-3 rounded-xl bg-slate-900 border border-white/5 text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:bg-indigo-600 hover:text-white transition-all disabled:opacity-50 h-fit",children:u===`${H.name}-step-${X}`?D.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Recite"})]},X)),H.sajdaDua&&D.jsxs("div",{className:"mt-12 space-y-4",children:[D.jsxs("div",{className:"flex items-center gap-4 border-b border-white/5 pb-4 mb-8",children:[D.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Post-Namaz Sajda-e-Dua"}),D.jsx("div",{className:"h-px flex-1 bg-white/5"})]}),H.sajdaDua.map((U,X)=>D.jsxs("div",{className:"glass rounded-2xl p-6 border border-emerald-500/10 flex flex-col gap-6 group hover:border-emerald-500/30 bg-emerald-500/[0.02]",children:[D.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[D.jsxs("div",{className:"space-y-2",children:[D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx("span",{className:"w-8 h-8 rounded-full bg-emerald-900/20 border border-emerald-500/20 flex items-center justify-center text-[10px] font-black text-emerald-400",children:X+1}),D.jsx("h3",{className:"text-xl font-black text-white group-hover:text-emerald-400 transition-colors",children:U.step})]}),D.jsx("p",{className:"text-sm text-slate-500 ml-12 font-medium",children:U.detail})]}),D.jsx("button",{onClick:()=>z(U.recitation,`sajda-${X}`),className:"px-6 py-3 rounded-xl bg-slate-900 border border-emerald-500/20 text-[10px] font-black uppercase tracking-widest text-emerald-400 hover:bg-emerald-600 hover:text-white transition-all shrink-0 self-start md:self-center",children:u===`sajda-${X}`?D.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Recite Full Dua"})]}),D.jsxs("div",{className:"space-y-4 border-t border-white/5 pt-4",children:[D.jsx("p",{className:"text-2xl md:text-3xl font-serif text-white rtl text-right leading-loose whitespace-pre-wrap",children:U.recitation}),U.roman&&D.jsxs("div",{className:"space-y-1",children:[D.jsx("p",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"Transliteration"}),D.jsx("p",{className:"text-xs text-slate-400 italic leading-relaxed",children:U.roman})]}),U.meaning&&D.jsxs("div",{className:"space-y-1",children:[D.jsx("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest",children:"Meaning"}),D.jsx("p",{className:"text-xs text-slate-300 font-medium leading-relaxed",children:U.meaning})]})]})]},`sajda-${X}`))]})]}),D.jsxs("div",{className:"mt-16 pt-12 border-t border-white/10",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter uppercase",children:"Salah Method (Tareeka) Video"}),D.jsx("p",{className:"text-indigo-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-2",children:"Visual Instructional Guide"})]}),D.jsx("div",{className:"glass rounded-[2.5rem] overflow-hidden border border-white/10 shadow-2xl relative aspect-video bg-black flex flex-col justify-center group",children:d?D.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-900/50 backdrop-blur-md text-slate-400 p-8 text-center gap-4 border border-white/5 animate-in fade-in duration-700 overflow-y-auto",children:[D.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center text-indigo-400 mb-2",children:D.jsx("svg",{className:"w-8 h-8 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),D.jsxs("div",{children:[D.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:"Instructional Video Unavailable"}),D.jsx("p",{className:"text-sm text-slate-500",children:b||"The guide video could not be loaded."})]}),D.jsx("button",{onClick:()=>{m(!1),y(null),v.current&&v.current.load()},className:"mt-4 px-6 py-2 rounded-full bg-white/5 hover:bg-white/10 text-white text-xs font-bold uppercase tracking-widest transition-all",children:"Retry Connection"})]}):D.jsx("video",{ref:v,className:"w-full h-full object-contain",controls:!0,playsInline:!0,preload:"metadata",onError:j,src:"videos/Hazrat-Peer-o-Murshid-practical-tareeqe.mp4",poster:"https://images.unsplash.com/photo-1590076214667-c0f33b98c44a?auto=format&fit=crop&w=1200&q=80",children:"Your browser does not support the video tag."})}),D.jsx("p",{className:"text-center text-slate-500 text-[10px] font-black uppercase tracking-widest mt-6",children:"Complete step-by-step demonstration for all believers."})]})]}),g==="surahs"&&D.jsx("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-bottom duration-500",children:dL.map((U,X)=>D.jsxs("div",{className:"glass rounded-3xl p-8 border border-white/5 space-y-6 group hover:border-indigo-500/30 transition-all",children:[D.jsxs("div",{className:"flex items-center justify-between border-b border-white/5 pb-4",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"text-2xl font-black text-white",children:U.name}),D.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:U.meaning})]}),D.jsx("button",{onClick:()=>z(U.arabic,`surah-${X}`),className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-indigo-600 text-white text-[10px] font-black uppercase tracking-widest hover:scale-105 transition-all",children:u===`surah-${X}`?"Reciting...":"Recite"})]}),D.jsx("p",{className:"text-3xl md:text-4xl font-serif text-white rtl text-right leading-loose",children:U.arabic}),D.jsxs("div",{className:"space-y-2",children:[D.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Roman Transliteration"}),D.jsx("p",{className:"text-xs text-slate-400 leading-relaxed italic",children:U.roman})]})]},X))}),g==="chiragh"&&D.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom duration-500 h-full flex flex-col",children:[D.jsx("div",{className:"flex flex-row flex-nowrap overflow-x-auto pb-4 gap-4 snap-x scrollbar-hide shrink-0",children:[{name:"Roman Urdu",file:"documents/Chiragh-e-Deen-e-Mahdi-Roman.pdf"},{name:"Urdu",file:"documents/Chiragh-e-Deen-e-Mahdi-Urdu.pdf"},{name:"Deen-e-Nabawi English",file:"documents/Chirag-e-Deen-e-Nabawi.pdf"},{name:"Lailatul Qadr",file:"documents/Lailatul-Qadr-Ke-Dugane-Ki-Niyyat.pdf"},{name:"Taraweeh",file:"documents/Taraweeh-ki-niyyat.pdf"},{name:"40- Allahuma Duas",file:"documents/Dua-after-Witr.pdf"}].map((U,X)=>D.jsxs("button",{onClick:()=>o(X),className:`relative glass rounded-2xl p-4 border transition-all text-left group overflow-hidden shrink-0 min-w-[140px] snap-center ${s===X?"border-indigo-500 bg-indigo-500/10":"border-white/5 hover:border-white/20"}`,children:[D.jsx("h4",{className:"text-sm font-black text-white leading-tight",children:U.name}),D.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"PDF Document"}),s===X&&D.jsx("div",{className:"absolute top-2 right-2 text-indigo-500",children:D.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{d:"M7 10l5 5 5-5H7z"})})})]},X))}),D.jsx("div",{className:"flex-1 min-h-[600px] glass rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative bg-slate-900 flex flex-col",ref:N,children:D.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex justify-center p-4",children:D.jsx(Xk,{file:["documents/Chiragh-e-Deen-e-Mahdi-Roman.pdf","documents/Chiragh-e-Deen-e-Mahdi-Urdu.pdf","documents/Chirag-e-Deen-e-Nabawi.pdf","documents/Lailatul-Qadr-Ke-Dugane-Ki-Niyyat.pdf","documents/Taraweeh-ki-niyyat.pdf","documents/Dua-after-Witr.pdf"][s],onLoadSuccess:O,loading:D.jsxs("div",{className:"text-indigo-400 p-8 flex items-center gap-3",children:[D.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"})," Loading PDF..."]}),error:D.jsx("div",{className:"text-red-400 p-8",children:"Failed to load PDF."}),className:"flex flex-col items-center",children:Array.from(new Array(x),(U,X)=>D.jsx("div",{className:"mb-4 shadow-xl",children:D.jsx(uL,{pageNumber:X+1,width:M>0?Math.min(M-32,800):void 0,renderTextLayer:!1,renderAnnotationLayer:!1})},`page_${X+1}`))})})})]})]})]})};var j2=(g=>(g.FAMILY="FAMILY",g))(j2||{});const G=()=>Math.random().toString(36).substr(2,9),mL={id:"root-shasha-miya",name:"Hazrat Pir-o-Murshid Syed Shah Shasha Miya Sahab (R.A.)",urduName:"           ",spouse:"Hazrath Syeda Sabira Bano (alias Sabni Bi)",role:"Root",spouseRole:"W",image:"https://images.unsplash.com/photo-1590076214667-c0f33b98c44a?auto=format&fit=crop&w=1000&q=80",children:[{id:"branch-a-meerasa",name:"Hazrat Pir-o-Murshid Syed Meerasa Miya (R.A.)",role:"S",spouse:"Hazrath Sahab Khan Bi (alias Dadi Bi)",spouseRole:"W",children:[{id:G(),name:"Hazrat Syed Asadullah Miya",role:"S",spouse:"Hazrath Rajna Bi",spouseRole:"W",children:[{id:G(),name:"Syed Abid Miya",role:"S",spouse:"Syeda Waheeda Bano",spouseRole:"W"},{id:G(),name:"Syeda Qamar Bano",role:"D",spouse:"Syed Sarfraz Mujtahedi",spouseRole:"H"}]},{id:G(),name:"Hazrat Pir-o-Murshid Syed Ibrahim Badshah Miya",role:"S",spouse:"Hazrath Syeda Kubra Bano",spouseRole:"W",children:[{id:G(),name:"Syeda Qamar-ul-Nisa (alias Chandu Bi Bi)",role:"D",spouse:"Syed Ajmal Mehmoodi",spouseRole:"H",children:[{id:G(),name:"Syed Khundmir Najeeb",role:"S",spouse:"Syeda Arifa Bano",spouseRole:"W",children:[{id:G(),name:"Yaqoob",role:"S"},{id:G(),name:"Khurshid",role:"S"},{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syed Meeran Muneer",role:"S",spouse:"Syeda Zikra Bano",spouseRole:"W"},{id:G(),name:"Syeda Najma Bano",role:"D",spouse:"Syed Abul Qasim Ishaqi",spouseRole:"H",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"},{id:G(),name:"Daughter 3",role:"D"}]},{id:G(),name:"Syeda Khair-un-Nisa (Nahid Bano)",role:"D",spouse:"Syed Alam Mehdi",spouseRole:"H"},{id:G(),name:"Syeda Majida Bano",role:"D",spouse:"Syed Shabab Miya",spouseRole:"H"}]},{id:G(),name:"Syeda Sabira Bano",role:"D",spouse:"Syed Muhammad Miya",spouseRole:"H",children:[{id:G(),name:"Syed Dilawar Khundmiri",role:"S",spouse:"Khoonza Gohar Farheen",spouseRole:"W"},{id:G(),name:"Syed Noor Muhammad Tehseen Khundmiri",role:"S",spouse:"Syeda Hina Ambreen",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Son 3",role:"S"},{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syeda Noor-un-Nisa (Shakira Bano)",role:"D",spouse:"Syed Mushtaq Miya",spouseRole:"H"}]}]},{id:G(),name:"Syed Accha Miya",role:"S"},{id:G(),name:"Hazrata Syeda Machhan Bi",role:"D",spouse:"Dadan Miya Sahab",spouseRole:"H"},{id:G(),name:"Hazrata Syeda Meher-un-Nisa",role:"D",spouse:"Syed Alam Miya",spouseRole:"H",children:[{id:G(),name:"Syed Abid Miya",role:"S"},{id:G(),name:"Syeda Khamar Banu",role:"D"}]}]},{id:"branch-b-haji",name:"Hazrat Syed Haji Miya Sahab (R.A.)",role:"S",spouse:"Mohtar-ma Syeda Masa Bibi Sahaba (Wife 1)",spouseRole:"W",children:[{id:G(),name:"Hazrat Syed Qasim (alias Qasu Miya)",role:"S",spouse:"Hazrata Syeda Ilha Dadi",spouseRole:"W",children:[{id:G(),name:"Hazrath Syed Ahmed Yedullahi (alias Badshah Miya)",role:"S",spouse:"Hazrath Syeda Khalida Bano (Khuda-zadi Bi)",spouseRole:"W",children:[{id:G(),name:"Hazrath Syed Irfan Yedullahi",role:"S"},{id:G(),name:"Syed Farhan Yedullahi",role:"S",spouse:"Syeda Sumera",spouseRole:"W",children:[{id:G(),name:"Son",role:"S"}]},{id:G(),name:"Syed Rehan Yedullahi",role:"S"},{id:G(),name:"Syed Rizwan Yedullahi",role:"S",spouse:"Syeda Shafteen",spouseRole:"W",children:[{id:G(),name:"Son",role:"S"},{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"}]},{id:G(),name:"Syed Suleman Yedullahi",role:"S",spouse:"Syeda Zeba",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"}]},{id:G(),name:"Syed Faizan Yedullahi",role:"S",spouse:"Syeda Shafaqat",spouseRole:"W",children:[{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"}]},{id:G(),name:"Syeda Mateen",role:"D"},{id:G(),name:"Syeda Nousheen",role:"D"},{id:G(),name:"Syeda Ambreen",role:"D"},{id:G(),name:"Syeda Sabreen",role:"D"},{id:G(),name:"Syeda Noreen",role:"D"}]},{id:G(),name:"Hazrath Syed Muhammad Taqi Yeduallahi (Sardar Miya)",role:"S",spouse:"Hazrath Syeda Khadija Bano",spouseRole:"W",children:[{id:G(),name:"Syed Alam Shaji Yedullahi",role:"S",spouse:"Syeda Seema Fatima",spouseRole:"W",children:[{id:G(),name:"Syed Ali Naimath Muqashif",role:"S"},{id:G(),name:"Syed Abdul Khader Munqashif",role:"S"},{id:G(),name:"Syeda Ushna Fatima",role:"D"},{id:G(),name:"Syeda Afifa Fatima",role:"D"}]},{id:G(),name:"Syed Mahmood Sami",role:"S",spouse:"Syeda Sheeba Tahmeen",spouseRole:"W",children:[{id:G(),name:"Syed Mohammed Dilshad",role:"S"},{id:G(),name:"Syeda Raziya Fatima (Tayyaba)",role:"D"}]},{id:G(),name:"Syed Ibrahim Zakee",role:"S",spouse:"Syeda Rayeesa Banu",spouseRole:"W",children:[{id:G(),name:"Syed Huzer Mehdi",role:"S"},{id:G(),name:"Syeda Faseeha Farzeen",role:"D"}]},{id:G(),name:"Syed Rajmohammed Safi",role:"S",spouse:"Syeda Rimaz (Ruqayya)",spouseRole:"W",children:[{id:G(),name:"Syeda Waseena Eiwaz",role:"D"},{id:G(),name:"Syeda Zainab Tamseela",role:"D"},{id:G(),name:"Syeda Fatima Tanzila",role:"D"}]},{id:G(),name:"Syeda Majida Tarannum",role:"D",spouse:"Syed Ismail Nizami",spouseRole:"H",children:[{id:G(),name:"Syed Mohd Ayaan",role:"S"},{id:G(),name:"Syeda Gazala Nizami",role:"D",spouse:"Syed Ahmed Mujahid",spouseRole:"H"},{id:G(),name:"Syeda Saima Nizami",role:"D"},{id:G(),name:"Syeda Sania Nizami",role:"D"},{id:G(),name:"Syeda Samia Nizami",role:"D"},{id:G(),name:"Syeda Zubia Nizami",role:"D"}]},{id:G(),name:"Syeda Wajeeda Tabassum",role:"D",spouse:"Syed Siddique Ahmed",spouseRole:"H",children:[{id:G(),name:"Syed Ahmed Shayaan",role:"S"},{id:G(),name:"Syed Dilawar Adnan",role:"S"},{id:G(),name:"Syeda Archer Rhushinaz",role:"D"}]},{id:G(),name:"Syeda Rakshinda Munajjum (Raj Banu)",role:"D",spouse:"Syed Mujtaba Mehdi",spouseRole:"H",children:[{id:G(),name:"Syed Amaan",role:"S"},{id:G(),name:"Syed Abdullah",role:"S"},{id:G(),name:"Syeda Maryam",role:"D"},{id:G(),name:"Syeda Maira",role:"D"}]},{id:G(),name:"Syeda Javida Mujassum",role:"D",spouse:"Syed Rafathullah Mashood Khundmiri",spouseRole:"H",children:[{id:G(),name:"Syed Mahmood Hussain Khundmiri",role:"S"},{id:G(),name:"Syeda Akhtar Banu",role:"D"},{id:G(),name:"Syeda Hidayathullah Hadanji Malkaan",role:"D"},{id:G(),name:"Syeda Maryam Saira",role:"D"},{id:G(),name:"Syeda Amina Saher",role:"D"}]}]},{id:G(),name:"Syed Mustafa Haji Miya",role:"S",spouse:"Hazrath Syeda Qamar Siddiqa Bano",spouseRole:"W",children:[{id:G(),name:"Unknown Son",role:"S"},{id:G(),name:"Syed Tanweer",role:"S",spouse:"Syeda Afshan",spouseRole:"W",children:[{id:G(),name:"Son",role:"S"},{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"},{id:G(),name:"Daughter 3",role:"D"},{id:G(),name:"Daughter 4",role:"D"}]},{id:G(),name:"Syed Hussain Tauqeer",role:"S"},{id:G(),name:"Syeda Shanoor",role:"D",spouse:"Syed Nizam",spouseRole:"H",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"}]},{id:G(),name:"Late Syeda Sharooq",role:"D",spouse:"Syed Nazeer",spouseRole:"H",children:[{id:G(),name:"Son",role:"S"}]},{id:G(),name:"Syeda Shagufta",role:"D",spouse:"Hazrath Syed Jawad Miya",spouseRole:"H",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"}]}]},{id:G(),name:"Syed Ahmed (Badshah Miya)",role:"S"},{id:G(),name:"Syed Munawwar (Murshid Miya)",role:"S"},{id:G(),name:"Syed Munawwar (Mahboob Miya)",role:"S"},{id:G(),name:"Syeda Shahida Bano",role:"D",spouse:"Syed Aziz Miya",spouseRole:"H",children:[{id:G(),name:"Syed Shaker",role:"S",spouse:"Syeda Mehween",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syed Amir",role:"S",spouse:"Late Syeda",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Son 3",role:"S"}]},{id:G(),name:"Late Syed Zakir",role:"S",spouse:"Syeda",spouseRole:"W",children:[{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syed Ahmer",role:"S",spouse:"Syeda",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"},{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syed Zubair",role:"S",spouse:"Syeda Ifath",spouseRole:"W",children:[{id:G(),name:"Daughter",role:"D"}]},{id:G(),name:"Syed Saber",role:"S",spouse:"Syeda",spouseRole:"W",children:[{id:G(),name:"Son 1",role:"S"},{id:G(),name:"Son 2",role:"S"}]},{id:G(),name:"Late Syeda Zahida Banu",role:"D",spouse:"Syed Amjad",spouseRole:"H",children:[{id:G(),name:"Syed Sarshar Mehdi",role:"S"},{id:G(),name:"Syeda Ashkar Mehvish",role:"D",spouse:"Syed Adil",spouseRole:"H",children:[{id:G(),name:"Son",role:"S"},{id:G(),name:"Daughter 1",role:"D"},{id:G(),name:"Daughter 2",role:"D"},{id:G(),name:"Daughter 3",role:"D"}]},{id:G(),name:"Syeda Abshar Mehvish",role:"D",spouse:"Syed",spouseRole:"H"}]},{id:G(),name:"Syeda Mehdiya Tabassum",role:"D",spouse:"Syed Jaleel",spouseRole:"H"}]}]},{id:G(),name:"Raja Miya Sahab (Son of Wife 2)",role:"S"},{id:G(),name:"Channu Miya Sahab (Son of Wife 3)",role:"S"}]}]},gL={id:"root-maternal-mahdi",name:"Hazrat Syed Muhammad Mahdi Al-Mau'ood (Alayhis Salam)",role:" ",image:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=1000&q=80",children:[{id:G(),name:"Hazrat Syedna Shah Mahmood Sani Al-Mahdi (Radi Allahu Ta'ala Anhu)",role:" ",children:[{id:G(),name:"Hazrat Syedna Shah Yaqub Hasan Wilayat (Radi Allahu Ta'ala Anhu)",role:" ",children:[{id:G(),name:"Hazrat Syedna Shah Khundmir Barah Bani Israel (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Syed Jalal (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Syed Musa (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Syed Yadullah Bade Shah Miyan (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Syed Zain-ul-Abideen (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Syed Abdul Karim (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Syed Mustafa Shaheed (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Miyan Syed Umar (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Syed Ibrahim, also known as Khamosh Bawa Sa Miyan (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Peer-o-Murshid Miyan Syed Shah Shah Miyan (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Miyan Syed Haji Miyan Sahib (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Miyan Syed Qasim, also known as Qasu Miyan Sahib (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Hazrat Syed Muhammad Taqi, also known as Sardar Miyan Sahib (Rehmatullah Alaih)",role:" ",children:[{id:G(),name:"Syed Alam Shaji",role:" "},{id:G(),name:"Syed Mahmood Sami",role:" "},{id:G(),name:"Syed Ibrahim Zaki",role:" "},{id:G(),name:"Syed Raj Muhammad Safi",role:" "}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},pL=[{type:"chain",title:"Spiritual Intro & Chain",lines:[{arabic:"   ",roman:"Bismillahir Rahmanir Raheem",urdu:"           "},{arabic:"                             ",roman:"Tan man as tan Murshid, dil man as dil Murshid, ruh man as ruh Murshid, zahir man as zahir Murshid, batin man as batin Murshid, nazar man as nazar Murshid.",urdu:"                                   "},{arabic:"    -                                                        .",roman:"Bismillahir Rahmanir Raheem - Allahumma salli ala Sayyidina Maulana Muhammadin Sayyid al-Ashiqina, Mashuqina, Sayyidil Mujibina, Sayyidil Muhibbina, Sayyidil Mursalina, Sayyidil Mustaqimina, Sayyidil Zakirina.",urdu:"    -  !                                             "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Adam Safiyullah salawatullahi alayh",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Nuh Najiyullah salawatullahi alayh",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Ibrahim Khalilullah salawatullahi alayh",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Musa Kalimullah salawatullahi alayh",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Isa Ruhullah salawatullahi alayh",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat La ilaha illallah Muhammadur Rasulullah salawatullahi alayh",urdu:"           "},{arabic:"               ",roman:"Ilahi bihurmat La ilaha illallah Hazrat Meera Syed Muhammad Mahdi Mauood Akhir-uz-Zaman Alayhis Salam",urdu:"               "},{arabic:"           ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Mahmood Sani Mahdi (R.A)",urdu:"           "},{arabic:"           ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Shah Yaqub Hasani Wilayat (R.A)",urdu:"           "},{arabic:"            ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Khundmir Bara Banisrail (R.A)",urdu:"      mir      "},{arabic:"           ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Shah Nusrat Makhsoos-uz-Zaman (R.A)",urdu:"           "},{arabic:"         ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Sharif (R.A)",urdu:"         "},{arabic:"         ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Mubarak (R.A)",urdu:"         "},{arabic:"          ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Khuda Bakhsh (R.H)",urdu:"          "},{arabic:"            ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Najmuddin Shaheed Akbar (R.H)",urdu:"            "},{arabic:"     s        ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Atan Shaheed-fi-Sabilillah (R.H)",urdu:"             "},{arabic:"         ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Yaqub (R.H)",urdu:"         "},{arabic:"         ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Nusrat (R.H)",urdu:"         "},{arabic:"          ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Shahabuddin (R.H)",urdu:"          "},{arabic:"           ",roman:"Ilahi bihurmat Hazrat Bandagi Miyan Syed Atan Shahab Mahdavi (R.H)",urdu:"           "},{arabic:"       ",roman:"Illallah tu hai La ilaha hoon nahi",urdu:"       "}]}],bL=()=>{const g=[{to:"/family",label:"Lineage",title:"Ancestry",desc:"Biological roots & Paternal branches.",color:"from-blue-600 to-cyan-500",image:"images/photo-1580137189272-c9379f8864fd.png"},{to:"/silsila",label:"Legacy",title:"Spiritual Silsila",desc:"The chain of spiritual inheritance.",color:"from-emerald-600 to-teal-500",image:"images/photo-1580137189272-c9379f8864fd.png"},{to:"/guide",label:"Spiritual",title:"Guide",desc:"Salah, Wazu, and Surahs.",color:"from-indigo-600 to-purple-500",image:"images/photo-1580137189272-c9379f8864fd.png"}];return D.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-12",children:D.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-12 py-8 md:py-16",children:[D.jsxs("div",{className:"text-center space-y-4 animate-in fade-in zoom-in duration-1000",children:[D.jsxs("h1",{className:"text-5xl md:text-8xl font-black text-white tracking-tighter",children:["Legacy ",D.jsx("span",{className:"text-blue-500",children:"Flow"})]}),D.jsx("p",{className:"text-slate-400 max-w-xl mx-auto font-medium tracking-wide",children:"A digital archive of biological and spiritual inheritance."})]}),D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:g.map((t,e)=>D.jsxs(Lf,{to:t.to,className:"group glass rounded-3xl p-8 border border-white/5 hover:border-white/20 transition-all flex flex-col justify-end h-72 relative overflow-hidden shadow-2xl",children:[D.jsxs("div",{className:"absolute inset-0 z-0",children:[D.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover opacity-40 group-hover:opacity-50 group-hover:scale-110 transition-all duration-700 ease-out grayscale group-hover:grayscale-0"}),D.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/80 to-transparent"})]}),D.jsxs("div",{className:"relative z-10 translate-y-2 group-hover:translate-y-0 transition-transform duration-500",children:[D.jsx("div",{className:`absolute -inset-4 bg-gradient-to-r ${t.color} blur-2xl opacity-0 group-hover:opacity-20 transition duration-500 -z-10`}),D.jsx("span",{className:"px-3 py-1 text-[9px] font-black uppercase text-white bg-white/10 backdrop-blur-md rounded-full mb-3 inline-block w-fit tracking-widest border border-white/10",children:t.label}),D.jsx("h2",{className:"text-3xl font-black text-white mb-2 group-hover:text-blue-200 transition-colors drop-shadow-lg",children:t.title}),D.jsx("p",{className:"text-sm text-slate-300 font-medium leading-relaxed max-w-[85%]",children:t.desc})]})]},e))})]})})},yL=()=>{const[g,t]=et.useState("paternal"),[e,a]=et.useState("all"),[s,o]=et.useState(!1),u=et.useMemo(()=>g==="paternal"?mL:gL,[g]),h=et.useMemo(()=>{const y=[],v=x=>{x.children&&x.children.length>0&&y.push(x),x.children&&x.children.forEach(v)};return v(u),y},[u]),d=et.useMemo(()=>{if(e==="all")return u;const y=(v,x)=>{if(v.id===x)return{...v};if(v.children)for(const _ of v.children){const T=y(_,x);if(T)return{...v,children:[T]}}return null};return y(u,e)||u},[u,e]),m=et.useMemo(()=>{if(e==="all")return"Full Tree";const y=h.find(v=>v.id===e);return y?y.name:e},[e,h]),b=()=>{o(!0),setTimeout(()=>{window.print(),o(!1)},8e3)};return D.jsxs("div",{className:`w-full bg-slate-950 print:bg-white print:bg-none print:m-0 print:p-0 ${s?"printing-mode block h-auto overflow-visible":"flex flex-col h-[calc(100vh-64px)] overflow-hidden"}`,children:[D.jsx("div",{className:"hidden print:block mb-1 border-b border-slate-200 pb-1",children:D.jsxs("div",{className:"flex justify-between items-end",children:[D.jsxs("div",{children:[D.jsxs("h1",{className:"text-2xl font-black text-slate-900",children:["Legacy Flow: ",g==="paternal"?"Paternal Ancestry":"Family Tree ( )"]}),e!=="all"&&D.jsxs("p",{className:"text-base text-slate-600 mt-0.5",children:["Lineage of: ",D.jsx("span",{className:"font-bold",children:m})]})]}),D.jsxs("div",{className:"text-right text-slate-500 text-[10px]",children:[D.jsxs("p",{children:["Printed on: ",new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})]}),D.jsxs("p",{children:["Time: ",new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]})}),D.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between px-4 py-3 md:px-8 md:py-4 border-b border-white/5 bg-slate-900/50 backdrop-blur-sm z-10 shrink-0 gap-4 print:hidden",children:[D.jsxs("div",{className:"flex w-full md:w-auto bg-slate-950 p-1 rounded-xl border border-white/10 max-w-lg shadow-inner",children:[D.jsx("button",{onClick:()=>{t("paternal"),a("all")},className:`flex-1 md:px-8 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${g==="paternal"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Paternal"}),D.jsx("button",{onClick:()=>{t("maternal"),a("all")},className:`flex-1 md:px-8 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${g==="maternal"?"bg-blue-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Family Tree ( )"})]}),D.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[D.jsxs("select",{value:e,onChange:y=>a(y.target.value),className:"flex-1 md:w-64 bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-[10px] font-black uppercase tracking-widest text-slate-300 focus:outline-none focus:border-blue-500 transition-all min-w-0",children:[D.jsx("option",{value:"all",children:"Full Tree"}),h.map(y=>D.jsx("option",{value:y.id,children:y.name},y.id))]}),D.jsxs("button",{onClick:b,className:"shrink-0 px-4 md:px-6 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg flex items-center gap-2",children:[D.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]})]})]}),D.jsx("div",{className:`w-full ${s?"block static h-auto overflow-visible":"flex-1 relative overflow-hidden bg-[radial-gradient(circle_at_center,_#0f172a_0%,_#020617_100%)]"}`,children:D.jsx(_R,{data:d,type:j2.FAMILY,expandAll:s||e!=="all",isPrinting:s})}),D.jsxs("div",{className:"print-footer text-[9px] text-slate-500 uppercase tracking-[0.2em] w-full text-center",children:[D.jsx("p",{children:" 2026 Legacy Flow - Digital Archive of Biological and Spiritual Inheritance"}),D.jsx("p",{className:"mt-1",children:"Digital Ancestry Record  Generated via Legacy Flow Platform"})]})]})},vL=()=>{const[g,t]=et.useState(null),[e,a]=et.useState(-1),s=et.useRef(null),o=[{start:0,end:5,text:"In the name of Allah, the Most Gracious, the Most Merciful"},{start:5,end:12,text:"My body is the Murshid's body, my heart is the Murshid's heart"},{start:12,end:18,text:"My soul is the Murshid's soul, my manifest is the Murshid's manifest"},{start:18,end:24,text:"My hidden is the Murshid's hidden, my sight is the Murshid's sight"},{start:24,end:32,text:"O Allah! Bless our Master Muhammad, the Master of Lovers"},{start:32,end:40,text:"Bless our Master Muhammad, the Master of those who Answer"},{start:40,end:48,text:"Bless our Master Muhammad, the Master of the Divine Messengers"},{start:48,end:55,text:"Bless our Master Muhammad, the Master of the Steadfast"},{start:55,end:65,text:"By the sanctity of 'There is no god but Allah, Adam is the Pure one of Allah'"},{start:65,end:75,text:"By the sanctity of 'There is no god but Allah, Noah is the Prophet of Allah'"},{start:75,end:85,text:"By the sanctity of 'There is no god but Allah, Ibrahim is the Friend of Allah'"},{start:85,end:95,text:"By the sanctity of 'There is no god but Allah, Musa is the Interlocutor of Allah'"},{start:95,end:110,text:"By the sanctity of 'There is no god but Allah, Isa is the Spirit of Allah'"},{start:110,end:130,text:"By the sanctity of 'There is no god but Allah, Muhammad is the Messenger of Allah'"},{start:130,end:155,text:"Hazrat Meera Syed Muhammad Mahdi Mauood (A.S)"},{start:155,end:180,text:"Hazrat Bandagi Miyan Syed Mahmood Sani Mahdi (R.A)"},{start:180,end:205,text:"Hazrat Bandagi Miyan Shah Yaqub Hasani Wilayat (R.A)"},{start:205,end:230,text:"Hazrat Bandagi Miyan Syed Khundmir Bara Banisrail (R.A)"},{start:230,end:255,text:"Hazrat Bandagi Miyan Shah Nusrat Makhsoos-uz-Zaman (R.A)"},{start:255,end:280,text:"Hazrat Bandagi Miyan Syed Sharif (R.A)"},{start:280,end:305,text:"Hazrat Bandagi Miyan Syed Mubarak (R.A)"},{start:305,end:330,text:"Hazrat Bandagi Miyan Syed Khuda Bakhsh (R.H)"},{start:330,end:355,text:"Hazrat Bandagi Miyan Syed Najmuddin Shaheed Akbar (R.H)"},{start:355,end:500,text:"Continuing the sacred chain of spiritual transmission and blessings..."}],u=()=>{if(!s.current)return;const d=s.current.currentTime,m=o.findIndex(b=>d>=b.start&&d<=b.end);m!==e&&a(m)},h=async(d,m)=>{if(g===null){t(m);try{await YS();const b=await o_(d);b?await c_(b):await a0(d)}catch(b){console.error("Audio error:",b);try{await a0(d)}catch{}}finally{t(null)}}};return D.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] w-full p-4 md:p-8 overflow-hidden",children:[D.jsxs("div",{className:"shrink-0 text-center md:text-left mb-6",children:[D.jsx("h2",{className:"text-2xl md:text-3xl font-black text-white",children:"Spiritual Silsila"}),D.jsx("p",{className:"text-emerald-500 text-[10px] font-bold uppercase tracking-widest mt-1",children:"The Sacred Chain of Inheritance (Tawassul)"})]}),D.jsx("div",{className:"flex-1 glass rounded-3xl p-4 md:p-12 overflow-y-auto custom-scrollbar border border-white/5 bg-gradient-to-b from-white/[0.02] to-transparent",children:D.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-12",children:[pL.map((d,m)=>{var b;return D.jsx("div",{className:"space-y-4",children:D.jsx("div",{className:"grid grid-cols-1 gap-4",children:(b=d.lines)==null?void 0:b.map((y,v)=>{const x=`${m}-${v}`;return D.jsxs("div",{className:"group flex flex-col p-6 md:p-8 bg-white/5 rounded-3xl border border-white/5 hover:border-emerald-500/30 transition-all duration-500 relative overflow-hidden",children:[D.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:D.jsx("span",{className:"text-5xl md:text-6xl font-black text-emerald-500",children:v+1})}),D.jsxs("div",{className:"space-y-6",children:[D.jsx("p",{className:"text-2xl md:text-5xl font-serif text-white rtl leading-snug text-right",children:y.arabic}),D.jsx("div",{className:"h-px w-full bg-white/10 group-hover:bg-emerald-500/20 transition-colors"}),D.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[D.jsx("p",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-[0.2em] flex-1",children:y.roman}),D.jsx("p",{className:"text-lg md:text-xl font-serif text-slate-300 rtl leading-relaxed flex-1 text-right",children:y.urdu})]}),D.jsxs("button",{onClick:()=>h(y.arabic,x),className:"self-end px-4 py-2 rounded-xl bg-emerald-600/10 text-emerald-400 border border-emerald-600/20 text-[10px] font-black uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all flex items-center gap-2",children:[g===x?D.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):D.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:D.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})}),"Recite"]})]})]},v)})})},m)}),D.jsxs("div",{className:"mt-16 pt-12 border-t border-white/10 relative",children:[D.jsx("div",{className:"absolute inset-x-0 -top-24 h-48 bg-emerald-500/10 blur-[100px] pointer-events-none rounded-full animate-pulse"}),D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter uppercase",children:"Recitation Archive - Silsila in mothers voice"}),D.jsx("p",{className:"text-emerald-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-2",children:"Historical Audio Preservation"})]}),D.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[D.jsxs("div",{className:"relative group",children:[D.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-emerald-600 to-blue-600 rounded-3xl blur opacity-25 group-hover:opacity-40 transition duration-1000"}),D.jsx("div",{className:"relative glass rounded-3xl overflow-hidden border border-white/10 shadow-2xl aspect-video bg-black/60 flex flex-col justify-center",children:D.jsx("video",{ref:s,onTimeUpdate:u,className:"w-full h-full object-contain",controls:!0,playsInline:!0,preload:"metadata",src:"videos/Silsila-mothers-voice.mp4",children:"Your browser does not support the video tag."})})]}),D.jsxs("div",{className:"glass rounded-3xl border border-white/5 p-6 flex flex-col gap-4 bg-slate-900/40 relative overflow-hidden",children:[D.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-3",children:[D.jsx("span",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest",children:"Live Translation Display"}),D.jsx("div",{className:`w-2 h-2 rounded-full ${e>=0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`})]}),D.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3 max-h-[300px] pr-2",children:[o.map((d,m)=>D.jsx("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${m===e?"bg-emerald-600/20 border-emerald-500/50 scale-[1.02] shadow-lg":"bg-white/5 border-transparent opacity-40"}`,children:D.jsx("p",{className:`text-sm md:text-base font-medium leading-relaxed ${m===e?"text-white":"text-slate-400"}`,children:d.text})},m)),e===-1&&D.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-[10px] font-black uppercase tracking-widest text-center py-12",children:"Play video to sync translation"})]}),D.jsx("div",{className:"absolute bottom-0 inset-x-0 h-12 bg-gradient-to-t from-slate-900 to-transparent pointer-events-none"})]})]}),D.jsxs("div",{className:"mt-8 flex items-center justify-center gap-4 text-slate-500 text-[10px] font-black uppercase tracking-widest",children:[D.jsx("div",{className:"h-px flex-1 bg-white/5"}),D.jsx("span",{children:"Digital Archive  Silsila Recitation"}),D.jsx("div",{className:"h-px flex-1 bg-white/5"})]})]})]})})]})},AL=()=>{const[g,t]=et.useState(!1),[e,a]=et.useState(!0);et.useEffect(()=>{(async()=>{const h=window;if(h.aistudio){const d=await h.aistudio.hasSelectedApiKey();t(d)}else t(!0);a(!1)})()},[]);const s=async()=>{const u=window;if(u.aistudio)try{await u.aistudio.openSelectKey(),t(!0)}catch(h){console.error(h)}};return e?D.jsx("div",{className:"h-full w-full bg-[#020617] flex items-center justify-center text-slate-500 font-mono text-xs",children:"Initializing Secure Environment..."}):!g&&window.aistudio?D.jsxs("div",{className:"h-full w-full bg-[#020617] flex flex-col items-center justify-center p-8 text-center space-y-8 animate-in fade-in duration-700",children:[D.jsxs("div",{className:"space-y-4",children:[D.jsxs("h1",{className:"text-5xl font-black text-white tracking-tighter",children:["Legacy ",D.jsx("span",{className:"text-blue-500",children:"Flow"})]}),D.jsx("p",{className:"text-slate-400 max-w-lg mx-auto text-lg",children:"To access the ancestral archives and spiritual guides, please connect your secure API key."})]}),D.jsxs("div",{className:"flex flex-col items-center gap-5",children:[D.jsx("button",{onClick:s,className:"px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold text-sm uppercase tracking-widest shadow-xl shadow-blue-900/30 transition-all hover:scale-105",children:"Connect API Key"}),D.jsx("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"text-xs text-slate-600 hover:text-slate-400 underline decoration-slate-700 underline-offset-4",children:"Get a Gemini API Key"})]})]}):D.jsx(lR,{children:D.jsx(xR,{children:D.jsxs(oR,{children:[D.jsx(mb,{path:"/",element:D.jsx(bL,{})}),D.jsx(mb,{path:"/family",element:D.jsx(yL,{})}),D.jsx(mb,{path:"/silsila",element:D.jsx(vL,{})}),D.jsx(mb,{path:"/guide",element:D.jsx(fL,{})})]})})})},F2=document.getElementById("root");if(!F2)throw new Error("Could not find root element to mount to");const SL=SR.createRoot(F2);SL.render(D.jsx(cR.StrictMode,{children:D.jsx(AL,{})}));
